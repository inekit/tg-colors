"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[295],{8295:function(e,t,n){n.r(t),n.d(t,{default:function(){return ke}});var i=n(3396);function r(e,t,n,r,a,o){const l=(0,i.up)("AddItemModal"),s=(0,i.up)("Table");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(l,{visible:a.formVisible,formData:a.formData,mode:e.formMode},null,8,["visible","formData","mode"]),(0,i.Wm)(s,{fields:a.tableFieldNames,postData:o.get,actions:a.dataActions,rows:a.rows,editMode:"form",name:"Позиции"},null,8,["fields","postData","actions","rows"])])}var a=n(9242),o=n(7139);const l=e=>((0,i.dD)("data-v-1ca7fc1a"),e=e(),(0,i.Cn)(),e),s={class:"projects-list"},c=l((()=>(0,i._)("span",null,"Категория",-1))),d={class:"options-shedle"},u=l((()=>(0,i._)("span",null,"Опции",-1))),p={class:"table"},m=l((()=>(0,i._)("td",null,[(0,i.Uk)("Размер"),(0,i._)("br"),(0,i.Uk)(" Материал")],-1))),f=l((()=>(0,i._)("td",null,null,-1))),h={class:"border p-2 mt-3 preview-container"},g=["src"],w=["onClick"];function b(e,t,n,r,l,b){const v=(0,i.up)("CButton"),y=(0,i.up)("CModalTitle"),_=(0,i.up)("CModalHeader"),D=(0,i.up)("CFormInput"),k=(0,i.up)("CFormCheck"),C=(0,i.up)("CInputGroup"),N=(0,i.up)("CFormTextarea"),A=(0,i.up)("QuillEditor"),E=(0,i.up)("CModalBody"),T=(0,i.up)("CModalFooter"),M=(0,i.up)("CForm"),S=(0,i.up)("CModal");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(v,{color:"primary",onClick:b.addNewPost},{default:(0,i.w5)((()=>[(0,i.Uk)("Добавить товар")])),_:1},8,["onClick"]),(0,i.Wm)(S,{size:"xl",backdrop:"static",alignment:"center",visible:n.visible,onClose:b.closeModal},{default:(0,i.w5)((()=>[(0,i.Wm)(M,{novalidate:"",validated:l.formValid,ref:"add-file-form",onChange:e.wregert,onSubmit:t[7]||(t[7]=(0,a.iM)((e=>"new"===n.mode?b.addNewing():b.editNewing()),["prevent"])),class:"add-user",style:{display:"'none'"}},{default:(0,i.w5)((()=>[(0,i.Wm)(_,null,{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)("new"===n.mode?"Добавить товар":"Редактировать товар"),1)])),_:1})])),_:1}),(0,i.Wm)(E,null,{default:(0,i.w5)((()=>[(0,i.Wm)(D,{class:"mb-3",modelValue:n.formData.title,"onUpdate:modelValue":t[0]||(t[0]=e=>n.formData.title=e),placeholder:"Заголовок",id:"inputHeader","aria-describedby":"inputGroupPrepend",feedbackValid:"Все ок",feedbackInvalid:"Введите корректный заголовок",required:""},null,8,["modelValue"]),(0,i._)("div",s,[c,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.projects,(e=>((0,i.wg)(),(0,i.j4)(k,{key:e.name,id:e.name,checked:e.name===n.formData.category_name,onChange:b.changeP,type:"radio",name:"project-name",value:e.name,label:e.name},null,8,["id","checked","onChange","value","label"])))),128)),(0,i.Wm)(k,{id:"null-name",checked:!n.formData.category_name,onChange:b.changeP,type:"radio",name:"project-name",value:"",label:"Без категорий"},null,8,["checked","onChange"])]),(0,i._)("div",d,[u,(0,i._)("table",p,[(0,i._)("thead",null,[(0,i._)("tr",null,[m,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.distinct_sizes,(e=>((0,i.wg)(),(0,i.iD)("td",{key:"sizeh-"+e},[(0,i.Uk)((0,o.zw)(e)+" ",1),(0,i.Wm)(v,{color:"secondary",onClick:t=>b.dropSize(e)},{default:(0,i.w5)((()=>[(0,i.Uk)("X")])),_:2},1032,["onClick"])])))),128)),(0,i._)("td",null,[(0,i.Wm)(C,{class:""},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{placeholder:"Новый размер",type:"text",modelValue:l.tempSize,"onUpdate:modelValue":t[1]||(t[1]=e=>l.tempSize=e)},null,8,["modelValue"]),(0,i.Wm)(v,{class:"add-button",type:"button",color:"secondary",onClick:t[2]||(t[2]=e=>b.addSize(l.tempSize)),variant:"outline"},{default:(0,i.w5)((()=>[(0,i.Uk)("Добавить")])),_:1})])),_:1})])])]),(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.distinct_materials,(e=>((0,i.wg)(),(0,i.iD)("tr",{key:"material-"+e},[(0,i._)("td",null,[(0,i.Uk)((0,o.zw)(e)+" ",1),(0,i.Wm)(v,{color:"secondary",onClick:t=>b.dropMaterial(e)},{default:(0,i.w5)((()=>[(0,i.Uk)("X")])),_:2},1032,["onClick"])]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.distinct_sizes,(t=>((0,i.wg)(),(0,i.iD)("td",{key:"size-"+t},[(0,i.Wm)(D,{type:"text",modelValue:l.options_object[e][t],"onUpdate:modelValue":n=>l.options_object[e][t]=n},null,8,["modelValue","onUpdate:modelValue"])])))),128)),f])))),128)),(0,i._)("tr",null,[(0,i._)("td",null,[(0,i.Wm)(C,{class:""},{default:(0,i.w5)((()=>[(0,i.Wm)(D,{placeholder:"Новый материал",type:"text",modelValue:l.tempMaterial,"onUpdate:modelValue":t[3]||(t[3]=e=>l.tempMaterial=e)},null,8,["modelValue"]),(0,i.Wm)(v,{class:"add-button",type:"button",color:"secondary",onClick:t[4]||(t[4]=e=>b.addMaterial(l.tempMaterial)),variant:"outline"},{default:(0,i.w5)((()=>[(0,i.Uk)("Добавить ")])),_:1})])),_:1})])])])])]),(0,i.Wm)(D,{type:"file",accept:"image/*",multiple:"multiple",ref:"file",onChange:b.previewMultiImage,class:"mb-3",label:"Превью",placeholder:"Превью"},null,8,["onChange"]),(0,i._)("div",h,[l.preview_list?.length?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(l.preview_list,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t},[(0,i._)("img",{src:e,class:"img-fluid"},null,8,g),(0,i._)("button",{onClick:(0,a.iM)((e=>b.dropFile(t)),["prevent"])},"Х",8,w)])))),128)):(0,i.kq)("",!0)]),(0,i.Wm)(N,{modelValue:n.formData.description,"onUpdate:modelValue":t[5]||(t[5]=e=>n.formData.description=e),label:"Краткое описание",style:{"margin-bottom":"1rem"},placeholder:"Напишите что-нибудь",rows:"5",maxlength:"255",id:"inputDescription","aria-describedby":"inputGroupPrepend",required:""},null,8,["modelValue"]),(0,i.Wm)(A,{theme:"snow",toolbar:"essential",ref:"postTextEditor",id:"postTextEditor",placeholder:"Краткое описание"},null,512)])),_:1}),(0,i.Wm)(T,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{color:"secondary",onClick:t[6]||(t[6]=e=>n.visible=!1)},{default:(0,i.w5)((()=>[(0,i.Uk)(" Отменить ")])),_:1}),(0,i.wy)((0,i.Wm)(v,{color:"primary",type:"submit"},{default:(0,i.w5)((()=>[(0,i.Uk)("Добавить")])),_:1},512),[[a.F8,"new"===n.mode]]),(0,i.wy)((0,i.Wm)(v,{color:"primary",type:"submit"},{default:(0,i.w5)((()=>[(0,i.Uk)("Редактировать")])),_:1},512),[[a.F8,"edit"===n.mode]])])),_:1})])),_:1},8,["validated","onChange"])])),_:1},8,["visible","onClose"])],64)}n(7658);var v=n(6265),y=n.n(v),_=n(6149);n(541);function D(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e}function k(e,t){return Array(t+1).join(e)}function C(e){return e.replace(/^\n*/,"")}function N(e){var t=e.length;while(t>0&&"\n"===e[t-1])t--;return e.substring(0,t)}var A=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function E(e){return x(e,A)}var T=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function M(e){return x(e,T)}function S(e){return j(e,T)}var O=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function R(e){return x(e,O)}function $(e){return j(e,O)}function x(e,t){return t.indexOf(e.nodeName)>=0}function j(e,t){return e.getElementsByTagName&&t.some((function(t){return e.getElementsByTagName(t).length}))}var V={};function P(e){return e?e.replace(/(\n+\s*)+/g,"\n"):""}function B(e){for(var t in this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[],e.rules)this.array.push(e.rules[t])}function I(e,t,n){for(var i=0;i<e.length;i++){var r=e[i];if(F(r,t,n))return r}}function F(e,t,n){var i=e.filter;if("string"===typeof i){if(i===t.nodeName.toLowerCase())return!0}else if(Array.isArray(i)){if(i.indexOf(t.nodeName.toLowerCase())>-1)return!0}else{if("function"!==typeof i)throw new TypeError("`filter` needs to be a string, array, or function");if(i.call(e,t,n))return!0}}function U(e){var t=e.element,n=e.isBlock,i=e.isVoid,r=e.isPre||function(e){return"PRE"===e.nodeName};if(t.firstChild&&!r(t)){var a=null,o=!1,l=null,s=L(l,t,r);while(s!==t){if(3===s.nodeType||4===s.nodeType){var c=s.data.replace(/[ \r\n\t]+/g," ");if(a&&!/ $/.test(a.data)||o||" "!==c[0]||(c=c.substr(1)),!c){s=H(s);continue}s.data=c,a=s}else{if(1!==s.nodeType){s=H(s);continue}n(s)||"BR"===s.nodeName?(a&&(a.data=a.data.replace(/ $/,"")),a=null,o=!1):i(s)||r(s)?(a=null,o=!0):a&&(o=!1)}var d=L(l,s,r);l=s,s=d}a&&(a.data=a.data.replace(/ $/,""),a.data||H(a))}}function H(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function L(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}V.paragraph={filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},V.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+"\n"}},V.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var i=Number(t.nodeName.charAt(1));if("setext"===n.headingStyle&&i<3){var r=k(1===i?"=":"-",e.length);return"\n\n"+e+"\n"+r+"\n\n"}return"\n\n"+k("#",i)+" "+e+"\n\n"}},V.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),"\n\n"+e+"\n\n"}},V.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return"LI"===n.nodeName&&n.lastElementChild===t?"\n"+e:"\n\n"+e+"\n\n"}},V.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var i=n.bulletListMarker+"   ",r=t.parentNode;if("OL"===r.nodeName){var a=r.getAttribute("start"),o=Array.prototype.indexOf.call(r.children,t);i=(a?Number(a)+o:o+1)+".  "}return i+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}},V.indentedCodeBlock={filter:function(e,t){return"indented"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,n){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},V.fencedCodeBlock={filter:function(e,t){return"fenced"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,n){var i,r=t.firstChild.getAttribute("class")||"",a=(r.match(/language-(\S+)/)||[null,""])[1],o=t.firstChild.textContent,l=n.fence.charAt(0),s=3,c=new RegExp("^"+l+"{3,}","gm");while(i=c.exec(o))i[0].length>=s&&(s=i[0].length+1);var d=k(l,s);return"\n\n"+d+a+"\n"+o.replace(/\n$/,"")+"\n"+d+"\n\n"}},V.horizontalRule={filter:"hr",replacement:function(e,t,n){return"\n\n"+n.hr+"\n\n"}},V.inlineLink={filter:function(e,t){return"inlined"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href"),i=P(t.getAttribute("title"));return i&&(i=' "'+i+'"'),"["+e+"]("+n+i+")"}},V.referenceLink={filter:function(e,t){return"referenced"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t,n){var i,r,a=t.getAttribute("href"),o=P(t.getAttribute("title"));switch(o&&(o=' "'+o+'"'),n.linkReferenceStyle){case"collapsed":i="["+e+"][]",r="["+e+"]: "+a+o;break;case"shortcut":i="["+e+"]",r="["+e+"]: "+a+o;break;default:var l=this.references.length+1;i="["+e+"]["+l+"]",r="["+l+"]: "+a+o}return this.references.push(r),i},references:[],append:function(e){var t="";return this.references.length&&(t="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),t}},V.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}},V.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}},V.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n="PRE"===e.parentNode.nodeName&&!t;return"CODE"===e.nodeName&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",i=e.match(/`+/gm)||[];while(-1!==i.indexOf(n))n+="`";return n+t+e+t+n}},V.image={filter:"img",replacement:function(e,t){var n=P(t.getAttribute("alt")),i=t.getAttribute("src")||"",r=P(t.getAttribute("title")),a=r?' "'+r+'"':"";return i?"!["+n+"]("+i+a+")":""}},B.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){return e.isBlank?this.blankRule:(t=I(this.array,e,this.options))||(t=I(this._keep,e,this.options))||(t=I(this._remove,e,this.options))?t:this.defaultRule;var t},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};var W="undefined"!==typeof window?window:{};function z(){var e=W.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(n){}return t}function Z(){var e=function(){};return Y()?e.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:e.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},e}function Y(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){window.ActiveXObject&&(e=!0)}return e}var K,G=z()?W.DOMParser:Z();function q(e,t){var n;if("string"===typeof e){var i=X().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");n=i.getElementById("turndown-root")}else n=e.cloneNode(!0);return U({element:n,isBlock:E,isVoid:M,isPre:t.preformattedCode?Q:null}),n}function X(){return K=K||new G,K}function Q(e){return"PRE"===e.nodeName||"CODE"===e.nodeName}function J(e,t){return e.isBlock=E(e),e.isCode="CODE"===e.nodeName||e.parentNode.isCode,e.isBlank=ee(e),e.flankingWhitespace=te(e,t),e}function ee(e){return!M(e)&&!R(e)&&/^\s*$/i.test(e.textContent)&&!S(e)&&!$(e)}function te(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=ne(e.textContent);return n.leadingAscii&&ie("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&ie("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function ne(e){var t=e.match(/^(([ \t\r\n]*)(\s*))[\s\S]*?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function ie(e,t,n){var i,r,a;return"left"===e?(i=t.previousSibling,r=/ $/):(i=t.nextSibling,r=/^ /),i&&(3===i.nodeType?a=r.test(i.nodeValue):n.preformattedCode&&"CODE"===i.nodeName?a=!1:1!==i.nodeType||E(i)||(a=r.test(i.textContent))),a}var re=Array.prototype.reduce,ae=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function oe(e){if(!(this instanceof oe))return new oe(e);var t={rules:V,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?"\n\n":""},keepReplacement:function(e,t){return t.isBlock?"\n\n"+t.outerHTML+"\n\n":t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?"\n\n"+e+"\n\n":e}};this.options=D({},t,e),this.rules=new B(this.options)}function le(e){var t=this;return re.call(e.childNodes,(function(e,n){n=new J(n,t.options);var i="";return 3===n.nodeType?i=n.isCode?n.nodeValue:t.escape(n.nodeValue):1===n.nodeType&&(i=ce.call(t,n)),de(e,i)}),"")}function se(e){var t=this;return this.rules.forEach((function(n){"function"===typeof n.append&&(e=de(e,n.append(t.options)))})),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function ce(e){var t=this.rules.forNode(e),n=le.call(this,e),i=e.flankingWhitespace;return(i.leading||i.trailing)&&(n=n.trim()),i.leading+t.replacement(n,e,this.options)+i.trailing}function de(e,t){var n=N(e),i=C(t),r=Math.max(e.length-n.length,t.length-i.length),a="\n\n".substring(0,r);return n+a+i}function ue(e){return null!=e&&("string"===typeof e||e.nodeType&&(1===e.nodeType||9===e.nodeType||11===e.nodeType))}oe.prototype={turndown:function(e){if(!ue(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(""===e)return"";var t=le.call(this,new q(e,this.options));return se.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else{if("function"!==typeof e)throw new TypeError("plugin must be a Function or an Array of Functions");e(this)}return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return ae.reduce((function(e,t){return e.replace(t[0],t[1])}),e)}};var pe=oe,me=n(7123);const fe=y().create({withCredentials:!0});var he={components:{QuillEditor:_.Bn},props:{mode:{required:!0,type:String,validator:e=>["new","edit"].includes(e.toLowerCase())},visible:!1,formData:{title:"",text:"",description:"",preview:"",category_name:"",image_list:[],tags_array:new Set,options_object:{},options_array:[]}},data(){return{textMd2:"",textEditMode:"md2",formValid:!1,preview_list:[],options_object:{"Материал":{"Размер 1":2e3,"Размер 2":3e3}},distinct_materials:[],distinct_sizes:[],tempSize:0,tempMaterial:0}},updated(){this.options_object={},this.distinct_materials=[...new Set(this.formData.options_array?.map((({material:e})=>e)))],this.distinct_sizes=[...new Set(this.formData.options_array?.map((({size:e})=>e)))],this.formData.description&&this.$refs.postTextEditor?.setHTML(this.formData.description);for(let{size:e,material:t,price:n}of this.formData.options_array)(t||e||n)&&(this.options_object[t]?this.options_object[t][e]=n:this.options_object[t]={size:n});this.preview_list=this.formData.image_list?.filter((e=>e))?.map((e=>`${this.$store.state.publicPath}/public/pics/${e}`)),document.getElementsByClassName("ql-toolbar")?.[0]?.classList.add("hidden")},async mounted(){this.projects=await this.getProjects(),console.log(this.tags,this.projects)},methods:{addMaterial(e){let t=Object.values(this.options_object)?.[0]??{};console.log(t),t=Object.fromEntries(Object.entries(t)?.map((([e])=>[e,0]))),console.log(t),this.options_object[e]=t,this.distinct_materials.push(e),this.tempMaterial=""},addSize(e){const t=Object.entries(this.options_object)?.map((([t,n])=>[t,Object.assign(n??{},{[e]:0})]));this.options_object=Object.fromEntries(t),this.tempSize="",this.distinct_sizes.push(e)},dropMaterial(e){delete this.options_object[e],this.distinct_materials=this.distinct_materials?.filter((t=>t!==e))},dropSize(e){for(let t in this.options_object)delete this.options_object[t][e];this.distinct_sizes=this.distinct_sizes?.filter((t=>t!==e))},async getProjects(){return await fe.get(this.$store.state.publicPath+"/api/categories/").then((e=>e.data)).catch((e=>{me.Z.$emit("noresponse",e)}))},previewMultiImage(e){var t=e.target,n=t.files.length,i=0;if(this.formData.preview=t.files[0],this.preview_list||(this.preview_list=[]),this.formData.image_list||(this.formData.image_list=[]),t.files)while(n--){var r=new FileReader;r.onload=e=>{this.preview_list.push(e.target.result)},this.formData.image_list.push(t.files[i]),r.readAsDataURL(t.files[i]),i++}},reset(){this.formData.image_list=[],this.preview_list=[]},dropFile(e){this.formData.image_list?.splice(e,1),this.preview_list?.splice(e,1)},addNewPost(){me.Z.$emit("addNewPost")},changeP(e){this.formData.category_name=e.target.value},closeModal(){me.Z.$emit("closeModal")},constractFromData(e){if(!this.formData.title||!this.$refs.postTextEditor.getHTML())throw new Error;var t=new FormData;t.append("title",this.formData.title);const n=new pe;return t.append("description",n.turndown(this.$refs.postTextEditor.getHTML())),this.formData.image_list?.forEach((e=>{t.append("images[]",e)})),this.formData.category_name&&t.append("categoryName",this.formData.category_name),t.append("optionsObject",JSON.stringify(this.options_object)),e&&t.append("id",this.formData.id),t},addNewing(){try{const e=this.constractFromData();fe.post(this.$store.state.publicPath+"/api/admin/items",e,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{me.Z.$emit("postAdded")})).catch((e=>{me.Z.$emit("noresponse",e)}))}catch(e){this.formValid=!0}},editNewing(){try{const e=this.constractFromData(!0);fe.put(this.$store.state.publicPath+"/api/admin/items",e,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{me.Z.$emit("postEdited")})).catch((e=>{me.Z.$emit("noresponse",e)}))}catch(e){console.log(e),this.formValid=!0}}}},ge=n(89);const we=(0,ge.Z)(he,[["render",b],["__scopeId","data-v-1ca7fc1a"]]);var be=we,ve=n(7942);const ye=y().create({withCredentials:!0,credentials:"include"});var _e={components:{AddItemModal:be,Table:ve.Z},props:["tag","project"],data(){return{myApi:ye,formVisible:!1,formData:{},rows:[],dataActions:{"Изменить":{action:this.change,color:"warning"},"Удалить":{action:this.delete,color:"danger"}},tableFieldNames:[{name:"title",title:"Название"},{name:"description",title:"Описание"},{name:"publication_date",title:"Дата добавления"}]}},created(){me.Z.$on("addNewPost",(()=>{this.formMode="new",this.formData={category:this.$route.params.categoryName},this.formVisible=!0})),me.Z.$on("closeModal",(()=>{this.formVisible=!1,this.formData={}})),me.Z.$on("postAdded",(()=>{this.formVisible=!1,this.get(),this.formData={}})),me.Z.$on("postEdited",(()=>{this.formVisible=!1,this.get(),this.formData={}}))},methods:{change(e){this.formVisible=!0,e.tags_array=new Set(e.tags_array),this.formData=e,console.log(e),this.formMode="edit"},get(e,t){return console.log(this.tag),ye.get(this.$store.state.publicPath+"/api/admin/items/",{params:{take:e??10,page:t??1,tagsArray:this.$route.params.tag?[this.$route.params.tag]:void 0,category:this.$route.params.categoryName}}).then((e=>(e.data?.length>0&&(this.rows=e.data),e.data))).catch((e=>(me.Z.$emit("noresponse",e),!1)))},delete(e){const t=confirm("Вы действительно хотите удалить позицию из каталога?");if(t)return ye.delete(this.$store.state.publicPath+"/api/admin/items/",{data:{id:e.id}}).then((()=>{this.get(),me.Z.$emit("postDeleted")})).catch((e=>{me.Z.$emit("noresponse",e)}))}}};const De=(0,ge.Z)(_e,[["render",r]]);var ke=De}}]);
//# sourceMappingURL=295.0a367cd0.js.map