"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[642],{1642:function(t,e,a){a.r(e),a.d(e,{default:function(){return k}});var i=a(3396);function o(t,e,a,o,r,l){const n=(0,i.up)("AddStaticModal"),s=(0,i.up)("Table");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.Wm)(n,{visible:r.formVisible,formData:r.formData,mode:t.formMode},null,8,["visible","formData","mode"]),(0,i.Wm)(s,{fields:r.tableFieldNames,postData:l.getStatic,actions:r.dataActions,rows:r.rows,editMode:"form",name:"Статика"},null,8,["fields","postData","actions","rows"])])}var r=a(9242);const l=["validated"];function n(t,e,a,o,n,s){const d=(0,i.up)("CModalTitle"),c=(0,i.up)("CModalHeader"),m=(0,i.up)("QuillEditor"),u=(0,i.up)("CModalBody"),f=(0,i.up)("CButton"),p=(0,i.up)("CModalFooter"),h=(0,i.up)("CModal");return(0,i.wg)(),(0,i.j4)(h,{size:"xl",backdrop:"static",alignment:"center",visible:a.visible,onClose:s.closeModal},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Uk)("Статические данные")])),_:1})])),_:1}),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i._)("form",{ref:"add-file-form",novalidate:"",validated:n.formValid,onSubmit:e[0]||(e[0]=(0,r.iM)(((...e)=>t.addTag&&t.addTag(...e)),["prevent"])),class:"add-user",style:{display:"'none'"}},[(0,i.Wm)(m,{theme:"snow",toolbar:"essential",ref:"greetingEditor",id:"greetingEditor",placeholder:"Текст приветствия"},null,512),(0,i.Wm)(m,{theme:"snow",toolbar:"essential",ref:"orderEditor",id:"orderEditor",placeholder:"Текст в корзине"},null,512)],40,l)])),_:1}),(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{color:"secondary",onClick:s.closeModal},{default:(0,i.w5)((()=>[(0,i.Uk)(" Отменить ")])),_:1},8,["onClick"]),(0,i.Wm)(f,{color:"primary",onClick:s.editStatic},{default:(0,i.w5)((()=>[(0,i.Uk)("Изменить")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["visible","onClose"])}var s=a(6265),d=a.n(s),c=a(6149),m=a(7123);const u=d().create({withCredentials:!0});var f={components:{QuillEditor:c.Bn},props:{visible:!1,formData:{gitHubLink:"",linkedInLink:"",about:""}},data(){return{formValid:!1}},updated(){this.formValid=!1,this.formData.about&&this.$refs.aboutEditor?.setHTML(this.formData.about)},methods:{closeModal(){m.Z.$emit("closeModal")},constractFromData(){var t=new FormData;return t.append("greeting",this.$refs.greetingEditor.getHTML()),t.append("order",this.$refs.orderEditor.getHTML()),t},editStatic(){try{const t=this.constractFromData();u.put(this.$store.state.publicPath+"/api/admin/statics",t,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{m.Z.$emit("staticEdited")})).catch((t=>{console.log(t),m.Z.$emit("noresponse",t)}))}catch(t){this.formValid=!0}}}},p=a(89);const h=(0,p.Z)(f,[["render",n]]);var b=h,g=a(7942);const w=d().create({withCredentials:!0});var v={name:"Static",components:{AddStaticModal:b,Table:g.Z},data(){return{myApi:w,formVisible:!1,formData:{},rows:[],dataActions:{"Изменить":{action:this.changeUser,color:"warning"}},tableFieldNames:[{name:"gitHubLink",title:"Git"},{name:"linkedInLink",title:"LinkedIn"},{name:"about",title:"Обо мне"}]}},created(){m.Z.$on("closeModal",(()=>{this.formVisible=!1,this.formData={}})),m.Z.$on("staticEdited",(()=>{this.formVisible=!1,this.get(),this.formData={}}))},methods:{changeUser(t){this.formVisible=!0,this.formData=t},getStatic(t,e){return!(e>1)&&w.get(this.$store.state.publicPath+"/api/admin/statics/",{perPage:t??0,page:e??0}).then((t=>(this.rows=t.data,t.data))).catch((t=>{m.Z.$emit("noresponse",t)}))}}};const _=(0,p.Z)(v,[["render",o]]);var k=_}}]);
//# sourceMappingURL=642.0435e6ac.js.map