{"version":3,"file":"js/877.39966369.js","mappings":"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CtC8V,EAAMpF,IAAIuI,UAAUjT,KAAK8e,GAAc,CAAE3lB,MAAOA,EAAO6B,MAAO,GAC9D8U,EAAMpF,IAAIuI,UAAUwH,KAAK,IAAMthB,GAAS2lB,GAExCA,EAAahP,EAAMpF,IAAIuI,UAAUwH,KAAK,IAAMthB,GAG9C6lB,EAAgBlP,EAAMpF,IAAIuI,UAAUjT,KAAK8e,GAAY9jB,MACrD8U,EAAMpF,IAAIuI,UAAUjT,KAAK8e,GAAY9jB,QAErC8U,EAAMrS,KAAK,CACTxE,KAAM,eACNb,GAAI0mB,EACJhQ,MAAOkQ,EACPhP,MAAOF,EAAME,SAIjBF,EAAMS,IAAMA,EACZT,EAAMU,OAASjJ,GACR,IACT,CAKA,IAAI0X,GAAc,CAChB,OACA,MACA,aACA,MACA,OACA,QACA,OACA,MACA,MACA,OACA,OACA,MACA,OACA,MACA,OACA,MACA,MACA,KACA,SACA,OACA,OACA,QACA,MACA,OACA,KACA,OACA,OACA,MACA,OACA,YACA,WACA,YACA,WACA,OACA,SACA,MACA,OACA,QACA,OACA,UACA,OACA,MACA,KACA,MACA,OACA,kBACA,MACA,OACA,OACA,UACA,UACA,QACA,QACA,MACA,OACA,MACA,OACA,YACA,aACA,MACA,MACA,SACA,OACA,cACA,SACA,MACA,KACA,MACA,QACA,KACA,MACA,OACA,cACA,cACA,eACA,OACA,UACA,UACA,YACA,MACA,MACA,MACA,MACA,aACA,KACA,UACA,UACA,OACA,SACA,SACA,mBACA,0BACA,UACA,MACA,kBACA,qBACA,MACA,MACA,OACA,WACA,OACA,SACA,OACA,KACA,MACA,eACA,QACA,MACA,OACA,MACA,MACA,OACA,OACA,OACA,MACA,MACA,UACA,SACA,QACA,SACA,OACA,SACA,UACA,MACA,UACA,QACA,SACA,MACA,QACA,MACA,OACA,YACA,WACA,QACA,OACA,QACA,MACA,WACA,MACA,QACA,OACA,aACA,OACA,MACA,QACA,MACA,SACA,UACA,MACA,QACA,MACA,YACA,SACA,MACA,SACA,SACA,WACA,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","sources":["webpack://@coreui/coreui-free-vue-admin-template/./src/views/Items.vue","webpack://@coreui/coreui-free-vue-admin-template/./src/components/AddItemModal.vue","webpack://@coreui/coreui-free-vue-admin-template/./node_modules/turndown/lib/turndown.browser.es.js","webpack://@coreui/coreui-free-vue-admin-template/./node_modules/remarkable/dist/esm/index.browser.js","webpack://@coreui/coreui-free-vue-admin-template/./src/components/AddItemModal.vue?860e","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Items.vue?bb6c"],"sourcesContent":["<template>\r\n  <div>\r\n    <AddItemModal :visible=\"formVisible\" :formData=\"formData\" :mode=\"formMode\" />\r\n    <Table :fields=\"tableFieldNames\" :postData=\"get\" :actions=\"dataActions\" :rows=\"rows\" editMode=\"form\" name=\"Позиции\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AddItemModal from '@/components/AddItemModal.vue'\r\nimport Table from '@/components/Table.vue'\r\nimport eventBus from '../eventBus'\r\n\r\nimport axios from 'axios'\r\nconst myApi = axios.create({\r\n  withCredentials: true,\r\n  credentials: 'include'\r\n\r\n})\r\n\r\nexport default {\r\n  components: {\r\n    AddItemModal,\r\n    Table,\r\n  },\r\n  props: ['tag', 'project'],\r\n  data() {\r\n    return {\r\n      myApi: myApi,\r\n      formVisible: false,\r\n      formData: {},\r\n      rows: [],\r\n      dataActions: {\r\n        Дублировать: { action: this.duble, color: 'primary' },\r\n        Изменить: { action: this.change, color: 'warning' },\r\n        Удалить: { action: this.delete, color: 'danger' },\r\n      },\r\n      tableFieldNames: [\r\n        {\r\n          name: 'title',\r\n          title: 'Название',\r\n        },\r\n        {\r\n          name: 'description',\r\n          title: 'Описание',\r\n        },\r\n        {\r\n          name: 'publication_date',\r\n          title: 'Дата добавления',\r\n        },\r\n      ],\r\n    }\r\n  },\r\n  created() {\r\n    eventBus.$on('addNewPost', () => {\r\n      this.formMode = 'new'\r\n      this.formData = {\r\n        category: this.$route.params.categoryName,\r\n      }\r\n      this.formVisible = true\r\n    })\r\n    eventBus.$on('closeModal', () => {\r\n      this.formVisible = false\r\n      this.formData = {}\r\n    })\r\n    eventBus.$on('postAdded', () => {\r\n      this.formVisible = false\r\n      //this.rows.unshift(this.formData)\r\n      this.get()\r\n      this.formData = {}\r\n    })\r\n    eventBus.$on('postEdited', () => {\r\n      this.formVisible = false\r\n      this.get()\r\n      this.formData = {}\r\n    })\r\n  },\r\n  methods: {\r\n    change(elObj) {\r\n      this.formVisible = true\r\n      elObj.tags_array = new Set(elObj.tags_array)\r\n      this.formData = elObj\r\n      console.log(elObj)\r\n      this.formMode = 'edit'\r\n    },\r\n    constractFromData(elObj) {\r\n      var formData = new FormData()\r\n\r\n      formData.append('title', elObj.title)\r\n      formData.append('description', elObj.description)\r\n      elObj.image_list?.forEach(v => {\r\n        formData.append('images[]', v);\r\n      });\r\n      elObj.category_name &&\r\n        formData.append('categoryName', elObj.category_name)\r\n\r\n      const options_object = {}\r\n\r\n      for (let { size, material, price } of elObj.options_array) {\r\n        if (!material && !size && !price) continue;\r\n        options_object[material] ? options_object[material][size] = price : options_object[material] = { size: price }\r\n      }\r\n      formData.append('optionsObject', JSON.stringify(options_object))\r\n\r\n      return formData\r\n    },\r\n    duble(elObj) {\r\n      try {\r\n        const formData = this.constractFromData(elObj)\r\n\r\n        myApi\r\n          .post(this.$store.state.publicPath + '/api/admin/items', formData, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data',\r\n            },\r\n          })\r\n          .then(() => {\r\n            eventBus.$emit('postAdded')\r\n          })\r\n          .catch((e) => {\r\n            eventBus.$emit('noresponse', e)\r\n          })\r\n      } catch (e) {\r\n        this.formValid = true\r\n      }\r\n    },\r\n    get(take, page) {\r\n      console.log(this.tag)\r\n      return myApi\r\n        .get(this.$store.state.publicPath + '/api/admin/items/', {\r\n          params: {\r\n            take: take ?? 10,\r\n            page: page ?? 1,\r\n            tagsArray: this.$route.params.tag\r\n              ? [this.$route.params.tag]\r\n              : undefined,\r\n            category: this.$route.params.categoryName,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          if (res.data?.length > 0) this.rows = res.data\r\n          return res.data\r\n        })\r\n        .catch((error) => {\r\n          eventBus.$emit('noresponse', error)\r\n          return false\r\n        })\r\n    },\r\n    delete(item) {\r\n      const result = confirm('Вы действительно хотите удалить позицию из каталога?')\r\n      if (result)\r\n        return myApi\r\n          .delete(this.$store.state.publicPath + '/api/admin/items/', {\r\n            data: { id: item.id },\r\n          })\r\n          .then(() => {\r\n            this.get()\r\n            eventBus.$emit('postDeleted')\r\n          })\r\n          .catch((error) => {\r\n            eventBus.$emit('noresponse', error)\r\n          })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\nbutton {\r\n  margin-bottom: 20px;\r\n}\r\n</style>\r\n","<template>\r\n  <CButton color=\"primary\" @click=\"addNewPost\">Добавить товар</CButton>\r\n  <CModal size=\"xl\" backdrop=\"static\" alignment=\"center\" :visible=\"visible\" @close=\"closeModal\">\r\n    <CForm novalidate :validated=\"formValid\" ref=\"add-file-form\" @change=\"wregert\"\r\n      @submit.prevent=\"mode === 'new' ? addNewing() : editNewing()\" class=\"add-user\" style=\"display: 'none'\">\r\n      <CModalHeader>\r\n        <CModalTitle>{{\r\n          mode === 'new' ? 'Добавить товар' : 'Редактировать товар'\r\n        }}</CModalTitle>\r\n      </CModalHeader>\r\n      <CModalBody>\r\n        <CFormInput class=\"mb-3\" v-model=\"formData.title\" placeholder=\"Заголовок\" id=\"inputHeader\"\r\n          aria-describedby=\"inputGroupPrepend\" feedbackValid=\"Все ок\" feedbackInvalid=\"Введите корректный заголовок\"\r\n          required />\r\n        <div class=\"projects-list\">\r\n          <span>Категория</span>\r\n          <CFormCheck v-for=\"project in projects\" :key=\"project.name\" :id=\"project.name\"\r\n            :checked=\"project.name === formData.category_name\" @change=\"changeP\" type=\"radio\" name=\"project-name\"\r\n            :value=\"project.name\" :label=\"project.name\" />\r\n          <CFormCheck id=\"null-name\" :checked=\"!formData.category_name\" @change=\"changeP\" type=\"radio\" name=\"project-name\"\r\n            value=\"\" label=\"Без категорий\" />\r\n        </div>\r\n\r\n        <div class=\"options-shedle\">\r\n          <span>Опции</span>\r\n          <table class=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <td>Размер<br />\r\n                  Материал</td>\r\n                <td v-for=\"sizeName in distinct_sizes\" :key=\"'sizeh-' + sizeName\">\r\n                  {{ sizeName }}\r\n                  <CButton color=\"secondary\" @click=\"dropSize(sizeName)\">X</CButton>\r\n                </td>\r\n                <td>\r\n                  <CInputGroup class=\"\">\r\n                    <CFormInput placeholder=\"Новый размер\" type=\"text\" v-model=\"tempSize\" />\r\n                    <CButton class=\"add-button\" type=\"button\" color=\"secondary\" @click=\"addSize(tempSize)\"\r\n                      variant=\"outline\">Добавить</CButton>\r\n                  </CInputGroup>\r\n                </td>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr v-for=\"materialName in distinct_materials\" :key=\"'material-' + materialName\">\r\n                <td>\r\n                  {{ materialName }}\r\n                  <CButton color=\"secondary\" @click=\"dropMaterial(materialName)\">X</CButton>\r\n                </td>\r\n                <td v-for=\"sizeName in distinct_sizes\" :key=\"'size-' + sizeName\">\r\n                  <CFormInput type=\"text\" v-model=\"options_object[materialName][sizeName]\" />\r\n                </td>\r\n                <td>\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td>\r\n                  <CInputGroup class=\"\">\r\n                    <CFormInput placeholder=\"Новый материал\" type=\"text\" v-model=\"tempMaterial\" />\r\n                    <CButton class=\"add-button\" type=\"button\" color=\"secondary\" @click=\"addMaterial(tempMaterial)\"\r\n                      variant=\"outline\">Добавить\r\n                    </CButton>\r\n                  </CInputGroup>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <CFormInput type=\"file\" accept=\"image/*\" multiple=\"multiple\" ref=\"file\" @change=\"previewMultiImage\" class=\"mb-3\"\r\n          label=\"Превью\" placeholder=\"Превью\" />\r\n        <div class=\"border p-2 mt-3 preview-container\">\r\n          <template v-if=\"preview_list?.length\">\r\n            <div v-for=\"item, index in preview_list\" :key=\"index\">\r\n              <img :src=\"item\" class=\"img-fluid\" />\r\n              <button @click.prevent=\"dropFile(index)\">Х</button>\r\n            </div>\r\n          </template>\r\n        </div>\r\n        <QuillEditor theme=\"snow\" toolbar=\"essential\" ref=\"postTextEditor\" id=\"postTextEditor\"\r\n          placeholder=\"Краткое описание\" />\r\n      </CModalBody>\r\n      <CModalFooter>\r\n        <CButton color=\"secondary\" @click=\"closeModal\"> Отменить </CButton>\r\n        <CButton v-show=\"mode === 'new'\" color=\"primary\" type=\"submit\">Добавить</CButton>\r\n        <CButton v-show=\"mode === 'edit'\" color=\"primary\" type=\"submit\">Редактировать</CButton>\r\n      </CModalFooter>\r\n    </CForm>\r\n  </CModal>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nconst myApi = axios.create({\r\n  withCredentials: true,\r\n})\r\nimport { QuillEditor } from '@vueup/vue-quill'\r\nimport '@vueup/vue-quill/dist/vue-quill.snow.css'\r\nimport TurndownService from 'turndown'\r\n//import { marked } from 'marked'\r\nimport { Remarkable } from 'remarkable';\r\n//import * as DOMPurify from 'dompurify'\r\nimport eventBus from '../eventBus'\r\n\r\nexport default {\r\n  components: { QuillEditor },\r\n  props: {\r\n    mode: {\r\n      required: true,\r\n      type: String,\r\n      validator: (value) => ['new', 'edit'].includes(value.toLowerCase()),\r\n    },\r\n    visible: false,\r\n    formData: {\r\n      title: '',\r\n      text: '',\r\n      description: '',\r\n      preview: '',\r\n      category_name: '',\r\n      image_list: [],\r\n      tags_array: new Set(),\r\n      options_object: {},\r\n      options_array: [],\r\n    },\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      textMd2: '',\r\n      textEditMode: 'md2',\r\n      formValid: false,\r\n      preview_list: [],\r\n      options_object: {\r\n        \"Материал\": {\r\n          \"Размер 1\": 2000,\r\n          \"Размер 2\": 3000\r\n        }\r\n      },\r\n      distinct_materials: [],\r\n      distinct_sizes: [],\r\n      tempSize: 0,\r\n      tempMaterial: 0,\r\n    }\r\n  },\r\n  updated() {\r\n    this.options_object = {};\r\n    this.formData.options_array = this.formData.options_array?.\r\n      filter(({ material, price, size }) => !material && !size && !price ? false : true)\r\n    this.distinct_materials = [...new Set(this.formData.options_array?.map(({ material }) => material))]\r\n    this.distinct_sizes = [...new Set(this.formData.options_array?.map(({ size }) => size))]\r\n    const md = new Remarkable({\r\n      html: true,\r\n      xhtmlOut: false,\r\n      breaks: false,\r\n    });\r\n    this.formData.description && this.$refs.postTextEditor.setHTML(\r\n      md.render(this.formData.description?.replaceAll(\"\\r\\n\\r\\n\", \"<br/>\")))\r\n\r\n\r\n    for (let { size, material, price } of this.formData.options_array) {\r\n      this.options_object[material] ? this.options_object[material][size] = price :\r\n        this.options_object[material] = { [size]: price }\r\n    }\r\n\r\n    console.log(this.options_object)\r\n\r\n\r\n    this.preview_list = this.formData.image_list?.filter(el => el)?.map(preview_name => `${this.$store.state.publicPath}/public/pics/${preview_name}`)\r\n\r\n    document.getElementsByClassName('ql-toolbar')?.[0]?.classList.add('hidden')\r\n  },\r\n  async mounted() {\r\n    this.projects = await this.getProjects()\r\n    console.log(this.tags, this.projects)\r\n  },\r\n  methods: {\r\n    addMaterial(name) {\r\n      let size_template = Object.values(this.options_object)?.[0] ?? {}\r\n      console.log(size_template)\r\n      size_template = Object.fromEntries(Object.entries(size_template)?.map(([key]) => [key, 0]))\r\n      console.log(size_template)\r\n\r\n      this.options_object[name] = size_template\r\n\r\n      this.distinct_materials.push(name)\r\n\r\n      this.tempMaterial = \"\"\r\n    },\r\n    addSize(name) {\r\n      const new_oo_entries = Object.entries(this.options_object)?.map(([key, value]) => [key, Object.assign(value ?? {}, { [name]: 0 })])\r\n      this.options_object = Object.fromEntries(new_oo_entries)\r\n      this.tempSize = \"\"\r\n      this.distinct_sizes.push(name)\r\n\r\n    },\r\n    dropMaterial(name) {\r\n      delete this.options_object[name]\r\n      this.distinct_materials = this.distinct_materials?.filter(el => el !== name)\r\n\r\n    },\r\n    dropSize(name) {\r\n      for (let key in this.options_object) {\r\n        delete this.options_object[key][name]\r\n      }\r\n      this.distinct_sizes = this.distinct_sizes?.filter(el => el !== name)\r\n    },\r\n    async getProjects() {\r\n      return await myApi\r\n        .get(this.$store.state.publicPath + '/api/categories/')\r\n        .then((res) => {\r\n          return res.data\r\n        })\r\n        .catch((error) => {\r\n          eventBus.$emit('noresponse', error)\r\n        })\r\n    },\r\n    previewMultiImage(event) {\r\n      var input = event.target;\r\n      var count = input.files.length;\r\n      var index = 0;\r\n      this.formData.preview = input.files[0]\r\n      if (!this.preview_list) this.preview_list = []\r\n      if (!this.formData.image_list) this.formData.image_list = []\r\n\r\n      if (input.files) {\r\n        while (count--) {\r\n          var reader = new FileReader();\r\n          reader.onload = (e) => {\r\n            this.preview_list.push(e.target.result);\r\n          }\r\n          this.formData.image_list.push(input.files[index]);\r\n          reader.readAsDataURL(input.files[index]);\r\n          index++;\r\n        }\r\n      }\r\n    },\r\n    reset() {\r\n      this.formData.image_list = [];\r\n      this.preview_list = [];\r\n    },\r\n    dropFile(index) {\r\n      this.formData.image_list?.splice(index, 1);\r\n      this.preview_list?.splice(index, 1);\r\n\r\n    },\r\n    addNewPost() {\r\n      eventBus.$emit('addNewPost')\r\n    },\r\n    changeP(e) {\r\n      this.formData.category_name = e.target.value\r\n    },\r\n    closeModal() {\r\n      eventBus.$emit('closeModal')\r\n    },\r\n    constractFromData(isEdit) {\r\n      if (!this.formData.title || !this.$refs.postTextEditor.getHTML())\r\n        throw new Error()\r\n\r\n      var formData = new FormData()\r\n\r\n      formData.append('title', this.formData.title)\r\n\r\n      const turndownService = new TurndownService({\r\n        bulletListMarker: \"-\",\r\n        fence: \"~~~\",\r\n        emDelimiter: \"*\",\r\n\r\n      })\r\n      formData.append(\r\n        'description',\r\n        turndownService.turndown(this.$refs.postTextEditor.getHTML()),\r\n      )\r\n\r\n      this.formData.image_list?.forEach(v => {\r\n        formData.append('images[]', v);\r\n      });\r\n\r\n      this.formData.category_name &&\r\n        formData.append('categoryName', this.formData.category_name)\r\n\r\n\r\n      formData.append('optionsObject', JSON.stringify(this.options_object))\r\n\r\n      isEdit && formData.append('id', this.formData.id)\r\n\r\n      return formData\r\n    },\r\n    addNewing() {\r\n      try {\r\n        const formData = this.constractFromData()\r\n\r\n        myApi\r\n          .post(this.$store.state.publicPath + '/api/admin/items', formData, {\r\n            headers: {\r\n              'Content-Type': 'multipart/form-data',\r\n            },\r\n          })\r\n          .then(() => {\r\n            eventBus.$emit('postAdded')\r\n          })\r\n          .catch((e) => {\r\n            eventBus.$emit('noresponse', e)\r\n          })\r\n      } catch (e) {\r\n        this.formValid = true\r\n        //eventBus.$emit('wrongInputData', e)\r\n      }\r\n    },\r\n    editNewing() {\r\n      try {\r\n        const formData = this.constractFromData(true)\r\n\r\n        myApi\r\n          .put(this.$store.state.publicPath + '/api/admin/items', formData, {\r\n            headers: {\r\n              'Content-Type': `multipart/form-data`,\r\n\r\n            },\r\n          })\r\n          .then(() => {\r\n            eventBus.$emit('postEdited')\r\n          })\r\n          .catch((e) => {\r\n            eventBus.$emit('noresponse', e)\r\n          })\r\n      } catch (e) {\r\n        console.log(e)\r\n        this.formValid = true\r\n        //eventBus.$emit('wrongInputData', e)\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n::v-deep .hidden {\r\n  display: none;\r\n}\r\n\r\n::v-deep .ql-toolbar.ql-snow {\r\n  display: block !important;\r\n}\r\n\r\n.table {\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #dddddd;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.table th {\r\n  font-weight: bold;\r\n  padding: 5px;\r\n  background: #efefef;\r\n  border: 1px solid #dddddd;\r\n}\r\n\r\n.table td {\r\n  border: 1px solid #dddddd;\r\n  padding: 5px;\r\n  position: relative;\r\n\r\n  .btn.btn-secondary {\r\n    position: absolute;\r\n    top: 5px;\r\n    right: 5px;\r\n  }\r\n}\r\n\r\n.add-button {\r\n  margin: 0;\r\n}\r\n\r\n.preview-container {\r\n  display: flex;\r\n  gap: 5px;\r\n  flex-wrap: wrap;\r\n\r\n  &>div {\r\n    max-width: 24%;\r\n    position: relative;\r\n\r\n    button {\r\n      position: absolute;\r\n      top: 5px;\r\n      right: 5px;\r\n    }\r\n  }\r\n}\r\n\r\n.tags-cloud,\r\n.projects-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n\r\n  &>* {\r\n    margin-right: 20px;\r\n  }\r\n\r\n  &>span {\r\n    flex: 0 0 100%;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>\r\n","function extend (destination) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) destination[key] = source[key];\n    }\n  }\n  return destination\n}\n\nfunction repeat (character, count) {\n  return Array(count + 1).join(character)\n}\n\nfunction trimLeadingNewlines (string) {\n  return string.replace(/^\\n*/, '')\n}\n\nfunction trimTrailingNewlines (string) {\n  // avoid match-at-end regexp bottleneck, see #370\n  var indexEnd = string.length;\n  while (indexEnd > 0 && string[indexEnd - 1] === '\\n') indexEnd--;\n  return string.substring(0, indexEnd)\n}\n\nvar blockElements = [\n  'ADDRESS', 'ARTICLE', 'ASIDE', 'AUDIO', 'BLOCKQUOTE', 'BODY', 'CANVAS',\n  'CENTER', 'DD', 'DIR', 'DIV', 'DL', 'DT', 'FIELDSET', 'FIGCAPTION', 'FIGURE',\n  'FOOTER', 'FORM', 'FRAMESET', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'HEADER',\n  'HGROUP', 'HR', 'HTML', 'ISINDEX', 'LI', 'MAIN', 'MENU', 'NAV', 'NOFRAMES',\n  'NOSCRIPT', 'OL', 'OUTPUT', 'P', 'PRE', 'SECTION', 'TABLE', 'TBODY', 'TD',\n  'TFOOT', 'TH', 'THEAD', 'TR', 'UL'\n];\n\nfunction isBlock (node) {\n  return is(node, blockElements)\n}\n\nvar voidElements = [\n  'AREA', 'BASE', 'BR', 'COL', 'COMMAND', 'EMBED', 'HR', 'IMG', 'INPUT',\n  'KEYGEN', 'LINK', 'META', 'PARAM', 'SOURCE', 'TRACK', 'WBR'\n];\n\nfunction isVoid (node) {\n  return is(node, voidElements)\n}\n\nfunction hasVoid (node) {\n  return has(node, voidElements)\n}\n\nvar meaningfulWhenBlankElements = [\n  'A', 'TABLE', 'THEAD', 'TBODY', 'TFOOT', 'TH', 'TD', 'IFRAME', 'SCRIPT',\n  'AUDIO', 'VIDEO'\n];\n\nfunction isMeaningfulWhenBlank (node) {\n  return is(node, meaningfulWhenBlankElements)\n}\n\nfunction hasMeaningfulWhenBlank (node) {\n  return has(node, meaningfulWhenBlankElements)\n}\n\nfunction is (node, tagNames) {\n  return tagNames.indexOf(node.nodeName) >= 0\n}\n\nfunction has (node, tagNames) {\n  return (\n    node.getElementsByTagName &&\n    tagNames.some(function (tagName) {\n      return node.getElementsByTagName(tagName).length\n    })\n  )\n}\n\nvar rules = {};\n\nrules.paragraph = {\n  filter: 'p',\n\n  replacement: function (content) {\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.lineBreak = {\n  filter: 'br',\n\n  replacement: function (content, node, options) {\n    return options.br + '\\n'\n  }\n};\n\nrules.heading = {\n  filter: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n\n  replacement: function (content, node, options) {\n    var hLevel = Number(node.nodeName.charAt(1));\n\n    if (options.headingStyle === 'setext' && hLevel < 3) {\n      var underline = repeat((hLevel === 1 ? '=' : '-'), content.length);\n      return (\n        '\\n\\n' + content + '\\n' + underline + '\\n\\n'\n      )\n    } else {\n      return '\\n\\n' + repeat('#', hLevel) + ' ' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.blockquote = {\n  filter: 'blockquote',\n\n  replacement: function (content) {\n    content = content.replace(/^\\n+|\\n+$/g, '');\n    content = content.replace(/^/gm, '> ');\n    return '\\n\\n' + content + '\\n\\n'\n  }\n};\n\nrules.list = {\n  filter: ['ul', 'ol'],\n\n  replacement: function (content, node) {\n    var parent = node.parentNode;\n    if (parent.nodeName === 'LI' && parent.lastElementChild === node) {\n      return '\\n' + content\n    } else {\n      return '\\n\\n' + content + '\\n\\n'\n    }\n  }\n};\n\nrules.listItem = {\n  filter: 'li',\n\n  replacement: function (content, node, options) {\n    content = content\n      .replace(/^\\n+/, '') // remove leading newlines\n      .replace(/\\n+$/, '\\n') // replace trailing newlines with just a single one\n      .replace(/\\n/gm, '\\n    '); // indent\n    var prefix = options.bulletListMarker + '   ';\n    var parent = node.parentNode;\n    if (parent.nodeName === 'OL') {\n      var start = parent.getAttribute('start');\n      var index = Array.prototype.indexOf.call(parent.children, node);\n      prefix = (start ? Number(start) + index : index + 1) + '.  ';\n    }\n    return (\n      prefix + content + (node.nextSibling && !/\\n$/.test(content) ? '\\n' : '')\n    )\n  }\n};\n\nrules.indentedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'indented' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    return (\n      '\\n\\n    ' +\n      node.firstChild.textContent.replace(/\\n/g, '\\n    ') +\n      '\\n\\n'\n    )\n  }\n};\n\nrules.fencedCodeBlock = {\n  filter: function (node, options) {\n    return (\n      options.codeBlockStyle === 'fenced' &&\n      node.nodeName === 'PRE' &&\n      node.firstChild &&\n      node.firstChild.nodeName === 'CODE'\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var className = node.firstChild.getAttribute('class') || '';\n    var language = (className.match(/language-(\\S+)/) || [null, ''])[1];\n    var code = node.firstChild.textContent;\n\n    var fenceChar = options.fence.charAt(0);\n    var fenceSize = 3;\n    var fenceInCodeRegex = new RegExp('^' + fenceChar + '{3,}', 'gm');\n\n    var match;\n    while ((match = fenceInCodeRegex.exec(code))) {\n      if (match[0].length >= fenceSize) {\n        fenceSize = match[0].length + 1;\n      }\n    }\n\n    var fence = repeat(fenceChar, fenceSize);\n\n    return (\n      '\\n\\n' + fence + language + '\\n' +\n      code.replace(/\\n$/, '') +\n      '\\n' + fence + '\\n\\n'\n    )\n  }\n};\n\nrules.horizontalRule = {\n  filter: 'hr',\n\n  replacement: function (content, node, options) {\n    return '\\n\\n' + options.hr + '\\n\\n'\n  }\n};\n\nrules.inlineLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'inlined' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node) {\n    var href = node.getAttribute('href');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title + '\"';\n    return '[' + content + '](' + href + title + ')'\n  }\n};\n\nrules.referenceLink = {\n  filter: function (node, options) {\n    return (\n      options.linkStyle === 'referenced' &&\n      node.nodeName === 'A' &&\n      node.getAttribute('href')\n    )\n  },\n\n  replacement: function (content, node, options) {\n    var href = node.getAttribute('href');\n    var title = cleanAttribute(node.getAttribute('title'));\n    if (title) title = ' \"' + title + '\"';\n    var replacement;\n    var reference;\n\n    switch (options.linkReferenceStyle) {\n      case 'collapsed':\n        replacement = '[' + content + '][]';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      case 'shortcut':\n        replacement = '[' + content + ']';\n        reference = '[' + content + ']: ' + href + title;\n        break\n      default:\n        var id = this.references.length + 1;\n        replacement = '[' + content + '][' + id + ']';\n        reference = '[' + id + ']: ' + href + title;\n    }\n\n    this.references.push(reference);\n    return replacement\n  },\n\n  references: [],\n\n  append: function (options) {\n    var references = '';\n    if (this.references.length) {\n      references = '\\n\\n' + this.references.join('\\n') + '\\n\\n';\n      this.references = []; // Reset references\n    }\n    return references\n  }\n};\n\nrules.emphasis = {\n  filter: ['em', 'i'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.emDelimiter + content + options.emDelimiter\n  }\n};\n\nrules.strong = {\n  filter: ['strong', 'b'],\n\n  replacement: function (content, node, options) {\n    if (!content.trim()) return ''\n    return options.strongDelimiter + content + options.strongDelimiter\n  }\n};\n\nrules.code = {\n  filter: function (node) {\n    var hasSiblings = node.previousSibling || node.nextSibling;\n    var isCodeBlock = node.parentNode.nodeName === 'PRE' && !hasSiblings;\n\n    return node.nodeName === 'CODE' && !isCodeBlock\n  },\n\n  replacement: function (content) {\n    if (!content) return ''\n    content = content.replace(/\\r?\\n|\\r/g, ' ');\n\n    var extraSpace = /^`|^ .*?[^ ].* $|`$/.test(content) ? ' ' : '';\n    var delimiter = '`';\n    var matches = content.match(/`+/gm) || [];\n    while (matches.indexOf(delimiter) !== -1) delimiter = delimiter + '`';\n\n    return delimiter + extraSpace + content + extraSpace + delimiter\n  }\n};\n\nrules.image = {\n  filter: 'img',\n\n  replacement: function (content, node) {\n    var alt = cleanAttribute(node.getAttribute('alt'));\n    var src = node.getAttribute('src') || '';\n    var title = cleanAttribute(node.getAttribute('title'));\n    var titlePart = title ? ' \"' + title + '\"' : '';\n    return src ? '![' + alt + ']' + '(' + src + titlePart + ')' : ''\n  }\n};\n\nfunction cleanAttribute (attribute) {\n  return attribute ? attribute.replace(/(\\n+\\s*)+/g, '\\n') : ''\n}\n\n/**\n * Manages a collection of rules used to convert HTML to Markdown\n */\n\nfunction Rules (options) {\n  this.options = options;\n  this._keep = [];\n  this._remove = [];\n\n  this.blankRule = {\n    replacement: options.blankReplacement\n  };\n\n  this.keepReplacement = options.keepReplacement;\n\n  this.defaultRule = {\n    replacement: options.defaultReplacement\n  };\n\n  this.array = [];\n  for (var key in options.rules) this.array.push(options.rules[key]);\n}\n\nRules.prototype = {\n  add: function (key, rule) {\n    this.array.unshift(rule);\n  },\n\n  keep: function (filter) {\n    this._keep.unshift({\n      filter: filter,\n      replacement: this.keepReplacement\n    });\n  },\n\n  remove: function (filter) {\n    this._remove.unshift({\n      filter: filter,\n      replacement: function () {\n        return ''\n      }\n    });\n  },\n\n  forNode: function (node) {\n    if (node.isBlank) return this.blankRule\n    var rule;\n\n    if ((rule = findRule(this.array, node, this.options))) return rule\n    if ((rule = findRule(this._keep, node, this.options))) return rule\n    if ((rule = findRule(this._remove, node, this.options))) return rule\n\n    return this.defaultRule\n  },\n\n  forEach: function (fn) {\n    for (var i = 0; i < this.array.length; i++) fn(this.array[i], i);\n  }\n};\n\nfunction findRule (rules, node, options) {\n  for (var i = 0; i < rules.length; i++) {\n    var rule = rules[i];\n    if (filterValue(rule, node, options)) return rule\n  }\n  return void 0\n}\n\nfunction filterValue (rule, node, options) {\n  var filter = rule.filter;\n  if (typeof filter === 'string') {\n    if (filter === node.nodeName.toLowerCase()) return true\n  } else if (Array.isArray(filter)) {\n    if (filter.indexOf(node.nodeName.toLowerCase()) > -1) return true\n  } else if (typeof filter === 'function') {\n    if (filter.call(rule, node, options)) return true\n  } else {\n    throw new TypeError('`filter` needs to be a string, array, or function')\n  }\n}\n\n/**\n * The collapseWhitespace function is adapted from collapse-whitespace\n * by Luc Thevenard.\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2014 Luc Thevenard <lucthevenard@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * collapseWhitespace(options) removes extraneous whitespace from an the given element.\n *\n * @param {Object} options\n */\nfunction collapseWhitespace (options) {\n  var element = options.element;\n  var isBlock = options.isBlock;\n  var isVoid = options.isVoid;\n  var isPre = options.isPre || function (node) {\n    return node.nodeName === 'PRE'\n  };\n\n  if (!element.firstChild || isPre(element)) return\n\n  var prevText = null;\n  var keepLeadingWs = false;\n\n  var prev = null;\n  var node = next(prev, element, isPre);\n\n  while (node !== element) {\n    if (node.nodeType === 3 || node.nodeType === 4) { // Node.TEXT_NODE or Node.CDATA_SECTION_NODE\n      var text = node.data.replace(/[ \\r\\n\\t]+/g, ' ');\n\n      if ((!prevText || / $/.test(prevText.data)) &&\n          !keepLeadingWs && text[0] === ' ') {\n        text = text.substr(1);\n      }\n\n      // `text` might be empty at this point.\n      if (!text) {\n        node = remove(node);\n        continue\n      }\n\n      node.data = text;\n\n      prevText = node;\n    } else if (node.nodeType === 1) { // Node.ELEMENT_NODE\n      if (isBlock(node) || node.nodeName === 'BR') {\n        if (prevText) {\n          prevText.data = prevText.data.replace(/ $/, '');\n        }\n\n        prevText = null;\n        keepLeadingWs = false;\n      } else if (isVoid(node) || isPre(node)) {\n        // Avoid trimming space around non-block, non-BR void elements and inline PRE.\n        prevText = null;\n        keepLeadingWs = true;\n      } else if (prevText) {\n        // Drop protection if set previously.\n        keepLeadingWs = false;\n      }\n    } else {\n      node = remove(node);\n      continue\n    }\n\n    var nextNode = next(prev, node, isPre);\n    prev = node;\n    node = nextNode;\n  }\n\n  if (prevText) {\n    prevText.data = prevText.data.replace(/ $/, '');\n    if (!prevText.data) {\n      remove(prevText);\n    }\n  }\n}\n\n/**\n * remove(node) removes the given node from the DOM and returns the\n * next node in the sequence.\n *\n * @param {Node} node\n * @return {Node} node\n */\nfunction remove (node) {\n  var next = node.nextSibling || node.parentNode;\n\n  node.parentNode.removeChild(node);\n\n  return next\n}\n\n/**\n * next(prev, current, isPre) returns the next node in the sequence, given the\n * current and previous nodes.\n *\n * @param {Node} prev\n * @param {Node} current\n * @param {Function} isPre\n * @return {Node}\n */\nfunction next (prev, current, isPre) {\n  if ((prev && prev.parentNode === current) || isPre(current)) {\n    return current.nextSibling || current.parentNode\n  }\n\n  return current.firstChild || current.nextSibling || current.parentNode\n}\n\n/*\n * Set up window for Node.js\n */\n\nvar root = (typeof window !== 'undefined' ? window : {});\n\n/*\n * Parsing HTML strings\n */\n\nfunction canParseHTMLNatively () {\n  var Parser = root.DOMParser;\n  var canParse = false;\n\n  // Adapted from https://gist.github.com/1129031\n  // Firefox/Opera/IE throw errors on unsupported types\n  try {\n    // WebKit returns null on unsupported types\n    if (new Parser().parseFromString('', 'text/html')) {\n      canParse = true;\n    }\n  } catch (e) {}\n\n  return canParse\n}\n\nfunction createHTMLParser () {\n  var Parser = function () {};\n\n  {\n    if (shouldUseActiveX()) {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = new window.ActiveXObject('htmlfile');\n        doc.designMode = 'on'; // disable on-page scripts\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc\n      };\n    } else {\n      Parser.prototype.parseFromString = function (string) {\n        var doc = document.implementation.createHTMLDocument('');\n        doc.open();\n        doc.write(string);\n        doc.close();\n        return doc\n      };\n    }\n  }\n  return Parser\n}\n\nfunction shouldUseActiveX () {\n  var useActiveX = false;\n  try {\n    document.implementation.createHTMLDocument('').open();\n  } catch (e) {\n    if (window.ActiveXObject) useActiveX = true;\n  }\n  return useActiveX\n}\n\nvar HTMLParser = canParseHTMLNatively() ? root.DOMParser : createHTMLParser();\n\nfunction RootNode (input, options) {\n  var root;\n  if (typeof input === 'string') {\n    var doc = htmlParser().parseFromString(\n      // DOM parsers arrange elements in the <head> and <body>.\n      // Wrapping in a custom element ensures elements are reliably arranged in\n      // a single element.\n      '<x-turndown id=\"turndown-root\">' + input + '</x-turndown>',\n      'text/html'\n    );\n    root = doc.getElementById('turndown-root');\n  } else {\n    root = input.cloneNode(true);\n  }\n  collapseWhitespace({\n    element: root,\n    isBlock: isBlock,\n    isVoid: isVoid,\n    isPre: options.preformattedCode ? isPreOrCode : null\n  });\n\n  return root\n}\n\nvar _htmlParser;\nfunction htmlParser () {\n  _htmlParser = _htmlParser || new HTMLParser();\n  return _htmlParser\n}\n\nfunction isPreOrCode (node) {\n  return node.nodeName === 'PRE' || node.nodeName === 'CODE'\n}\n\nfunction Node (node, options) {\n  node.isBlock = isBlock(node);\n  node.isCode = node.nodeName === 'CODE' || node.parentNode.isCode;\n  node.isBlank = isBlank(node);\n  node.flankingWhitespace = flankingWhitespace(node, options);\n  return node\n}\n\nfunction isBlank (node) {\n  return (\n    !isVoid(node) &&\n    !isMeaningfulWhenBlank(node) &&\n    /^\\s*$/i.test(node.textContent) &&\n    !hasVoid(node) &&\n    !hasMeaningfulWhenBlank(node)\n  )\n}\n\nfunction flankingWhitespace (node, options) {\n  if (node.isBlock || (options.preformattedCode && node.isCode)) {\n    return { leading: '', trailing: '' }\n  }\n\n  var edges = edgeWhitespace(node.textContent);\n\n  // abandon leading ASCII WS if left-flanked by ASCII WS\n  if (edges.leadingAscii && isFlankedByWhitespace('left', node, options)) {\n    edges.leading = edges.leadingNonAscii;\n  }\n\n  // abandon trailing ASCII WS if right-flanked by ASCII WS\n  if (edges.trailingAscii && isFlankedByWhitespace('right', node, options)) {\n    edges.trailing = edges.trailingNonAscii;\n  }\n\n  return { leading: edges.leading, trailing: edges.trailing }\n}\n\nfunction edgeWhitespace (string) {\n  var m = string.match(/^(([ \\t\\r\\n]*)(\\s*))[\\s\\S]*?((\\s*?)([ \\t\\r\\n]*))$/);\n  return {\n    leading: m[1], // whole string for whitespace-only strings\n    leadingAscii: m[2],\n    leadingNonAscii: m[3],\n    trailing: m[4], // empty for whitespace-only strings\n    trailingNonAscii: m[5],\n    trailingAscii: m[6]\n  }\n}\n\nfunction isFlankedByWhitespace (side, node, options) {\n  var sibling;\n  var regExp;\n  var isFlanked;\n\n  if (side === 'left') {\n    sibling = node.previousSibling;\n    regExp = / $/;\n  } else {\n    sibling = node.nextSibling;\n    regExp = /^ /;\n  }\n\n  if (sibling) {\n    if (sibling.nodeType === 3) {\n      isFlanked = regExp.test(sibling.nodeValue);\n    } else if (options.preformattedCode && sibling.nodeName === 'CODE') {\n      isFlanked = false;\n    } else if (sibling.nodeType === 1 && !isBlock(sibling)) {\n      isFlanked = regExp.test(sibling.textContent);\n    }\n  }\n  return isFlanked\n}\n\nvar reduce = Array.prototype.reduce;\nvar escapes = [\n  [/\\\\/g, '\\\\\\\\'],\n  [/\\*/g, '\\\\*'],\n  [/^-/g, '\\\\-'],\n  [/^\\+ /g, '\\\\+ '],\n  [/^(=+)/g, '\\\\$1'],\n  [/^(#{1,6}) /g, '\\\\$1 '],\n  [/`/g, '\\\\`'],\n  [/^~~~/g, '\\\\~~~'],\n  [/\\[/g, '\\\\['],\n  [/\\]/g, '\\\\]'],\n  [/^>/g, '\\\\>'],\n  [/_/g, '\\\\_'],\n  [/^(\\d+)\\. /g, '$1\\\\. ']\n];\n\nfunction TurndownService (options) {\n  if (!(this instanceof TurndownService)) return new TurndownService(options)\n\n  var defaults = {\n    rules: rules,\n    headingStyle: 'setext',\n    hr: '* * *',\n    bulletListMarker: '*',\n    codeBlockStyle: 'indented',\n    fence: '```',\n    emDelimiter: '_',\n    strongDelimiter: '**',\n    linkStyle: 'inlined',\n    linkReferenceStyle: 'full',\n    br: '  ',\n    preformattedCode: false,\n    blankReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' : ''\n    },\n    keepReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + node.outerHTML + '\\n\\n' : node.outerHTML\n    },\n    defaultReplacement: function (content, node) {\n      return node.isBlock ? '\\n\\n' + content + '\\n\\n' : content\n    }\n  };\n  this.options = extend({}, defaults, options);\n  this.rules = new Rules(this.options);\n}\n\nTurndownService.prototype = {\n  /**\n   * The entry point for converting a string or DOM node to Markdown\n   * @public\n   * @param {String|HTMLElement} input The string or DOM node to convert\n   * @returns A Markdown representation of the input\n   * @type String\n   */\n\n  turndown: function (input) {\n    if (!canConvert(input)) {\n      throw new TypeError(\n        input + ' is not a string, or an element/document/fragment node.'\n      )\n    }\n\n    if (input === '') return ''\n\n    var output = process.call(this, new RootNode(input, this.options));\n    return postProcess.call(this, output)\n  },\n\n  /**\n   * Add one or more plugins\n   * @public\n   * @param {Function|Array} plugin The plugin or array of plugins to add\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  use: function (plugin) {\n    if (Array.isArray(plugin)) {\n      for (var i = 0; i < plugin.length; i++) this.use(plugin[i]);\n    } else if (typeof plugin === 'function') {\n      plugin(this);\n    } else {\n      throw new TypeError('plugin must be a Function or an Array of Functions')\n    }\n    return this\n  },\n\n  /**\n   * Adds a rule\n   * @public\n   * @param {String} key The unique key of the rule\n   * @param {Object} rule The rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  addRule: function (key, rule) {\n    this.rules.add(key, rule);\n    return this\n  },\n\n  /**\n   * Keep a node (as HTML) that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  keep: function (filter) {\n    this.rules.keep(filter);\n    return this\n  },\n\n  /**\n   * Remove a node that matches the filter\n   * @public\n   * @param {String|Array|Function} filter The unique key of the rule\n   * @returns The Turndown instance for chaining\n   * @type Object\n   */\n\n  remove: function (filter) {\n    this.rules.remove(filter);\n    return this\n  },\n\n  /**\n   * Escapes Markdown syntax\n   * @public\n   * @param {String} string The string to escape\n   * @returns A string with Markdown syntax escaped\n   * @type String\n   */\n\n  escape: function (string) {\n    return escapes.reduce(function (accumulator, escape) {\n      return accumulator.replace(escape[0], escape[1])\n    }, string)\n  }\n};\n\n/**\n * Reduces a DOM node down to its Markdown string equivalent\n * @private\n * @param {HTMLElement} parentNode The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction process (parentNode) {\n  var self = this;\n  return reduce.call(parentNode.childNodes, function (output, node) {\n    node = new Node(node, self.options);\n\n    var replacement = '';\n    if (node.nodeType === 3) {\n      replacement = node.isCode ? node.nodeValue : self.escape(node.nodeValue);\n    } else if (node.nodeType === 1) {\n      replacement = replacementForNode.call(self, node);\n    }\n\n    return join(output, replacement)\n  }, '')\n}\n\n/**\n * Appends strings as each rule requires and trims the output\n * @private\n * @param {String} output The conversion output\n * @returns A trimmed version of the ouput\n * @type String\n */\n\nfunction postProcess (output) {\n  var self = this;\n  this.rules.forEach(function (rule) {\n    if (typeof rule.append === 'function') {\n      output = join(output, rule.append(self.options));\n    }\n  });\n\n  return output.replace(/^[\\t\\r\\n]+/, '').replace(/[\\t\\r\\n\\s]+$/, '')\n}\n\n/**\n * Converts an element node to its Markdown equivalent\n * @private\n * @param {HTMLElement} node The node to convert\n * @returns A Markdown representation of the node\n * @type String\n */\n\nfunction replacementForNode (node) {\n  var rule = this.rules.forNode(node);\n  var content = process.call(this, node);\n  var whitespace = node.flankingWhitespace;\n  if (whitespace.leading || whitespace.trailing) content = content.trim();\n  return (\n    whitespace.leading +\n    rule.replacement(content, node, this.options) +\n    whitespace.trailing\n  )\n}\n\n/**\n * Joins replacement to the current output with appropriate number of new lines\n * @private\n * @param {String} output The current conversion output\n * @param {String} replacement The string to append to the output\n * @returns Joined output\n * @type String\n */\n\nfunction join (output, replacement) {\n  var s1 = trimTrailingNewlines(output);\n  var s2 = trimLeadingNewlines(replacement);\n  var nls = Math.max(output.length - s1.length, replacement.length - s2.length);\n  var separator = '\\n\\n'.substring(0, nls);\n\n  return s1 + separator + s2\n}\n\n/**\n * Determines whether an input can be converted\n * @private\n * @param {String|HTMLElement} input Describe this parameter\n * @returns Describe what it returns\n * @type String|Object|Array|Boolean|Number\n */\n\nfunction canConvert (input) {\n  return (\n    input != null && (\n      typeof input === 'string' ||\n      (input.nodeType && (\n        input.nodeType === 1 || input.nodeType === 9 || input.nodeType === 11\n      ))\n    )\n  )\n}\n\nexport default TurndownService;\n","var textarea;\n\nfunction decodeEntity(name) {\n  textarea = textarea || document.createElement('textarea');\n  textarea.innerHTML = '&' + name + ';';\n  return textarea.value;\n}\n\n/**\n * Utility functions\n */\n\nfunction typeOf(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nfunction isString(obj) {\n  return typeOf(obj) === '[object String]';\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nfunction has(object, key) {\n  return object\n    ? hasOwn.call(object, key)\n    : false;\n}\n\n// Extend objects\n//\nfunction assign(obj /*from1, from2, from3, ...*/) {\n  var sources = [].slice.call(arguments, 1);\n\n  sources.forEach(function (source) {\n    if (!source) { return; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be object');\n    }\n\n    Object.keys(source).forEach(function (key) {\n      obj[key] = source[key];\n    });\n  });\n\n  return obj;\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar UNESCAPE_MD_RE = /\\\\([\\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction unescapeMd(str) {\n  if (str.indexOf('\\\\') < 0) { return str; }\n  return str.replace(UNESCAPE_MD_RE, '$1');\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nfunction isValidEntityCode(c) {\n  /*eslint no-bitwise:0*/\n  // broken sequence\n  if (c >= 0xD800 && c <= 0xDFFF) { return false; }\n  // never used\n  if (c >= 0xFDD0 && c <= 0xFDEF) { return false; }\n  if ((c & 0xFFFF) === 0xFFFF || (c & 0xFFFF) === 0xFFFE) { return false; }\n  // control codes\n  if (c >= 0x00 && c <= 0x08) { return false; }\n  if (c === 0x0B) { return false; }\n  if (c >= 0x0E && c <= 0x1F) { return false; }\n  if (c >= 0x7F && c <= 0x9F) { return false; }\n  // out of range\n  if (c > 0x10FFFF) { return false; }\n  return true;\n}\n\nfunction fromCodePoint(c) {\n  /*eslint no-bitwise:0*/\n  if (c > 0xffff) {\n    c -= 0x10000;\n    var surrogate1 = 0xd800 + (c >> 10),\n        surrogate2 = 0xdc00 + (c & 0x3ff);\n\n    return String.fromCharCode(surrogate1, surrogate2);\n  }\n  return String.fromCharCode(c);\n}\n\nvar NAMED_ENTITY_RE   = /&([a-z#][a-z0-9]{1,31});/gi;\nvar DIGITAL_ENTITY_TEST_RE = /^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;\n\nfunction replaceEntityPattern(match, name) {\n  var code = 0;\n  var decoded = decodeEntity(name);\n\n  if (name !== decoded) {\n    return decoded;\n  } else if (name.charCodeAt(0) === 0x23/* # */ && DIGITAL_ENTITY_TEST_RE.test(name)) {\n    code = name[1].toLowerCase() === 'x' ?\n      parseInt(name.slice(2), 16)\n    :\n      parseInt(name.slice(1), 10);\n    if (isValidEntityCode(code)) {\n      return fromCodePoint(code);\n    }\n  }\n  return match;\n}\n\nfunction replaceEntities(str) {\n  if (str.indexOf('&') < 0) { return str; }\n\n  return str.replace(NAMED_ENTITY_RE, replaceEntityPattern);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n\nvar HTML_ESCAPE_TEST_RE = /[&<>\"]/;\nvar HTML_ESCAPE_REPLACE_RE = /[&<>\"]/g;\nvar HTML_REPLACEMENTS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\n\nfunction replaceUnsafeChar(ch) {\n  return HTML_REPLACEMENTS[ch];\n}\n\nfunction escapeHtml(str) {\n  if (HTML_ESCAPE_TEST_RE.test(str)) {\n    return str.replace(HTML_ESCAPE_REPLACE_RE, replaceUnsafeChar);\n  }\n  return str;\n}\n\nvar utils = /*#__PURE__*/Object.freeze({\n  isString: isString,\n  has: has,\n  assign: assign,\n  unescapeMd: unescapeMd,\n  isValidEntityCode: isValidEntityCode,\n  fromCodePoint: fromCodePoint,\n  replaceEntities: replaceEntities,\n  escapeHtml: escapeHtml\n});\n\n/**\n * Renderer rules cache\n */\n\nvar rules = {};\n\n/**\n * Blockquotes\n */\n\nrules.blockquote_open = function(/* tokens, idx, options, env */) {\n  return '<blockquote>\\n';\n};\n\nrules.blockquote_close = function(tokens, idx /*, options, env */) {\n  return '</blockquote>' + getBreak(tokens, idx);\n};\n\n/**\n * Code\n */\n\nrules.code = function(tokens, idx /*, options, env */) {\n  if (tokens[idx].block) {\n    return '<pre><code>' + escapeHtml(tokens[idx].content) + '</code></pre>' + getBreak(tokens, idx);\n  }\n  return '<code>' + escapeHtml(tokens[idx].content) + '</code>';\n};\n\n/**\n * Fenced code blocks\n */\n\nrules.fence = function(tokens, idx, options, env, instance) {\n  var token = tokens[idx];\n  var langClass = '';\n  var langPrefix = options.langPrefix;\n  var langName = '', fences, fenceName;\n  var highlighted;\n\n  if (token.params) {\n\n    //\n    // ```foo bar\n    //\n    // Try custom renderer \"foo\" first. That will simplify overwrite\n    // for diagrams, latex, and any other fenced block with custom look\n    //\n\n    fences = token.params.split(/\\s+/g);\n    fenceName = fences.join(' ');\n\n    if (has(instance.rules.fence_custom, fences[0])) {\n      return instance.rules.fence_custom[fences[0]](tokens, idx, options, env, instance);\n    }\n\n    langName = escapeHtml(replaceEntities(unescapeMd(fenceName)));\n    langClass = ' class=\"' + langPrefix + langName + '\"';\n  }\n\n  if (options.highlight) {\n    highlighted = options.highlight.apply(options.highlight, [ token.content ].concat(fences))\n      || escapeHtml(token.content);\n  } else {\n    highlighted = escapeHtml(token.content);\n  }\n\n  return '<pre><code' + langClass + '>'\n        + highlighted\n        + '</code></pre>'\n        + getBreak(tokens, idx);\n};\n\nrules.fence_custom = {};\n\n/**\n * Headings\n */\n\nrules.heading_open = function(tokens, idx /*, options, env */) {\n  return '<h' + tokens[idx].hLevel + '>';\n};\nrules.heading_close = function(tokens, idx /*, options, env */) {\n  return '</h' + tokens[idx].hLevel + '>\\n';\n};\n\n/**\n * Horizontal rules\n */\n\nrules.hr = function(tokens, idx, options /*, env */) {\n  return (options.xhtmlOut ? '<hr />' : '<hr>') + getBreak(tokens, idx);\n};\n\n/**\n * Bullets\n */\n\nrules.bullet_list_open = function(/* tokens, idx, options, env */) {\n  return '<ul>\\n';\n};\nrules.bullet_list_close = function(tokens, idx /*, options, env */) {\n  return '</ul>' + getBreak(tokens, idx);\n};\n\n/**\n * List items\n */\n\nrules.list_item_open = function(/* tokens, idx, options, env */) {\n  return '<li>';\n};\nrules.list_item_close = function(/* tokens, idx, options, env */) {\n  return '</li>\\n';\n};\n\n/**\n * Ordered list items\n */\n\nrules.ordered_list_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  var order = token.order > 1 ? ' start=\"' + token.order + '\"' : '';\n  return '<ol' + order + '>\\n';\n};\nrules.ordered_list_close = function(tokens, idx /*, options, env */) {\n  return '</ol>' + getBreak(tokens, idx);\n};\n\n/**\n * Paragraphs\n */\n\nrules.paragraph_open = function(tokens, idx /*, options, env */) {\n  return tokens[idx].tight ? '' : '<p>';\n};\nrules.paragraph_close = function(tokens, idx /*, options, env */) {\n  var addBreak = !(tokens[idx].tight && idx && tokens[idx - 1].type === 'inline' && !tokens[idx - 1].content);\n  return (tokens[idx].tight ? '' : '</p>') + (addBreak ? getBreak(tokens, idx) : '');\n};\n\n/**\n * Links\n */\n\nrules.link_open = function(tokens, idx, options /* env */) {\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var target = options.linkTarget ? (' target=\"' + options.linkTarget + '\"') : '';\n  return '<a href=\"' + escapeHtml(tokens[idx].href) + '\"' + title + target + '>';\n};\nrules.link_close = function(/* tokens, idx, options, env */) {\n  return '</a>';\n};\n\n/**\n * Images\n */\n\nrules.image = function(tokens, idx, options /*, env */) {\n  var src = ' src=\"' + escapeHtml(tokens[idx].src) + '\"';\n  var title = tokens[idx].title ? (' title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\"') : '';\n  var alt = ' alt=\"' + (tokens[idx].alt ? escapeHtml(replaceEntities(unescapeMd(tokens[idx].alt))) : '') + '\"';\n  var suffix = options.xhtmlOut ? ' /' : '';\n  return '<img' + src + alt + title + suffix + '>';\n};\n\n/**\n * Tables\n */\n\nrules.table_open = function(/* tokens, idx, options, env */) {\n  return '<table>\\n';\n};\nrules.table_close = function(/* tokens, idx, options, env */) {\n  return '</table>\\n';\n};\nrules.thead_open = function(/* tokens, idx, options, env */) {\n  return '<thead>\\n';\n};\nrules.thead_close = function(/* tokens, idx, options, env */) {\n  return '</thead>\\n';\n};\nrules.tbody_open = function(/* tokens, idx, options, env */) {\n  return '<tbody>\\n';\n};\nrules.tbody_close = function(/* tokens, idx, options, env */) {\n  return '</tbody>\\n';\n};\nrules.tr_open = function(/* tokens, idx, options, env */) {\n  return '<tr>';\n};\nrules.tr_close = function(/* tokens, idx, options, env */) {\n  return '</tr>\\n';\n};\nrules.th_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<th'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.th_close = function(/* tokens, idx, options, env */) {\n  return '</th>';\n};\nrules.td_open = function(tokens, idx /*, options, env */) {\n  var token = tokens[idx];\n  return '<td'\n    + (token.align ? ' style=\"text-align:' + token.align + '\"' : '')\n    + '>';\n};\nrules.td_close = function(/* tokens, idx, options, env */) {\n  return '</td>';\n};\n\n/**\n * Bold\n */\n\nrules.strong_open = function(/* tokens, idx, options, env */) {\n  return '<strong>';\n};\nrules.strong_close = function(/* tokens, idx, options, env */) {\n  return '</strong>';\n};\n\n/**\n * Italicize\n */\n\nrules.em_open = function(/* tokens, idx, options, env */) {\n  return '<em>';\n};\nrules.em_close = function(/* tokens, idx, options, env */) {\n  return '</em>';\n};\n\n/**\n * Strikethrough\n */\n\nrules.del_open = function(/* tokens, idx, options, env */) {\n  return '<del>';\n};\nrules.del_close = function(/* tokens, idx, options, env */) {\n  return '</del>';\n};\n\n/**\n * Insert\n */\n\nrules.ins_open = function(/* tokens, idx, options, env */) {\n  return '<ins>';\n};\nrules.ins_close = function(/* tokens, idx, options, env */) {\n  return '</ins>';\n};\n\n/**\n * Highlight\n */\n\nrules.mark_open = function(/* tokens, idx, options, env */) {\n  return '<mark>';\n};\nrules.mark_close = function(/* tokens, idx, options, env */) {\n  return '</mark>';\n};\n\n/**\n * Super- and sub-script\n */\n\nrules.sub = function(tokens, idx /*, options, env */) {\n  return '<sub>' + escapeHtml(tokens[idx].content) + '</sub>';\n};\nrules.sup = function(tokens, idx /*, options, env */) {\n  return '<sup>' + escapeHtml(tokens[idx].content) + '</sup>';\n};\n\n/**\n * Breaks\n */\n\nrules.hardbreak = function(tokens, idx, options /*, env */) {\n  return options.xhtmlOut ? '<br />\\n' : '<br>\\n';\n};\nrules.softbreak = function(tokens, idx, options /*, env */) {\n  return options.breaks ? (options.xhtmlOut ? '<br />\\n' : '<br>\\n') : '\\n';\n};\n\n/**\n * Text\n */\n\nrules.text = function(tokens, idx /*, options, env */) {\n  return escapeHtml(tokens[idx].content);\n};\n\n/**\n * Content\n */\n\nrules.htmlblock = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\nrules.htmltag = function(tokens, idx /*, options, env */) {\n  return tokens[idx].content;\n};\n\n/**\n * Abbreviations, initialism\n */\n\nrules.abbr_open = function(tokens, idx /*, options, env */) {\n  return '<abbr title=\"' + escapeHtml(replaceEntities(tokens[idx].title)) + '\">';\n};\nrules.abbr_close = function(/* tokens, idx, options, env */) {\n  return '</abbr>';\n};\n\n/**\n * Footnotes\n */\n\nrules.footnote_ref = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return '<sup class=\"footnote-ref\"><a href=\"#fn' + n + '\" id=\"' + id + '\">[' + n + ']</a></sup>';\n};\nrules.footnote_block_open = function(tokens, idx, options) {\n  var hr = options.xhtmlOut\n    ? '<hr class=\"footnotes-sep\" />\\n'\n    : '<hr class=\"footnotes-sep\">\\n';\n  return hr + '<section class=\"footnotes\">\\n<ol class=\"footnotes-list\">\\n';\n};\nrules.footnote_block_close = function() {\n  return '</ol>\\n</section>\\n';\n};\nrules.footnote_open = function(tokens, idx) {\n  var id = Number(tokens[idx].id + 1).toString();\n  return '<li id=\"fn' + id + '\"  class=\"footnote-item\">';\n};\nrules.footnote_close = function() {\n  return '</li>\\n';\n};\nrules.footnote_anchor = function(tokens, idx) {\n  var n = Number(tokens[idx].id + 1).toString();\n  var id = 'fnref' + n;\n  if (tokens[idx].subId > 0) {\n    id += ':' + tokens[idx].subId;\n  }\n  return ' <a href=\"#' + id + '\" class=\"footnote-backref\">↩</a>';\n};\n\n/**\n * Definition lists\n */\n\nrules.dl_open = function() {\n  return '<dl>\\n';\n};\nrules.dt_open = function() {\n  return '<dt>';\n};\nrules.dd_open = function() {\n  return '<dd>';\n};\nrules.dl_close = function() {\n  return '</dl>\\n';\n};\nrules.dt_close = function() {\n  return '</dt>\\n';\n};\nrules.dd_close = function() {\n  return '</dd>\\n';\n};\n\n/**\n * Helper functions\n */\n\nfunction nextToken(tokens, idx) {\n  if (++idx >= tokens.length - 2) {\n    return idx;\n  }\n  if ((tokens[idx].type === 'paragraph_open' && tokens[idx].tight) &&\n      (tokens[idx + 1].type === 'inline' && tokens[idx + 1].content.length === 0) &&\n      (tokens[idx + 2].type === 'paragraph_close' && tokens[idx + 2].tight)) {\n    return nextToken(tokens, idx + 2);\n  }\n  return idx;\n}\n\n/**\n * Check to see if `\\n` is needed before the next token.\n *\n * @param  {Array} `tokens`\n * @param  {Number} `idx`\n * @return {String} Empty string or newline\n * @api private\n */\n\nvar getBreak = rules.getBreak = function getBreak(tokens, idx) {\n  idx = nextToken(tokens, idx);\n  if (idx < tokens.length && tokens[idx].type === 'list_item_close') {\n    return '';\n  }\n  return '\\n';\n};\n\n/**\n * Renderer class. Renders HTML and exposes `rules` to allow\n * local modifications.\n */\n\nfunction Renderer() {\n  this.rules = assign({}, rules);\n\n  // exported helper, for custom rules only\n  this.getBreak = rules.getBreak;\n}\n\n/**\n * Render a string of inline HTML with the given `tokens` and\n * `options`.\n *\n * @param  {Array} `tokens`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @return {String}\n * @api public\n */\n\nRenderer.prototype.renderInline = function (tokens, options, env) {\n  var _rules = this.rules;\n  var len = tokens.length, i = 0;\n  var result = '';\n\n  while (len--) {\n    result += _rules[tokens[i].type](tokens, i++, options, env, this);\n  }\n\n  return result;\n};\n\n/**\n * Render a string of HTML with the given `tokens` and\n * `options`.\n *\n * @param  {Array} `tokens`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @return {String}\n * @api public\n */\n\nRenderer.prototype.render = function (tokens, options, env) {\n  var _rules = this.rules;\n  var len = tokens.length, i = -1;\n  var result = '';\n\n  while (++i < len) {\n    if (tokens[i].type === 'inline') {\n      result += this.renderInline(tokens[i].children, options, env);\n    } else {\n      result += _rules[tokens[i].type](tokens, i, options, env, this);\n    }\n  }\n  return result;\n};\n\n/**\n * Ruler is a helper class for building responsibility chains from\n * parse rules. It allows:\n *\n *   - easy stack rules chains\n *   - getting main chain and named chains content (as arrays of functions)\n *\n * Helper methods, should not be used directly.\n * @api private\n */\n\nfunction Ruler() {\n  // List of added rules. Each element is:\n  //\n  // { name: XXX,\n  //   enabled: Boolean,\n  //   fn: Function(),\n  //   alt: [ name2, name3 ] }\n  //\n  this.__rules__ = [];\n\n  // Cached rule chains.\n  //\n  // First level - chain name, '' for default.\n  // Second level - digital anchor for fast filtering by charcodes.\n  //\n  this.__cache__ = null;\n}\n\n/**\n * Find the index of a rule by `name`.\n *\n * @param  {String} `name`\n * @return {Number} Index of the given `name`\n * @api private\n */\n\nRuler.prototype.__find__ = function (name) {\n  var len = this.__rules__.length;\n  var i = -1;\n\n  while (len--) {\n    if (this.__rules__[++i].name === name) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n/**\n * Build the rules lookup cache\n *\n * @api private\n */\n\nRuler.prototype.__compile__ = function () {\n  var self = this;\n  var chains = [ '' ];\n\n  // collect unique names\n  self.__rules__.forEach(function (rule) {\n    if (!rule.enabled) {\n      return;\n    }\n\n    rule.alt.forEach(function (altName) {\n      if (chains.indexOf(altName) < 0) {\n        chains.push(altName);\n      }\n    });\n  });\n\n  self.__cache__ = {};\n\n  chains.forEach(function (chain) {\n    self.__cache__[chain] = [];\n    self.__rules__.forEach(function (rule) {\n      if (!rule.enabled) {\n        return;\n      }\n\n      if (chain && rule.alt.indexOf(chain) < 0) {\n        return;\n      }\n      self.__cache__[chain].push(rule.fn);\n    });\n  });\n};\n\n/**\n * Ruler public methods\n * ------------------------------------------------\n */\n\n/**\n * Replace rule function\n *\n * @param  {String} `name` Rule name\n * @param  {Function `fn`\n * @param  {Object} `options`\n * @api private\n */\n\nRuler.prototype.at = function (name, fn, options) {\n  var idx = this.__find__(name);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + name);\n  }\n\n  this.__rules__[idx].fn = fn;\n  this.__rules__[idx].alt = opt.alt || [];\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the chain before given the `ruleName`.\n *\n * @param  {String}   `beforeName`\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @api private\n */\n\nRuler.prototype.before = function (beforeName, ruleName, fn, options) {\n  var idx = this.__find__(beforeName);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + beforeName);\n  }\n\n  this.__rules__.splice(idx, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the chain after the given `ruleName`.\n *\n * @param  {String}   `afterName`\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @api private\n */\n\nRuler.prototype.after = function (afterName, ruleName, fn, options) {\n  var idx = this.__find__(afterName);\n  var opt = options || {};\n\n  if (idx === -1) {\n    throw new Error('Parser rule not found: ' + afterName);\n  }\n\n  this.__rules__.splice(idx + 1, 0, {\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Add a rule to the end of chain.\n *\n * @param  {String}   `ruleName`\n * @param  {Function} `fn`\n * @param  {Object}   `options`\n * @return {String}\n */\n\nRuler.prototype.push = function (ruleName, fn, options) {\n  var opt = options || {};\n\n  this.__rules__.push({\n    name: ruleName,\n    enabled: true,\n    fn: fn,\n    alt: opt.alt || []\n  });\n\n  this.__cache__ = null;\n};\n\n/**\n * Enable a rule or list of rules.\n *\n * @param  {String|Array} `list` Name or array of rule names to enable\n * @param  {Boolean} `strict` If `true`, all non listed rules will be disabled.\n * @api private\n */\n\nRuler.prototype.enable = function (list, strict) {\n  list = !Array.isArray(list)\n    ? [ list ]\n    : list;\n\n  // In strict mode disable all existing rules first\n  if (strict) {\n    this.__rules__.forEach(function (rule) {\n      rule.enabled = false;\n    });\n  }\n\n  // Search by name and enable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n    if (idx < 0) {\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = true;\n  }, this);\n\n  this.__cache__ = null;\n};\n\n\n/**\n * Disable a rule or list of rules.\n *\n * @param  {String|Array} `list` Name or array of rule names to disable\n * @api private\n */\n\nRuler.prototype.disable = function (list) {\n  list = !Array.isArray(list)\n    ? [ list ]\n    : list;\n\n  // Search by name and disable\n  list.forEach(function (name) {\n    var idx = this.__find__(name);\n    if (idx < 0) {\n      throw new Error('Rules manager: invalid rule name ' + name);\n    }\n    this.__rules__[idx].enabled = false;\n  }, this);\n\n  this.__cache__ = null;\n};\n\n/**\n * Get a rules list as an array of functions.\n *\n * @param  {String} `chainName`\n * @return {Object}\n * @api private\n */\n\nRuler.prototype.getRules = function (chainName) {\n  if (this.__cache__ === null) {\n    this.__compile__();\n  }\n  return this.__cache__[chainName] || [];\n};\n\nfunction block(state) {\n\n  if (state.inlineMode) {\n    state.tokens.push({\n      type: 'inline',\n      content: state.src.replace(/\\n/g, ' ').trim(),\n      level: 0,\n      lines: [ 0, 1 ],\n      children: []\n    });\n\n  } else {\n    state.block.parse(state.src, state.options, state.env, state.tokens);\n  }\n}\n\n// Inline parser state\n\nfunction StateInline(src, parserInline, options, env, outTokens) {\n  this.src = src;\n  this.env = env;\n  this.options = options;\n  this.parser = parserInline;\n  this.tokens = outTokens;\n  this.pos = 0;\n  this.posMax = this.src.length;\n  this.level = 0;\n  this.pending = '';\n  this.pendingLevel = 0;\n\n  this.cache = [];        // Stores { start: end } pairs. Useful for backtrack\n                          // optimization of pairs parse (emphasis, strikes).\n\n  // Link parser state vars\n\n  this.isInLabel = false; // Set true when seek link label - we should disable\n                          // \"paired\" rules (emphasis, strikes) to not skip\n                          // tailing `]`\n\n  this.linkLevel = 0;     // Increment for each nesting link. Used to prevent\n                          // nesting in definitions\n\n  this.linkContent = '';  // Temporary storage for link url\n\n  this.labelUnmatchedScopes = 0; // Track unpaired `[` for link labels\n                                 // (backtrack optimization)\n}\n\n// Flush pending text\n//\nStateInline.prototype.pushPending = function () {\n  this.tokens.push({\n    type: 'text',\n    content: this.pending,\n    level: this.pendingLevel\n  });\n  this.pending = '';\n};\n\n// Push new token to \"stream\".\n// If pending text exists - flush it as text token\n//\nStateInline.prototype.push = function (token) {\n  if (this.pending) {\n    this.pushPending();\n  }\n\n  this.tokens.push(token);\n  this.pendingLevel = this.level;\n};\n\n// Store value to cache.\n// !!! Implementation has parser-specific optimizations\n// !!! keys MUST be integer, >= 0; values MUST be integer, > 0\n//\nStateInline.prototype.cacheSet = function (key, val) {\n  for (var i = this.cache.length; i <= key; i++) {\n    this.cache.push(0);\n  }\n\n  this.cache[key] = val;\n};\n\n// Get cache value\n//\nStateInline.prototype.cacheGet = function (key) {\n  return key < this.cache.length ? this.cache[key] : 0;\n};\n\n/**\n * Parse link labels\n *\n * This function assumes that first character (`[`) already matches;\n * returns the end of the label.\n *\n * @param  {Object} state\n * @param  {Number} start\n * @api private\n */\n\nfunction parseLinkLabel(state, start) {\n  var level, found, marker,\n      labelEnd = -1,\n      max = state.posMax,\n      oldPos = state.pos,\n      oldFlag = state.isInLabel;\n\n  if (state.isInLabel) { return -1; }\n\n  if (state.labelUnmatchedScopes) {\n    state.labelUnmatchedScopes--;\n    return -1;\n  }\n\n  state.pos = start + 1;\n  state.isInLabel = true;\n  level = 1;\n\n  while (state.pos < max) {\n    marker = state.src.charCodeAt(state.pos);\n    if (marker === 0x5B /* [ */) {\n      level++;\n    } else if (marker === 0x5D /* ] */) {\n      level--;\n      if (level === 0) {\n        found = true;\n        break;\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (found) {\n    labelEnd = state.pos;\n    state.labelUnmatchedScopes = 0;\n  } else {\n    state.labelUnmatchedScopes = level - 1;\n  }\n\n  // restore old state\n  state.pos = oldPos;\n  state.isInLabel = oldFlag;\n\n  return labelEnd;\n}\n\n// Parse abbreviation definitions, i.e. `*[abbr]: description`\n\n\nfunction parseAbbr(str, parserInline, options, env) {\n  var state, labelEnd, pos, max, label, title;\n\n  if (str.charCodeAt(0) !== 0x2A/* * */) { return -1; }\n  if (str.charCodeAt(1) !== 0x5B/* [ */) { return -1; }\n\n  if (str.indexOf(']:') === -1) { return -1; }\n\n  state = new StateInline(str, parserInline, options, env, []);\n  labelEnd = parseLinkLabel(state, 1);\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return -1; }\n\n  max = state.posMax;\n\n  // abbr title is always one line, so looking for ending \"\\n\" here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x0A) { break; }\n  }\n\n  label = str.slice(2, labelEnd);\n  title = str.slice(labelEnd + 2, pos).trim();\n  if (title.length === 0) { return -1; }\n  if (!env.abbreviations) { env.abbreviations = {}; }\n  // prepend ':' to avoid conflict with Object.prototype members\n  if (typeof env.abbreviations[':' + label] === 'undefined') {\n    env.abbreviations[':' + label] = title;\n  }\n\n  return pos;\n}\n\nfunction abbr(state) {\n  var tokens = state.tokens, i, l, content, pos;\n\n  if (state.inlineMode) {\n    return;\n  }\n\n  // Parse inlines\n  for (i = 1, l = tokens.length - 1; i < l; i++) {\n    if (tokens[i - 1].type === 'paragraph_open' &&\n        tokens[i].type === 'inline' &&\n        tokens[i + 1].type === 'paragraph_close') {\n\n      content = tokens[i].content;\n      while (content.length) {\n        pos = parseAbbr(content, state.inline, state.options, state.env);\n        if (pos < 0) { break; }\n        content = content.slice(pos).trim();\n      }\n\n      tokens[i].content = content;\n      if (!content.length) {\n        tokens[i - 1].tight = true;\n        tokens[i + 1].tight = true;\n      }\n    }\n  }\n}\n\nfunction normalizeLink(url) {\n  var normalized = replaceEntities(url);\n  // We shouldn't care about the result of malformed URIs,\n  // and should not throw an exception.\n  try {\n    normalized = decodeURI(normalized);\n  } catch (err) {}\n  return encodeURI(normalized);\n}\n\n/**\n * Parse link destination\n *\n *   - on success it returns a string and updates state.pos;\n *   - on failure it returns null\n *\n * @param  {Object} state\n * @param  {Number} pos\n * @api private\n */\n\nfunction parseLinkDestination(state, pos) {\n  var code, level, link,\n      start = pos,\n      max = state.posMax;\n\n  if (state.src.charCodeAt(pos) === 0x3C /* < */) {\n    pos++;\n    while (pos < max) {\n      code = state.src.charCodeAt(pos);\n      if (code === 0x0A /* \\n */) { return false; }\n      if (code === 0x3E /* > */) {\n        link = normalizeLink(unescapeMd(state.src.slice(start + 1, pos)));\n        if (!state.parser.validateLink(link)) { return false; }\n        state.pos = pos + 1;\n        state.linkContent = link;\n        return true;\n      }\n      if (code === 0x5C /* \\ */ && pos + 1 < max) {\n        pos += 2;\n        continue;\n      }\n\n      pos++;\n    }\n\n    // no closing '>'\n    return false;\n  }\n\n  // this should be ... } else { ... branch\n\n  level = 0;\n  while (pos < max) {\n    code = state.src.charCodeAt(pos);\n\n    if (code === 0x20) { break; }\n\n    // ascii control chars\n    if (code < 0x20 || code === 0x7F) { break; }\n\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    if (code === 0x28 /* ( */) {\n      level++;\n      if (level > 1) { break; }\n    }\n\n    if (code === 0x29 /* ) */) {\n      level--;\n      if (level < 0) { break; }\n    }\n\n    pos++;\n  }\n\n  if (start === pos) { return false; }\n\n  link = unescapeMd(state.src.slice(start, pos));\n  if (!state.parser.validateLink(link)) { return false; }\n\n  state.linkContent = link;\n  state.pos = pos;\n  return true;\n}\n\n/**\n * Parse link title\n *\n *   - on success it returns a string and updates state.pos;\n *   - on failure it returns null\n *\n * @param  {Object} state\n * @param  {Number} pos\n * @api private\n */\n\nfunction parseLinkTitle(state, pos) {\n  var code,\n      start = pos,\n      max = state.posMax,\n      marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x22 /* \" */ && marker !== 0x27 /* ' */ && marker !== 0x28 /* ( */) { return false; }\n\n  pos++;\n\n  // if opening marker is \"(\", switch it to closing marker \")\"\n  if (marker === 0x28) { marker = 0x29; }\n\n  while (pos < max) {\n    code = state.src.charCodeAt(pos);\n    if (code === marker) {\n      state.pos = pos + 1;\n      state.linkContent = unescapeMd(state.src.slice(start + 1, pos));\n      return true;\n    }\n    if (code === 0x5C /* \\ */ && pos + 1 < max) {\n      pos += 2;\n      continue;\n    }\n\n    pos++;\n  }\n\n  return false;\n}\n\nfunction normalizeReference(str) {\n  // use .toUpperCase() instead of .toLowerCase()\n  // here to avoid a conflict with Object.prototype\n  // members (most notably, `__proto__`)\n  return str.trim().replace(/\\s+/g, ' ').toUpperCase();\n}\n\nfunction parseReference(str, parser, options, env) {\n  var state, labelEnd, pos, max, code, start, href, title, label;\n\n  if (str.charCodeAt(0) !== 0x5B/* [ */) { return -1; }\n\n  if (str.indexOf(']:') === -1) { return -1; }\n\n  state = new StateInline(str, parser, options, env, []);\n  labelEnd = parseLinkLabel(state, 0);\n\n  if (labelEnd < 0 || str.charCodeAt(labelEnd + 1) !== 0x3A/* : */) { return -1; }\n\n  max = state.posMax;\n\n  // [label]:   destination   'title'\n  //         ^^^ skip optional whitespace here\n  for (pos = labelEnd + 2; pos < max; pos++) {\n    code = state.src.charCodeAt(pos);\n    if (code !== 0x20 && code !== 0x0A) { break; }\n  }\n\n  // [label]:   destination   'title'\n  //            ^^^^^^^^^^^ parse this\n  if (!parseLinkDestination(state, pos)) { return -1; }\n  href = state.linkContent;\n  pos = state.pos;\n\n  // [label]:   destination   'title'\n  //                       ^^^ skipping those spaces\n  start = pos;\n  for (pos = pos + 1; pos < max; pos++) {\n    code = state.src.charCodeAt(pos);\n    if (code !== 0x20 && code !== 0x0A) { break; }\n  }\n\n  // [label]:   destination   'title'\n  //                          ^^^^^^^ parse this\n  if (pos < max && start !== pos && parseLinkTitle(state, pos)) {\n    title = state.linkContent;\n    pos = state.pos;\n  } else {\n    title = '';\n    pos = start;\n  }\n\n  // ensure that the end of the line is empty\n  while (pos < max && state.src.charCodeAt(pos) === 0x20/* space */) { pos++; }\n  if (pos < max && state.src.charCodeAt(pos) !== 0x0A) { return -1; }\n\n  label = normalizeReference(str.slice(1, labelEnd));\n  if (typeof env.references[label] === 'undefined') {\n    env.references[label] = { title: title, href: href };\n  }\n\n  return pos;\n}\n\n\nfunction references(state) {\n  var tokens = state.tokens, i, l, content, pos;\n\n  state.env.references = state.env.references || {};\n\n  if (state.inlineMode) {\n    return;\n  }\n\n  // Scan definitions in paragraph inlines\n  for (i = 1, l = tokens.length - 1; i < l; i++) {\n    if (tokens[i].type === 'inline' &&\n        tokens[i - 1].type === 'paragraph_open' &&\n        tokens[i + 1].type === 'paragraph_close') {\n\n      content = tokens[i].content;\n      while (content.length) {\n        pos = parseReference(content, state.inline, state.options, state.env);\n        if (pos < 0) { break; }\n        content = content.slice(pos).trim();\n      }\n\n      tokens[i].content = content;\n      if (!content.length) {\n        tokens[i - 1].tight = true;\n        tokens[i + 1].tight = true;\n      }\n    }\n  }\n}\n\nfunction inline(state) {\n  var tokens = state.tokens, tok, i, l;\n\n  // Parse inlines\n  for (i = 0, l = tokens.length; i < l; i++) {\n    tok = tokens[i];\n    if (tok.type === 'inline') {\n      state.inline.parse(tok.content, state.options, state.env, tok.children);\n    }\n  }\n}\n\nfunction footnote_block(state) {\n  var i, l, j, t, lastParagraph, list, tokens, current, currentLabel,\n      level = 0,\n      insideRef = false,\n      refTokens = {};\n\n  if (!state.env.footnotes) { return; }\n\n  state.tokens = state.tokens.filter(function(tok) {\n    if (tok.type === 'footnote_reference_open') {\n      insideRef = true;\n      current = [];\n      currentLabel = tok.label;\n      return false;\n    }\n    if (tok.type === 'footnote_reference_close') {\n      insideRef = false;\n      // prepend ':' to avoid conflict with Object.prototype members\n      refTokens[':' + currentLabel] = current;\n      return false;\n    }\n    if (insideRef) { current.push(tok); }\n    return !insideRef;\n  });\n\n  if (!state.env.footnotes.list) { return; }\n  list = state.env.footnotes.list;\n\n  state.tokens.push({\n    type: 'footnote_block_open',\n    level: level++\n  });\n  for (i = 0, l = list.length; i < l; i++) {\n    state.tokens.push({\n      type: 'footnote_open',\n      id: i,\n      level: level++\n    });\n\n    if (list[i].tokens) {\n      tokens = [];\n      tokens.push({\n        type: 'paragraph_open',\n        tight: false,\n        level: level++\n      });\n      tokens.push({\n        type: 'inline',\n        content: '',\n        level: level,\n        children: list[i].tokens\n      });\n      tokens.push({\n        type: 'paragraph_close',\n        tight: false,\n        level: --level\n      });\n    } else if (list[i].label) {\n      tokens = refTokens[':' + list[i].label];\n    }\n\n    state.tokens = state.tokens.concat(tokens);\n    if (state.tokens[state.tokens.length - 1].type === 'paragraph_close') {\n      lastParagraph = state.tokens.pop();\n    } else {\n      lastParagraph = null;\n    }\n\n    t = list[i].count > 0 ? list[i].count : 1;\n    for (j = 0; j < t; j++) {\n      state.tokens.push({\n        type: 'footnote_anchor',\n        id: i,\n        subId: j,\n        level: level\n      });\n    }\n\n    if (lastParagraph) {\n      state.tokens.push(lastParagraph);\n    }\n\n    state.tokens.push({\n      type: 'footnote_close',\n      level: --level\n    });\n  }\n  state.tokens.push({\n    type: 'footnote_block_close',\n    level: --level\n  });\n}\n\n// Enclose abbreviations in <abbr> tags\n//\n\nvar PUNCT_CHARS = ' \\n()[]\\'\".,!?-';\n\n\n// from Google closure library\n// http://closure-library.googlecode.com/git-history/docs/local_closure_goog_string_string.js.source.html#line1021\nfunction regEscape(s) {\n  return s.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1');\n}\n\n\nfunction abbr2(state) {\n  var i, j, l, tokens, token, text, nodes, pos, level, reg, m, regText,\n      blockTokens = state.tokens;\n\n  if (!state.env.abbreviations) { return; }\n  if (!state.env.abbrRegExp) {\n    regText = '(^|[' + PUNCT_CHARS.split('').map(regEscape).join('') + '])'\n            + '(' + Object.keys(state.env.abbreviations).map(function (x) {\n                      return x.substr(1);\n                    }).sort(function (a, b) {\n                      return b.length - a.length;\n                    }).map(regEscape).join('|') + ')'\n            + '($|[' + PUNCT_CHARS.split('').map(regEscape).join('') + '])';\n    state.env.abbrRegExp = new RegExp(regText, 'g');\n  }\n  reg = state.env.abbrRegExp;\n\n  for (j = 0, l = blockTokens.length; j < l; j++) {\n    if (blockTokens[j].type !== 'inline') { continue; }\n    tokens = blockTokens[j].children;\n\n    // We scan from the end, to keep position when new tags added.\n    for (i = tokens.length - 1; i >= 0; i--) {\n      token = tokens[i];\n      if (token.type !== 'text') { continue; }\n\n      pos = 0;\n      text = token.content;\n      reg.lastIndex = 0;\n      level = token.level;\n      nodes = [];\n\n      while ((m = reg.exec(text))) {\n        if (reg.lastIndex > pos) {\n          nodes.push({\n            type: 'text',\n            content: text.slice(pos, m.index + m[1].length),\n            level: level\n          });\n        }\n\n        nodes.push({\n          type: 'abbr_open',\n          title: state.env.abbreviations[':' + m[2]],\n          level: level++\n        });\n        nodes.push({\n          type: 'text',\n          content: m[2],\n          level: level\n        });\n        nodes.push({\n          type: 'abbr_close',\n          level: --level\n        });\n        pos = reg.lastIndex - m[3].length;\n      }\n\n      if (!nodes.length) { continue; }\n\n      if (pos < text.length) {\n        nodes.push({\n          type: 'text',\n          content: text.slice(pos),\n          level: level\n        });\n      }\n\n      // replace current node\n      blockTokens[j].children = tokens = [].concat(tokens.slice(0, i), nodes, tokens.slice(i + 1));\n    }\n  }\n}\n\n// Simple typographical replacements\n//\n// TODO:\n// - fractionals 1/2, 1/4, 3/4 -> ½, ¼, ¾\n// - miltiplication 2 x 4 -> 2 × 4\n\nvar RARE_RE = /\\+-|\\.\\.|\\?\\?\\?\\?|!!!!|,,|--/;\n\nvar SCOPED_ABBR_RE = /\\((c|tm|r|p)\\)/ig;\nvar SCOPED_ABBR = {\n  'c': '©',\n  'r': '®',\n  'p': '§',\n  'tm': '™'\n};\n\nfunction replaceScopedAbbr(str) {\n  if (str.indexOf('(') < 0) { return str; }\n\n  return str.replace(SCOPED_ABBR_RE, function(match, name) {\n    return SCOPED_ABBR[name.toLowerCase()];\n  });\n}\n\n\nfunction replace(state) {\n  var i, token, text, inlineTokens, blkIdx;\n\n  if (!state.options.typographer) { return; }\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    inlineTokens = state.tokens[blkIdx].children;\n\n    for (i = inlineTokens.length - 1; i >= 0; i--) {\n      token = inlineTokens[i];\n      if (token.type === 'text') {\n        text = token.content;\n\n        text = replaceScopedAbbr(text);\n\n        if (RARE_RE.test(text)) {\n          text = text\n            .replace(/\\+-/g, '±')\n            // .., ..., ....... -> …\n            // but ?..... & !..... -> ?.. & !..\n            .replace(/\\.{2,}/g, '…').replace(/([?!])…/g, '$1..')\n            .replace(/([?!]){4,}/g, '$1$1$1').replace(/,{2,}/g, ',')\n            // em-dash\n            .replace(/(^|[^-])---([^-]|$)/mg, '$1\\u2014$2')\n            // en-dash\n            .replace(/(^|\\s)--(\\s|$)/mg, '$1\\u2013$2')\n            .replace(/(^|[^-\\s])--([^-\\s]|$)/mg, '$1\\u2013$2');\n        }\n\n        token.content = text;\n      }\n    }\n  }\n}\n\n// Convert straight quotation marks to typographic ones\n//\n\nvar QUOTE_TEST_RE = /['\"]/;\nvar QUOTE_RE = /['\"]/g;\nvar PUNCT_RE = /[-\\s()\\[\\]]/;\nvar APOSTROPHE = '’';\n\n// This function returns true if the character at `pos`\n// could be inside a word.\nfunction isLetter(str, pos) {\n  if (pos < 0 || pos >= str.length) { return false; }\n  return !PUNCT_RE.test(str[pos]);\n}\n\n\nfunction replaceAt(str, index, ch) {\n  return str.substr(0, index) + ch + str.substr(index + 1);\n}\n\n\nfunction smartquotes(state) {\n  /*eslint max-depth:0*/\n  var i, token, text, t, pos, max, thisLevel, lastSpace, nextSpace, item,\n      canOpen, canClose, j, isSingle, blkIdx, tokens,\n      stack;\n\n  if (!state.options.typographer) { return; }\n\n  stack = [];\n\n  for (blkIdx = state.tokens.length - 1; blkIdx >= 0; blkIdx--) {\n\n    if (state.tokens[blkIdx].type !== 'inline') { continue; }\n\n    tokens = state.tokens[blkIdx].children;\n    stack.length = 0;\n\n    for (i = 0; i < tokens.length; i++) {\n      token = tokens[i];\n\n      if (token.type !== 'text' || QUOTE_TEST_RE.test(token.text)) { continue; }\n\n      thisLevel = tokens[i].level;\n\n      for (j = stack.length - 1; j >= 0; j--) {\n        if (stack[j].level <= thisLevel) { break; }\n      }\n      stack.length = j + 1;\n\n      text = token.content;\n      pos = 0;\n      max = text.length;\n\n      /*eslint no-labels:0,block-scoped-var:0*/\n      OUTER:\n      while (pos < max) {\n        QUOTE_RE.lastIndex = pos;\n        t = QUOTE_RE.exec(text);\n        if (!t) { break; }\n\n        lastSpace = !isLetter(text, t.index - 1);\n        pos = t.index + 1;\n        isSingle = (t[0] === \"'\");\n        nextSpace = !isLetter(text, pos);\n\n        if (!nextSpace && !lastSpace) {\n          // middle of word\n          if (isSingle) {\n            token.content = replaceAt(token.content, t.index, APOSTROPHE);\n          }\n          continue;\n        }\n\n        canOpen = !nextSpace;\n        canClose = !lastSpace;\n\n        if (canClose) {\n          // this could be a closing quote, rewind the stack to get a match\n          for (j = stack.length - 1; j >= 0; j--) {\n            item = stack[j];\n            if (stack[j].level < thisLevel) { break; }\n            if (item.single === isSingle && stack[j].level === thisLevel) {\n              item = stack[j];\n              if (isSingle) {\n                tokens[item.token].content = replaceAt(tokens[item.token].content, item.pos, state.options.quotes[2]);\n                token.content = replaceAt(token.content, t.index, state.options.quotes[3]);\n              } else {\n                tokens[item.token].content = replaceAt(tokens[item.token].content, item.pos, state.options.quotes[0]);\n                token.content = replaceAt(token.content, t.index, state.options.quotes[1]);\n              }\n              stack.length = j;\n              continue OUTER;\n            }\n          }\n        }\n\n        if (canOpen) {\n          stack.push({\n            token: i,\n            pos: t.index,\n            single: isSingle,\n            level: thisLevel\n          });\n        } else if (canClose && isSingle) {\n          token.content = replaceAt(token.content, t.index, APOSTROPHE);\n        }\n      }\n    }\n  }\n}\n\n/**\n * Core parser `rules`\n */\n\nvar _rules = [\n  [ 'block',          block          ],\n  [ 'abbr',           abbr           ],\n  [ 'references',     references     ],\n  [ 'inline',         inline         ],\n  [ 'footnote_tail',  footnote_block  ],\n  [ 'abbr2',          abbr2          ],\n  [ 'replacements',   replace   ],\n  [ 'smartquotes',    smartquotes    ],\n];\n\n/**\n * Class for top level (`core`) parser rules\n *\n * @api private\n */\n\nfunction Core() {\n  this.options = {};\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules.length; i++) {\n    this.ruler.push(_rules[i][0], _rules[i][1]);\n  }\n}\n\n/**\n * Process rules with the given `state`\n *\n * @param  {Object} `state`\n * @api private\n */\n\nCore.prototype.process = function (state) {\n  var i, l, rules;\n  rules = this.ruler.getRules('');\n  for (i = 0, l = rules.length; i < l; i++) {\n    rules[i](state);\n  }\n};\n\n// Parser state class\n\nfunction StateBlock(src, parser, options, env, tokens) {\n  var ch, s, start, pos, len, indent, indent_found;\n\n  this.src = src;\n\n  // Shortcuts to simplify nested calls\n  this.parser = parser;\n\n  this.options = options;\n\n  this.env = env;\n\n  //\n  // Internal state vartiables\n  //\n\n  this.tokens = tokens;\n\n  this.bMarks = [];  // line begin offsets for fast jumps\n  this.eMarks = [];  // line end offsets for fast jumps\n  this.tShift = [];  // indent for each line\n\n  // block parser variables\n  this.blkIndent  = 0; // required block content indent\n                       // (for example, if we are in list)\n  this.line       = 0; // line index in src\n  this.lineMax    = 0; // lines count\n  this.tight      = false;  // loose/tight mode for lists\n  this.parentType = 'root'; // if `list`, block parser stops on two newlines\n  this.ddIndent   = -1; // indent of the current dd block (-1 if there isn't any)\n\n  this.level = 0;\n\n  // renderer\n  this.result = '';\n\n  // Create caches\n  // Generate markers.\n  s = this.src;\n  indent = 0;\n  indent_found = false;\n\n  for (start = pos = indent = 0, len = s.length; pos < len; pos++) {\n    ch = s.charCodeAt(pos);\n\n    if (!indent_found) {\n      if (ch === 0x20/* space */) {\n        indent++;\n        continue;\n      } else {\n        indent_found = true;\n      }\n    }\n\n    if (ch === 0x0A || pos === len - 1) {\n      if (ch !== 0x0A) { pos++; }\n      this.bMarks.push(start);\n      this.eMarks.push(pos);\n      this.tShift.push(indent);\n\n      indent_found = false;\n      indent = 0;\n      start = pos + 1;\n    }\n  }\n\n  // Push fake entry to simplify cache bounds checks\n  this.bMarks.push(s.length);\n  this.eMarks.push(s.length);\n  this.tShift.push(0);\n\n  this.lineMax = this.bMarks.length - 1; // don't count last fake line\n}\n\nStateBlock.prototype.isEmpty = function isEmpty(line) {\n  return this.bMarks[line] + this.tShift[line] >= this.eMarks[line];\n};\n\nStateBlock.prototype.skipEmptyLines = function skipEmptyLines(from) {\n  for (var max = this.lineMax; from < max; from++) {\n    if (this.bMarks[from] + this.tShift[from] < this.eMarks[from]) {\n      break;\n    }\n  }\n  return from;\n};\n\n// Skip spaces from given position.\nStateBlock.prototype.skipSpaces = function skipSpaces(pos) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== 0x20/* space */) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes from given position\nStateBlock.prototype.skipChars = function skipChars(pos, code) {\n  for (var max = this.src.length; pos < max; pos++) {\n    if (this.src.charCodeAt(pos) !== code) { break; }\n  }\n  return pos;\n};\n\n// Skip char codes reverse from given position - 1\nStateBlock.prototype.skipCharsBack = function skipCharsBack(pos, code, min) {\n  if (pos <= min) { return pos; }\n\n  while (pos > min) {\n    if (code !== this.src.charCodeAt(--pos)) { return pos + 1; }\n  }\n  return pos;\n};\n\n// cut lines range from source.\nStateBlock.prototype.getLines = function getLines(begin, end, indent, keepLastLF) {\n  var i, first, last, queue, shift,\n      line = begin;\n\n  if (begin >= end) {\n    return '';\n  }\n\n  // Opt: don't use push queue for single line;\n  if (line + 1 === end) {\n    first = this.bMarks[line] + Math.min(this.tShift[line], indent);\n    last = keepLastLF ? this.eMarks[line] + 1 : this.eMarks[line];\n    return this.src.slice(first, last);\n  }\n\n  queue = new Array(end - begin);\n\n  for (i = 0; line < end; line++, i++) {\n    shift = this.tShift[line];\n    if (shift > indent) { shift = indent; }\n    if (shift < 0) { shift = 0; }\n\n    first = this.bMarks[line] + shift;\n\n    if (line + 1 < end || keepLastLF) {\n      // No need for bounds check because we have fake entry on tail.\n      last = this.eMarks[line] + 1;\n    } else {\n      last = this.eMarks[line];\n    }\n\n    queue[i] = this.src.slice(first, last);\n  }\n\n  return queue.join('');\n};\n\n// Code block (4 spaces padded)\n\nfunction code(state, startLine, endLine/*, silent*/) {\n  var nextLine, last;\n\n  if (state.tShift[startLine] - state.blkIndent < 4) { return false; }\n\n  last = nextLine = startLine + 1;\n\n  while (nextLine < endLine) {\n    if (state.isEmpty(nextLine)) {\n      nextLine++;\n      continue;\n    }\n    if (state.tShift[nextLine] - state.blkIndent >= 4) {\n      nextLine++;\n      last = nextLine;\n      continue;\n    }\n    break;\n  }\n\n  state.line = nextLine;\n  state.tokens.push({\n    type: 'code',\n    content: state.getLines(startLine, last, 4 + state.blkIndent, true),\n    block: true,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// fences (``` lang, ~~~ lang)\n\nfunction fences(state, startLine, endLine, silent) {\n  var marker, len, params, nextLine, mem,\n      haveEndMarker = false,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos + 3 > max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x7E/* ~ */ && marker !== 0x60 /* ` */) {\n    return false;\n  }\n\n  // scan marker length\n  mem = pos;\n  pos = state.skipChars(pos, marker);\n\n  len = pos - mem;\n\n  if (len < 3) { return false; }\n\n  params = state.src.slice(pos, max).trim();\n\n  if (params.indexOf('`') >= 0) { return false; }\n\n  // Since start is found, we can report success here in validation mode\n  if (silent) { return true; }\n\n  // search end of block\n  nextLine = startLine;\n\n  for (;;) {\n    nextLine++;\n    if (nextLine >= endLine) {\n      // unclosed block should be autoclosed by end of document.\n      // also block seems to be autoclosed by end of parent\n      break;\n    }\n\n    pos = mem = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos < max && state.tShift[nextLine] < state.blkIndent) {\n      // non-empty line with negative indent should stop the list:\n      // - ```\n      //  test\n      break;\n    }\n\n    if (state.src.charCodeAt(pos) !== marker) { continue; }\n\n    if (state.tShift[nextLine] - state.blkIndent >= 4) {\n      // closing fence should be indented less than 4 spaces\n      continue;\n    }\n\n    pos = state.skipChars(pos, marker);\n\n    // closing code fence must be at least as long as the opening one\n    if (pos - mem < len) { continue; }\n\n    // make sure tail has spaces only\n    pos = state.skipSpaces(pos);\n\n    if (pos < max) { continue; }\n\n    haveEndMarker = true;\n    // found!\n    break;\n  }\n\n  // If a fence has heading spaces, they should be removed from its inner block\n  len = state.tShift[startLine];\n\n  state.line = nextLine + (haveEndMarker ? 1 : 0);\n  state.tokens.push({\n    type: 'fence',\n    params: params,\n    content: state.getLines(startLine + 1, nextLine, len, true),\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// Block quotes\n\nfunction blockquote(state, startLine, endLine, silent) {\n  var nextLine, lastLineEmpty, oldTShift, oldBMarks, oldIndent, oldParentType, lines,\n      terminatorRules,\n      i, l, terminate,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos > max) { return false; }\n\n  // check the block quote marker\n  if (state.src.charCodeAt(pos++) !== 0x3E/* > */) { return false; }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // we know that it's going to be a valid blockquote,\n  // so no point trying to find the end of it in silent mode\n  if (silent) { return true; }\n\n  // skip one optional space after '>'\n  if (state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n  oldIndent = state.blkIndent;\n  state.blkIndent = 0;\n\n  oldBMarks = [ state.bMarks[startLine] ];\n  state.bMarks[startLine] = pos;\n\n  // check if we have an empty blockquote\n  pos = pos < max ? state.skipSpaces(pos) : pos;\n  lastLineEmpty = pos >= max;\n\n  oldTShift = [ state.tShift[startLine] ];\n  state.tShift[startLine] = pos - state.bMarks[startLine];\n\n  terminatorRules = state.parser.ruler.getRules('blockquote');\n\n  // Search the end of the block\n  //\n  // Block ends with either:\n  //  1. an empty line outside:\n  //     ```\n  //     > test\n  //\n  //     ```\n  //  2. an empty line inside:\n  //     ```\n  //     >\n  //     test\n  //     ```\n  //  3. another tag\n  //     ```\n  //     > test\n  //      - - -\n  //     ```\n  for (nextLine = startLine + 1; nextLine < endLine; nextLine++) {\n    pos = state.bMarks[nextLine] + state.tShift[nextLine];\n    max = state.eMarks[nextLine];\n\n    if (pos >= max) {\n      // Case 1: line is not inside the blockquote, and this line is empty.\n      break;\n    }\n\n    if (state.src.charCodeAt(pos++) === 0x3E/* > */) {\n      // This line is inside the blockquote.\n\n      // skip one optional space after '>'\n      if (state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n      oldBMarks.push(state.bMarks[nextLine]);\n      state.bMarks[nextLine] = pos;\n\n      pos = pos < max ? state.skipSpaces(pos) : pos;\n      lastLineEmpty = pos >= max;\n\n      oldTShift.push(state.tShift[nextLine]);\n      state.tShift[nextLine] = pos - state.bMarks[nextLine];\n      continue;\n    }\n\n    // Case 2: line is not inside the blockquote, and the last line was empty.\n    if (lastLineEmpty) { break; }\n\n    // Case 3: another tag found.\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    oldBMarks.push(state.bMarks[nextLine]);\n    oldTShift.push(state.tShift[nextLine]);\n\n    // A negative number means that this is a paragraph continuation;\n    //\n    // Any negative number will do the job here, but it's better for it\n    // to be large enough to make any bugs obvious.\n    state.tShift[nextLine] = -1337;\n  }\n\n  oldParentType = state.parentType;\n  state.parentType = 'blockquote';\n  state.tokens.push({\n    type: 'blockquote_open',\n    lines: lines = [ startLine, 0 ],\n    level: state.level++\n  });\n  state.parser.tokenize(state, startLine, nextLine);\n  state.tokens.push({\n    type: 'blockquote_close',\n    level: --state.level\n  });\n  state.parentType = oldParentType;\n  lines[1] = state.line;\n\n  // Restore original tShift; this might not be necessary since the parser\n  // has already been here, but just to make sure we can do that.\n  for (i = 0; i < oldTShift.length; i++) {\n    state.bMarks[i + startLine] = oldBMarks[i];\n    state.tShift[i + startLine] = oldTShift[i];\n  }\n  state.blkIndent = oldIndent;\n\n  return true;\n}\n\n// Horizontal rule\n\nfunction hr(state, startLine, endLine, silent) {\n  var marker, cnt, ch,\n      pos = state.bMarks[startLine],\n      max = state.eMarks[startLine];\n\n  pos += state.tShift[startLine];\n\n  if (pos > max) { return false; }\n\n  marker = state.src.charCodeAt(pos++);\n\n  // Check hr marker\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x5F/* _ */) {\n    return false;\n  }\n\n  // markers can be mixed with spaces, but there should be at least 3 one\n\n  cnt = 1;\n  while (pos < max) {\n    ch = state.src.charCodeAt(pos++);\n    if (ch !== marker && ch !== 0x20/* space */) { return false; }\n    if (ch === marker) { cnt++; }\n  }\n\n  if (cnt < 3) { return false; }\n\n  if (silent) { return true; }\n\n  state.line = startLine + 1;\n  state.tokens.push({\n    type: 'hr',\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  return true;\n}\n\n// Lists\n\n// Search `[-+*][\\n ]`, returns next pos arter marker on success\n// or -1 on fail.\nfunction skipBulletListMarker(state, startLine) {\n  var marker, pos, max;\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n  max = state.eMarks[startLine];\n\n  if (pos >= max) { return -1; }\n\n  marker = state.src.charCodeAt(pos++);\n  // Check bullet\n  if (marker !== 0x2A/* * */ &&\n      marker !== 0x2D/* - */ &&\n      marker !== 0x2B/* + */) {\n    return -1;\n  }\n\n  if (pos < max && state.src.charCodeAt(pos) !== 0x20) {\n    // \" 1.test \" - is not a list item\n    return -1;\n  }\n\n  return pos;\n}\n\n// Search `\\d+[.)][\\n ]`, returns next pos arter marker on success\n// or -1 on fail.\nfunction skipOrderedListMarker(state, startLine) {\n  var ch,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos + 1 >= max) { return -1; }\n\n  ch = state.src.charCodeAt(pos++);\n\n  if (ch < 0x30/* 0 */ || ch > 0x39/* 9 */) { return -1; }\n\n  for (;;) {\n    // EOL -> fail\n    if (pos >= max) { return -1; }\n\n    ch = state.src.charCodeAt(pos++);\n\n    if (ch >= 0x30/* 0 */ && ch <= 0x39/* 9 */) {\n      continue;\n    }\n\n    // found valid marker\n    if (ch === 0x29/* ) */ || ch === 0x2e/* . */) {\n      break;\n    }\n\n    return -1;\n  }\n\n\n  if (pos < max && state.src.charCodeAt(pos) !== 0x20/* space */) {\n    // \" 1.test \" - is not a list item\n    return -1;\n  }\n  return pos;\n}\n\nfunction markTightParagraphs(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].tight = true;\n      state.tokens[i].tight = true;\n      i += 2;\n    }\n  }\n}\n\n\nfunction list(state, startLine, endLine, silent) {\n  var nextLine,\n      indent,\n      oldTShift,\n      oldIndent,\n      oldTight,\n      oldParentType,\n      start,\n      posAfterMarker,\n      max,\n      indentAfterMarker,\n      markerValue,\n      markerCharCode,\n      isOrdered,\n      contentStart,\n      listTokIdx,\n      prevEmptyEnd,\n      listLines,\n      itemLines,\n      tight = true,\n      terminatorRules,\n      i, l, terminate;\n\n  // Detect list type and position after marker\n  if ((posAfterMarker = skipOrderedListMarker(state, startLine)) >= 0) {\n    isOrdered = true;\n  } else if ((posAfterMarker = skipBulletListMarker(state, startLine)) >= 0) {\n    isOrdered = false;\n  } else {\n    return false;\n  }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // We should terminate list on style change. Remember first one to compare.\n  markerCharCode = state.src.charCodeAt(posAfterMarker - 1);\n\n  // For validation mode we can terminate immediately\n  if (silent) { return true; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  if (isOrdered) {\n    start = state.bMarks[startLine] + state.tShift[startLine];\n    markerValue = Number(state.src.substr(start, posAfterMarker - start - 1));\n\n    state.tokens.push({\n      type: 'ordered_list_open',\n      order: markerValue,\n      lines: listLines = [ startLine, 0 ],\n      level: state.level++\n    });\n\n  } else {\n    state.tokens.push({\n      type: 'bullet_list_open',\n      lines: listLines = [ startLine, 0 ],\n      level: state.level++\n    });\n  }\n\n  //\n  // Iterate list items\n  //\n\n  nextLine = startLine;\n  prevEmptyEnd = false;\n  terminatorRules = state.parser.ruler.getRules('list');\n\n  while (nextLine < endLine) {\n    contentStart = state.skipSpaces(posAfterMarker);\n    max = state.eMarks[nextLine];\n\n    if (contentStart >= max) {\n      // trimming space in \"-    \\n  3\" case, indent is 1 here\n      indentAfterMarker = 1;\n    } else {\n      indentAfterMarker = contentStart - posAfterMarker;\n    }\n\n    // If we have more than 4 spaces, the indent is 1\n    // (the rest is just indented code block)\n    if (indentAfterMarker > 4) { indentAfterMarker = 1; }\n\n    // If indent is less than 1, assume that it's one, example:\n    //  \"-\\n  test\"\n    if (indentAfterMarker < 1) { indentAfterMarker = 1; }\n\n    // \"  -  test\"\n    //  ^^^^^ - calculating total length of this thing\n    indent = (posAfterMarker - state.bMarks[nextLine]) + indentAfterMarker;\n\n    // Run subparser & write tokens\n    state.tokens.push({\n      type: 'list_item_open',\n      lines: itemLines = [ startLine, 0 ],\n      level: state.level++\n    });\n\n    oldIndent = state.blkIndent;\n    oldTight = state.tight;\n    oldTShift = state.tShift[startLine];\n    oldParentType = state.parentType;\n    state.tShift[startLine] = contentStart - state.bMarks[startLine];\n    state.blkIndent = indent;\n    state.tight = true;\n    state.parentType = 'list';\n\n    state.parser.tokenize(state, startLine, endLine, true);\n\n    // If any of list item is tight, mark list as tight\n    if (!state.tight || prevEmptyEnd) {\n      tight = false;\n    }\n    // Item become loose if finish with empty line,\n    // but we should filter last element, because it means list finish\n    prevEmptyEnd = (state.line - startLine) > 1 && state.isEmpty(state.line - 1);\n\n    state.blkIndent = oldIndent;\n    state.tShift[startLine] = oldTShift;\n    state.tight = oldTight;\n    state.parentType = oldParentType;\n\n    state.tokens.push({\n      type: 'list_item_close',\n      level: --state.level\n    });\n\n    nextLine = startLine = state.line;\n    itemLines[1] = nextLine;\n    contentStart = state.bMarks[startLine];\n\n    if (nextLine >= endLine) { break; }\n\n    if (state.isEmpty(nextLine)) {\n      break;\n    }\n\n    //\n    // Try to check if list is terminated or continued.\n    //\n    if (state.tShift[nextLine] < state.blkIndent) { break; }\n\n    // fail if terminating block found\n    terminate = false;\n    for (i = 0, l = terminatorRules.length; i < l; i++) {\n      if (terminatorRules[i](state, nextLine, endLine, true)) {\n        terminate = true;\n        break;\n      }\n    }\n    if (terminate) { break; }\n\n    // fail if list has another type\n    if (isOrdered) {\n      posAfterMarker = skipOrderedListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    } else {\n      posAfterMarker = skipBulletListMarker(state, nextLine);\n      if (posAfterMarker < 0) { break; }\n    }\n\n    if (markerCharCode !== state.src.charCodeAt(posAfterMarker - 1)) { break; }\n  }\n\n  // Finilize list\n  state.tokens.push({\n    type: isOrdered ? 'ordered_list_close' : 'bullet_list_close',\n    level: --state.level\n  });\n  listLines[1] = nextLine;\n\n  state.line = nextLine;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs(state, listTokIdx);\n  }\n\n  return true;\n}\n\n// Process footnote reference list\n\nfunction footnote(state, startLine, endLine, silent) {\n  var oldBMark, oldTShift, oldParentType, pos, label,\n      start = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  // line should be at least 5 chars - \"[^x]:\"\n  if (start + 4 > max) { return false; }\n\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos + 1 >= max || state.src.charCodeAt(++pos) !== 0x3A /* : */) { return false; }\n  if (silent) { return true; }\n  pos++;\n\n  if (!state.env.footnotes) { state.env.footnotes = {}; }\n  if (!state.env.footnotes.refs) { state.env.footnotes.refs = {}; }\n  label = state.src.slice(start + 2, pos - 2);\n  state.env.footnotes.refs[':' + label] = -1;\n\n  state.tokens.push({\n    type: 'footnote_reference_open',\n    label: label,\n    level: state.level++\n  });\n\n  oldBMark = state.bMarks[startLine];\n  oldTShift = state.tShift[startLine];\n  oldParentType = state.parentType;\n  state.tShift[startLine] = state.skipSpaces(pos) - pos;\n  state.bMarks[startLine] = pos;\n  state.blkIndent += 4;\n  state.parentType = 'footnote';\n\n  if (state.tShift[startLine] < state.blkIndent) {\n    state.tShift[startLine] += state.blkIndent;\n    state.bMarks[startLine] -= state.blkIndent;\n  }\n\n  state.parser.tokenize(state, startLine, endLine, true);\n\n  state.parentType = oldParentType;\n  state.blkIndent -= 4;\n  state.tShift[startLine] = oldTShift;\n  state.bMarks[startLine] = oldBMark;\n\n  state.tokens.push({\n    type: 'footnote_reference_close',\n    level: --state.level\n  });\n\n  return true;\n}\n\n// heading (#, ##, ...)\n\nfunction heading(state, startLine, endLine, silent) {\n  var ch, level, tmp,\n      pos = state.bMarks[startLine] + state.tShift[startLine],\n      max = state.eMarks[startLine];\n\n  if (pos >= max) { return false; }\n\n  ch  = state.src.charCodeAt(pos);\n\n  if (ch !== 0x23/* # */ || pos >= max) { return false; }\n\n  // count heading level\n  level = 1;\n  ch = state.src.charCodeAt(++pos);\n  while (ch === 0x23/* # */ && pos < max && level <= 6) {\n    level++;\n    ch = state.src.charCodeAt(++pos);\n  }\n\n  if (level > 6 || (pos < max && ch !== 0x20/* space */)) { return false; }\n\n  if (silent) { return true; }\n\n  // Let's cut tails like '    ###  ' from the end of string\n\n  max = state.skipCharsBack(max, 0x20, pos); // space\n  tmp = state.skipCharsBack(max, 0x23, pos); // #\n  if (tmp > pos && state.src.charCodeAt(tmp - 1) === 0x20/* space */) {\n    max = tmp;\n  }\n\n  state.line = startLine + 1;\n\n  state.tokens.push({ type: 'heading_open',\n    hLevel: level,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n\n  // only if header is not empty\n  if (pos < max) {\n    state.tokens.push({\n      type: 'inline',\n      content: state.src.slice(pos, max).trim(),\n      level: state.level + 1,\n      lines: [ startLine, state.line ],\n      children: []\n    });\n  }\n  state.tokens.push({ type: 'heading_close', hLevel: level, level: state.level });\n\n  return true;\n}\n\n// lheading (---, ===)\n\nfunction lheading(state, startLine, endLine/*, silent*/) {\n  var marker, pos, max,\n      next = startLine + 1;\n\n  if (next >= endLine) { return false; }\n  if (state.tShift[next] < state.blkIndent) { return false; }\n\n  // Scan next line\n\n  if (state.tShift[next] - state.blkIndent > 3) { return false; }\n\n  pos = state.bMarks[next] + state.tShift[next];\n  max = state.eMarks[next];\n\n  if (pos >= max) { return false; }\n\n  marker = state.src.charCodeAt(pos);\n\n  if (marker !== 0x2D/* - */ && marker !== 0x3D/* = */) { return false; }\n\n  pos = state.skipChars(pos, marker);\n\n  pos = state.skipSpaces(pos);\n\n  if (pos < max) { return false; }\n\n  pos = state.bMarks[startLine] + state.tShift[startLine];\n\n  state.line = next + 1;\n  state.tokens.push({\n    type: 'heading_open',\n    hLevel: marker === 0x3D/* = */ ? 1 : 2,\n    lines: [ startLine, state.line ],\n    level: state.level\n  });\n  state.tokens.push({\n    type: 'inline',\n    content: state.src.slice(pos, state.eMarks[startLine]).trim(),\n    level: state.level + 1,\n    lines: [ startLine, state.line - 1 ],\n    children: []\n  });\n  state.tokens.push({\n    type: 'heading_close',\n    hLevel: marker === 0x3D/* = */ ? 1 : 2,\n    level: state.level\n  });\n\n  return true;\n}\n\n// List of valid html blocks names, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#html-blocks\n\nvar html_blocks = {};\n\n[\n  'article',\n  'aside',\n  'button',\n  'blockquote',\n  'body',\n  'canvas',\n  'caption',\n  'col',\n  'colgroup',\n  'dd',\n  'div',\n  'dl',\n  'dt',\n  'embed',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'header',\n  'hgroup',\n  'hr',\n  'iframe',\n  'li',\n  'map',\n  'object',\n  'ol',\n  'output',\n  'p',\n  'pre',\n  'progress',\n  'script',\n  'section',\n  'style',\n  'table',\n  'tbody',\n  'td',\n  'textarea',\n  'tfoot',\n  'th',\n  'tr',\n  'thead',\n  'ul',\n  'video'\n].forEach(function (name) { html_blocks[name] = true; });\n\n// HTML block\n\n\nvar HTML_TAG_OPEN_RE = /^<([a-zA-Z]{1,15})[\\s\\/>]/;\nvar HTML_TAG_CLOSE_RE = /^<\\/([a-zA-Z]{1,15})[\\s>]/;\n\nfunction isLetter$1(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\nfunction htmlblock(state, startLine, endLine, silent) {\n  var ch, match, nextLine,\n      pos = state.bMarks[startLine],\n      max = state.eMarks[startLine],\n      shift = state.tShift[startLine];\n\n  pos += shift;\n\n  if (!state.options.html) { return false; }\n\n  if (shift > 3 || pos + 2 >= max) { return false; }\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  ch = state.src.charCodeAt(pos + 1);\n\n  if (ch === 0x21/* ! */ || ch === 0x3F/* ? */) {\n    // Directive start / comment start / processing instruction start\n    if (silent) { return true; }\n\n  } else if (ch === 0x2F/* / */ || isLetter$1(ch)) {\n\n    // Probably start or end of tag\n    if (ch === 0x2F/* \\ */) {\n      // closing tag\n      match = state.src.slice(pos, max).match(HTML_TAG_CLOSE_RE);\n      if (!match) { return false; }\n    } else {\n      // opening tag\n      match = state.src.slice(pos, max).match(HTML_TAG_OPEN_RE);\n      if (!match) { return false; }\n    }\n    // Make sure tag name is valid\n    if (html_blocks[match[1].toLowerCase()] !== true) { return false; }\n    if (silent) { return true; }\n\n  } else {\n    return false;\n  }\n\n  // If we are here - we detected HTML block.\n  // Let's roll down till empty line (block end).\n  nextLine = startLine + 1;\n  while (nextLine < state.lineMax && !state.isEmpty(nextLine)) {\n    nextLine++;\n  }\n\n  state.line = nextLine;\n  state.tokens.push({\n    type: 'htmlblock',\n    level: state.level,\n    lines: [ startLine, state.line ],\n    content: state.getLines(startLine, nextLine, 0, true)\n  });\n\n  return true;\n}\n\n// GFM table, non-standard\n\nfunction getLine(state, line) {\n  var pos = state.bMarks[line] + state.blkIndent,\n      max = state.eMarks[line];\n\n  return state.src.substr(pos, max - pos);\n}\n\nfunction table(state, startLine, endLine, silent) {\n  var ch, lineText, pos, i, nextLine, rows, cell,\n      aligns, t, tableLines, tbodyLines;\n\n  // should have at least three lines\n  if (startLine + 2 > endLine) { return false; }\n\n  nextLine = startLine + 1;\n\n  if (state.tShift[nextLine] < state.blkIndent) { return false; }\n\n  // first character of the second line should be '|' or '-'\n\n  pos = state.bMarks[nextLine] + state.tShift[nextLine];\n  if (pos >= state.eMarks[nextLine]) { return false; }\n\n  ch = state.src.charCodeAt(pos);\n  if (ch !== 0x7C/* | */ && ch !== 0x2D/* - */ && ch !== 0x3A/* : */) { return false; }\n\n  lineText = getLine(state, startLine + 1);\n  if (!/^[-:| ]+$/.test(lineText)) { return false; }\n\n  rows = lineText.split('|');\n  if (rows <= 2) { return false; }\n  aligns = [];\n  for (i = 0; i < rows.length; i++) {\n    t = rows[i].trim();\n    if (!t) {\n      // allow empty columns before and after table, but not in between columns;\n      // e.g. allow ` |---| `, disallow ` ---||--- `\n      if (i === 0 || i === rows.length - 1) {\n        continue;\n      } else {\n        return false;\n      }\n    }\n\n    if (!/^:?-+:?$/.test(t)) { return false; }\n    if (t.charCodeAt(t.length - 1) === 0x3A/* : */) {\n      aligns.push(t.charCodeAt(0) === 0x3A/* : */ ? 'center' : 'right');\n    } else if (t.charCodeAt(0) === 0x3A/* : */) {\n      aligns.push('left');\n    } else {\n      aligns.push('');\n    }\n  }\n\n  lineText = getLine(state, startLine).trim();\n  if (lineText.indexOf('|') === -1) { return false; }\n  rows = lineText.replace(/^\\||\\|$/g, '').split('|');\n  if (aligns.length !== rows.length) { return false; }\n  if (silent) { return true; }\n\n  state.tokens.push({\n    type: 'table_open',\n    lines: tableLines = [ startLine, 0 ],\n    level: state.level++\n  });\n  state.tokens.push({\n    type: 'thead_open',\n    lines: [ startLine, startLine + 1 ],\n    level: state.level++\n  });\n\n  state.tokens.push({\n    type: 'tr_open',\n    lines: [ startLine, startLine + 1 ],\n    level: state.level++\n  });\n  for (i = 0; i < rows.length; i++) {\n    state.tokens.push({\n      type: 'th_open',\n      align: aligns[i],\n      lines: [ startLine, startLine + 1 ],\n      level: state.level++\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: rows[i].trim(),\n      lines: [ startLine, startLine + 1 ],\n      level: state.level,\n      children: []\n    });\n    state.tokens.push({ type: 'th_close', level: --state.level });\n  }\n  state.tokens.push({ type: 'tr_close', level: --state.level });\n  state.tokens.push({ type: 'thead_close', level: --state.level });\n\n  state.tokens.push({\n    type: 'tbody_open',\n    lines: tbodyLines = [ startLine + 2, 0 ],\n    level: state.level++\n  });\n\n  for (nextLine = startLine + 2; nextLine < endLine; nextLine++) {\n    if (state.tShift[nextLine] < state.blkIndent) { break; }\n\n    lineText = getLine(state, nextLine).trim();\n    if (lineText.indexOf('|') === -1) { break; }\n    rows = lineText.replace(/^\\||\\|$/g, '').split('|');\n\n    state.tokens.push({ type: 'tr_open', level: state.level++ });\n    for (i = 0; i < rows.length; i++) {\n      state.tokens.push({ type: 'td_open', align: aligns[i], level: state.level++ });\n      // 0x7c === '|'\n      cell = rows[i].substring(\n          rows[i].charCodeAt(0) === 0x7c ? 1 : 0,\n          rows[i].charCodeAt(rows[i].length - 1) === 0x7c ? rows[i].length - 1 : rows[i].length\n      ).trim();\n      state.tokens.push({\n        type: 'inline',\n        content: cell,\n        level: state.level,\n        children: []\n      });\n      state.tokens.push({ type: 'td_close', level: --state.level });\n    }\n    state.tokens.push({ type: 'tr_close', level: --state.level });\n  }\n  state.tokens.push({ type: 'tbody_close', level: --state.level });\n  state.tokens.push({ type: 'table_close', level: --state.level });\n\n  tableLines[1] = tbodyLines[1] = nextLine;\n  state.line = nextLine;\n  return true;\n}\n\n// Definition lists\n\n// Search `[:~][\\n ]`, returns next pos after marker on success\n// or -1 on fail.\nfunction skipMarker(state, line) {\n  var pos, marker,\n      start = state.bMarks[line] + state.tShift[line],\n      max = state.eMarks[line];\n\n  if (start >= max) { return -1; }\n\n  // Check bullet\n  marker = state.src.charCodeAt(start++);\n  if (marker !== 0x7E/* ~ */ && marker !== 0x3A/* : */) { return -1; }\n\n  pos = state.skipSpaces(start);\n\n  // require space after \":\"\n  if (start === pos) { return -1; }\n\n  // no empty definitions, e.g. \"  : \"\n  if (pos >= max) { return -1; }\n\n  return pos;\n}\n\nfunction markTightParagraphs$1(state, idx) {\n  var i, l,\n      level = state.level + 2;\n\n  for (i = idx + 2, l = state.tokens.length - 2; i < l; i++) {\n    if (state.tokens[i].level === level && state.tokens[i].type === 'paragraph_open') {\n      state.tokens[i + 2].tight = true;\n      state.tokens[i].tight = true;\n      i += 2;\n    }\n  }\n}\n\nfunction deflist(state, startLine, endLine, silent) {\n  var contentStart,\n      ddLine,\n      dtLine,\n      itemLines,\n      listLines,\n      listTokIdx,\n      nextLine,\n      oldIndent,\n      oldDDIndent,\n      oldParentType,\n      oldTShift,\n      oldTight,\n      prevEmptyEnd,\n      tight;\n\n  if (silent) {\n    // quirk: validation mode validates a dd block only, not a whole deflist\n    if (state.ddIndent < 0) { return false; }\n    return skipMarker(state, startLine) >= 0;\n  }\n\n  nextLine = startLine + 1;\n  if (state.isEmpty(nextLine)) {\n    if (++nextLine > endLine) { return false; }\n  }\n\n  if (state.tShift[nextLine] < state.blkIndent) { return false; }\n  contentStart = skipMarker(state, nextLine);\n  if (contentStart < 0) { return false; }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  // Start list\n  listTokIdx = state.tokens.length;\n\n  state.tokens.push({\n    type: 'dl_open',\n    lines: listLines = [ startLine, 0 ],\n    level: state.level++\n  });\n\n  //\n  // Iterate list items\n  //\n\n  dtLine = startLine;\n  ddLine = nextLine;\n\n  // One definition list can contain multiple DTs,\n  // and one DT can be followed by multiple DDs.\n  //\n  // Thus, there is two loops here, and label is\n  // needed to break out of the second one\n  //\n  /*eslint no-labels:0,block-scoped-var:0*/\n  OUTER:\n  for (;;) {\n    tight = true;\n    prevEmptyEnd = false;\n\n    state.tokens.push({\n      type: 'dt_open',\n      lines: [ dtLine, dtLine ],\n      level: state.level++\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: state.getLines(dtLine, dtLine + 1, state.blkIndent, false).trim(),\n      level: state.level + 1,\n      lines: [ dtLine, dtLine ],\n      children: []\n    });\n    state.tokens.push({\n      type: 'dt_close',\n      level: --state.level\n    });\n\n    for (;;) {\n      state.tokens.push({\n        type: 'dd_open',\n        lines: itemLines = [ nextLine, 0 ],\n        level: state.level++\n      });\n\n      oldTight = state.tight;\n      oldDDIndent = state.ddIndent;\n      oldIndent = state.blkIndent;\n      oldTShift = state.tShift[ddLine];\n      oldParentType = state.parentType;\n      state.blkIndent = state.ddIndent = state.tShift[ddLine] + 2;\n      state.tShift[ddLine] = contentStart - state.bMarks[ddLine];\n      state.tight = true;\n      state.parentType = 'deflist';\n\n      state.parser.tokenize(state, ddLine, endLine, true);\n\n      // If any of list item is tight, mark list as tight\n      if (!state.tight || prevEmptyEnd) {\n        tight = false;\n      }\n      // Item become loose if finish with empty line,\n      // but we should filter last element, because it means list finish\n      prevEmptyEnd = (state.line - ddLine) > 1 && state.isEmpty(state.line - 1);\n\n      state.tShift[ddLine] = oldTShift;\n      state.tight = oldTight;\n      state.parentType = oldParentType;\n      state.blkIndent = oldIndent;\n      state.ddIndent = oldDDIndent;\n\n      state.tokens.push({\n        type: 'dd_close',\n        level: --state.level\n      });\n\n      itemLines[1] = nextLine = state.line;\n\n      if (nextLine >= endLine) { break OUTER; }\n\n      if (state.tShift[nextLine] < state.blkIndent) { break OUTER; }\n      contentStart = skipMarker(state, nextLine);\n      if (contentStart < 0) { break; }\n\n      ddLine = nextLine;\n\n      // go to the next loop iteration:\n      // insert DD tag and repeat checking\n    }\n\n    if (nextLine >= endLine) { break; }\n    dtLine = nextLine;\n\n    if (state.isEmpty(dtLine)) { break; }\n    if (state.tShift[dtLine] < state.blkIndent) { break; }\n\n    ddLine = dtLine + 1;\n    if (ddLine >= endLine) { break; }\n    if (state.isEmpty(ddLine)) { ddLine++; }\n    if (ddLine >= endLine) { break; }\n\n    if (state.tShift[ddLine] < state.blkIndent) { break; }\n    contentStart = skipMarker(state, ddLine);\n    if (contentStart < 0) { break; }\n\n    // go to the next loop iteration:\n    // insert DT and DD tags and repeat checking\n  }\n\n  // Finilize list\n  state.tokens.push({\n    type: 'dl_close',\n    level: --state.level\n  });\n  listLines[1] = nextLine;\n\n  state.line = nextLine;\n\n  // mark paragraphs tight if needed\n  if (tight) {\n    markTightParagraphs$1(state, listTokIdx);\n  }\n\n  return true;\n}\n\n// Paragraph\n\nfunction paragraph(state, startLine/*, endLine*/) {\n  var endLine, content, terminate, i, l,\n      nextLine = startLine + 1,\n      terminatorRules;\n\n  endLine = state.lineMax;\n\n  // jump line-by-line until empty one or EOF\n  if (nextLine < endLine && !state.isEmpty(nextLine)) {\n    terminatorRules = state.parser.ruler.getRules('paragraph');\n\n    for (; nextLine < endLine && !state.isEmpty(nextLine); nextLine++) {\n      // this would be a code block normally, but after paragraph\n      // it's considered a lazy continuation regardless of what's there\n      if (state.tShift[nextLine] - state.blkIndent > 3) { continue; }\n\n      // Some tags can terminate paragraph without empty line.\n      terminate = false;\n      for (i = 0, l = terminatorRules.length; i < l; i++) {\n        if (terminatorRules[i](state, nextLine, endLine, true)) {\n          terminate = true;\n          break;\n        }\n      }\n      if (terminate) { break; }\n    }\n  }\n\n  content = state.getLines(startLine, nextLine, state.blkIndent, false).trim();\n\n  state.line = nextLine;\n  if (content.length) {\n    state.tokens.push({\n      type: 'paragraph_open',\n      tight: false,\n      lines: [ startLine, state.line ],\n      level: state.level\n    });\n    state.tokens.push({\n      type: 'inline',\n      content: content,\n      level: state.level + 1,\n      lines: [ startLine, state.line ],\n      children: []\n    });\n    state.tokens.push({\n      type: 'paragraph_close',\n      tight: false,\n      level: state.level\n    });\n  }\n\n  return true;\n}\n\n/**\n * Parser rules\n */\n\nvar _rules$1 = [\n  [ 'code',       code ],\n  [ 'fences',     fences,     [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'blockquote', blockquote, [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'hr',         hr,         [ 'paragraph', 'blockquote', 'list' ] ],\n  [ 'list',       list,       [ 'paragraph', 'blockquote' ] ],\n  [ 'footnote',   footnote,   [ 'paragraph' ] ],\n  [ 'heading',    heading,    [ 'paragraph', 'blockquote' ] ],\n  [ 'lheading',   lheading ],\n  [ 'htmlblock',  htmlblock,  [ 'paragraph', 'blockquote' ] ],\n  [ 'table',      table,      [ 'paragraph' ] ],\n  [ 'deflist',    deflist,    [ 'paragraph' ] ],\n  [ 'paragraph',  paragraph ]\n];\n\n/**\n * Block Parser class\n *\n * @api private\n */\n\nfunction ParserBlock() {\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules$1.length; i++) {\n    this.ruler.push(_rules$1[i][0], _rules$1[i][1], {\n      alt: (_rules$1[i][2] || []).slice()\n    });\n  }\n}\n\n/**\n * Generate tokens for the given input range.\n *\n * @param  {Object} `state` Has properties like `src`, `parser`, `options` etc\n * @param  {Number} `startLine`\n * @param  {Number} `endLine`\n * @api private\n */\n\nParserBlock.prototype.tokenize = function (state, startLine, endLine) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var line = startLine;\n  var hasEmptyLines = false;\n  var ok, i;\n\n  while (line < endLine) {\n    state.line = line = state.skipEmptyLines(line);\n    if (line >= endLine) {\n      break;\n    }\n\n    // Termination condition for nested calls.\n    // Nested calls currently used for blockquotes & lists\n    if (state.tShift[line] < state.blkIndent) {\n      break;\n    }\n\n    // Try all possible rules.\n    // On success, rule should:\n    //\n    // - update `state.line`\n    // - update `state.tokens`\n    // - return true\n\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, line, endLine, false);\n      if (ok) {\n        break;\n      }\n    }\n\n    // set state.tight iff we had an empty line before current tag\n    // i.e. latest empty line should not count\n    state.tight = !hasEmptyLines;\n\n    // paragraph might \"eat\" one newline after it in nested lists\n    if (state.isEmpty(state.line - 1)) {\n      hasEmptyLines = true;\n    }\n\n    line = state.line;\n\n    if (line < endLine && state.isEmpty(line)) {\n      hasEmptyLines = true;\n      line++;\n\n      // two empty lines should stop the parser in list mode\n      if (line < endLine && state.parentType === 'list' && state.isEmpty(line)) { break; }\n      state.line = line;\n    }\n  }\n};\n\nvar TABS_SCAN_RE = /[\\n\\t]/g;\nvar NEWLINES_RE  = /\\r[\\n\\u0085]|[\\u2424\\u2028\\u0085]/g;\nvar SPACES_RE    = /\\u00a0/g;\n\n/**\n * Tokenize the given `str`.\n *\n * @param  {String} `str` Source string\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @param  {Array} `outTokens`\n * @api private\n */\n\nParserBlock.prototype.parse = function (str, options, env, outTokens) {\n  var state, lineStart = 0, lastTabPos = 0;\n  if (!str) { return []; }\n\n  // Normalize spaces\n  str = str.replace(SPACES_RE, ' ');\n\n  // Normalize newlines\n  str = str.replace(NEWLINES_RE, '\\n');\n\n  // Replace tabs with proper number of spaces (1..4)\n  if (str.indexOf('\\t') >= 0) {\n    str = str.replace(TABS_SCAN_RE, function (match, offset) {\n      var result;\n      if (str.charCodeAt(offset) === 0x0A) {\n        lineStart = offset + 1;\n        lastTabPos = 0;\n        return match;\n      }\n      result = '    '.slice((offset - lineStart - lastTabPos) % 4);\n      lastTabPos = offset - lineStart + 1;\n      return result;\n    });\n  }\n\n  state = new StateBlock(str, this, options, env, outTokens);\n  this.tokenize(state, state.line, state.lineMax);\n};\n\n// Skip text characters for text token, place those to pending buffer\n// and increment current pos\n\n// Rule to skip pure text\n// '{}$%@~+=:' reserved for extentions\n\nfunction isTerminatorChar(ch) {\n  switch (ch) {\n    case 0x0A/* \\n */:\n    case 0x5C/* \\ */:\n    case 0x60/* ` */:\n    case 0x2A/* * */:\n    case 0x5F/* _ */:\n    case 0x5E/* ^ */:\n    case 0x5B/* [ */:\n    case 0x5D/* ] */:\n    case 0x21/* ! */:\n    case 0x26/* & */:\n    case 0x3C/* < */:\n    case 0x3E/* > */:\n    case 0x7B/* { */:\n    case 0x7D/* } */:\n    case 0x24/* $ */:\n    case 0x25/* % */:\n    case 0x40/* @ */:\n    case 0x7E/* ~ */:\n    case 0x2B/* + */:\n    case 0x3D/* = */:\n    case 0x3A/* : */:\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction text(state, silent) {\n  var pos = state.pos;\n\n  while (pos < state.posMax && !isTerminatorChar(state.src.charCodeAt(pos))) {\n    pos++;\n  }\n\n  if (pos === state.pos) { return false; }\n\n  if (!silent) { state.pending += state.src.slice(state.pos, pos); }\n\n  state.pos = pos;\n\n  return true;\n}\n\n// Proceess '\\n'\n\nfunction newline(state, silent) {\n  var pmax, max, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x0A/* \\n */) { return false; }\n\n  pmax = state.pending.length - 1;\n  max = state.posMax;\n\n  // '  \\n' -> hardbreak\n  // Lookup in pending chars is bad practice! Don't copy to other rules!\n  // Pending string is stored in concat mode, indexed lookups will cause\n  // convertion to flat mode.\n  if (!silent) {\n    if (pmax >= 0 && state.pending.charCodeAt(pmax) === 0x20) {\n      if (pmax >= 1 && state.pending.charCodeAt(pmax - 1) === 0x20) {\n        // Strip out all trailing spaces on this line.\n        for (var i = pmax - 2; i >= 0; i--) {\n          if (state.pending.charCodeAt(i) !== 0x20) {\n            state.pending = state.pending.substring(0, i + 1);\n            break;\n          }\n        }\n        state.push({\n          type: 'hardbreak',\n          level: state.level\n        });\n      } else {\n        state.pending = state.pending.slice(0, -1);\n        state.push({\n          type: 'softbreak',\n          level: state.level\n        });\n      }\n\n    } else {\n      state.push({\n        type: 'softbreak',\n        level: state.level\n      });\n    }\n  }\n\n  pos++;\n\n  // skip heading spaces for next line\n  while (pos < max && state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n  state.pos = pos;\n  return true;\n}\n\n// Proceess escaped chars and hardbreaks\n\nvar ESCAPED = [];\n\nfor (var i = 0; i < 256; i++) { ESCAPED.push(0); }\n\n'\\\\!\"#$%&\\'()*+,./:;<=>?@[]^_`{|}~-'\n  .split('').forEach(function(ch) { ESCAPED[ch.charCodeAt(0)] = 1; });\n\n\nfunction escape(state, silent) {\n  var ch, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x5C/* \\ */) { return false; }\n\n  pos++;\n\n  if (pos < max) {\n    ch = state.src.charCodeAt(pos);\n\n    if (ch < 256 && ESCAPED[ch] !== 0) {\n      if (!silent) { state.pending += state.src[pos]; }\n      state.pos += 2;\n      return true;\n    }\n\n    if (ch === 0x0A) {\n      if (!silent) {\n        state.push({\n          type: 'hardbreak',\n          level: state.level\n        });\n      }\n\n      pos++;\n      // skip leading whitespaces from next line\n      while (pos < max && state.src.charCodeAt(pos) === 0x20) { pos++; }\n\n      state.pos = pos;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += '\\\\'; }\n  state.pos++;\n  return true;\n}\n\n// Parse backticks\n\nfunction backticks(state, silent) {\n  var start, max, marker, matchStart, matchEnd,\n      pos = state.pos,\n      ch = state.src.charCodeAt(pos);\n\n  if (ch !== 0x60/* ` */) { return false; }\n\n  start = pos;\n  pos++;\n  max = state.posMax;\n\n  while (pos < max && state.src.charCodeAt(pos) === 0x60/* ` */) { pos++; }\n\n  marker = state.src.slice(start, pos);\n\n  matchStart = matchEnd = pos;\n\n  while ((matchStart = state.src.indexOf('`', matchEnd)) !== -1) {\n    matchEnd = matchStart + 1;\n\n    while (matchEnd < max && state.src.charCodeAt(matchEnd) === 0x60/* ` */) { matchEnd++; }\n\n    if (matchEnd - matchStart === marker.length) {\n      if (!silent) {\n        state.push({\n          type: 'code',\n          content: state.src.slice(pos, matchStart)\n                              .replace(/[ \\n]+/g, ' ')\n                              .trim(),\n          block: false,\n          level: state.level\n        });\n      }\n      state.pos = matchEnd;\n      return true;\n    }\n  }\n\n  if (!silent) { state.pending += marker; }\n  state.pos += marker.length;\n  return true;\n}\n\n// Process ~~deleted text~~\n\nfunction del(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x7E/* ~ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x7E/* ~ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x7E/* ~ */) { return false; }\n  if (nextChar === 0x7E/* ~ */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x7E/* ~ */) { pos++; }\n  if (pos > start + 3) {\n    // sequence of 4+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x7E/* ~ */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x7E/* ~ */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x7E/* ~ */ && lastChar !== 0x7E/* ~ */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '~~'\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '~~'\n            stack++;\n          } // else {\n            //  // standalone ' ~~ ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'del_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'del_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process ++inserted text++\n\nfunction ins(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x2B/* + */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x2B/* + */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x2B/* + */) { return false; }\n  if (nextChar === 0x2B/* + */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x2B/* + */) { pos++; }\n  if (pos !== start + 2) {\n    // sequence of 3+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x2B/* + */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x2B/* + */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x2B/* + */ && lastChar !== 0x2B/* + */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '++'\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '++'\n            stack++;\n          } // else {\n            //  // standalone ' ++ ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'ins_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'ins_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process ==highlighted text==\n\nfunction mark(state, silent) {\n  var found,\n      pos,\n      stack,\n      max = state.posMax,\n      start = state.pos,\n      lastChar,\n      nextChar;\n\n  if (state.src.charCodeAt(start) !== 0x3D/* = */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 4 >= max) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x3D/* = */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n  nextChar = state.src.charCodeAt(start + 2);\n\n  if (lastChar === 0x3D/* = */) { return false; }\n  if (nextChar === 0x3D/* = */) { return false; }\n  if (nextChar === 0x20 || nextChar === 0x0A) { return false; }\n\n  pos = start + 2;\n  while (pos < max && state.src.charCodeAt(pos) === 0x3D/* = */) { pos++; }\n  if (pos !== start + 2) {\n    // sequence of 3+ markers taking as literal, same as in a emphasis\n    state.pos += pos - start;\n    if (!silent) { state.pending += state.src.slice(start, pos); }\n    return true;\n  }\n\n  state.pos = start + 2;\n  stack = 1;\n\n  while (state.pos + 1 < max) {\n    if (state.src.charCodeAt(state.pos) === 0x3D/* = */) {\n      if (state.src.charCodeAt(state.pos + 1) === 0x3D/* = */) {\n        lastChar = state.src.charCodeAt(state.pos - 1);\n        nextChar = state.pos + 2 < max ? state.src.charCodeAt(state.pos + 2) : -1;\n        if (nextChar !== 0x3D/* = */ && lastChar !== 0x3D/* = */) {\n          if (lastChar !== 0x20 && lastChar !== 0x0A) {\n            // closing '=='\n            stack--;\n          } else if (nextChar !== 0x20 && nextChar !== 0x0A) {\n            // opening '=='\n            stack++;\n          } // else {\n            //  // standalone ' == ' indented with spaces\n            // }\n          if (stack <= 0) {\n            found = true;\n            break;\n          }\n        }\n      }\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 2;\n\n  if (!silent) {\n    state.push({ type: 'mark_open', level: state.level++ });\n    state.parser.tokenize(state);\n    state.push({ type: 'mark_close', level: --state.level });\n  }\n\n  state.pos = state.posMax + 2;\n  state.posMax = max;\n  return true;\n}\n\n// Process *this* and _that_\n\nfunction isAlphaNum(code) {\n  return (code >= 0x30 /* 0 */ && code <= 0x39 /* 9 */) ||\n         (code >= 0x41 /* A */ && code <= 0x5A /* Z */) ||\n         (code >= 0x61 /* a */ && code <= 0x7A /* z */);\n}\n\n// parse sequence of emphasis markers,\n// \"start\" should point at a valid marker\nfunction scanDelims(state, start) {\n  var pos = start, lastChar, nextChar, count,\n      can_open = true,\n      can_close = true,\n      max = state.posMax,\n      marker = state.src.charCodeAt(start);\n\n  lastChar = start > 0 ? state.src.charCodeAt(start - 1) : -1;\n\n  while (pos < max && state.src.charCodeAt(pos) === marker) { pos++; }\n  if (pos >= max) { can_open = false; }\n  count = pos - start;\n\n  if (count >= 4) {\n    // sequence of four or more unescaped markers can't start/end an emphasis\n    can_open = can_close = false;\n  } else {\n    nextChar = pos < max ? state.src.charCodeAt(pos) : -1;\n\n    // check whitespace conditions\n    if (nextChar === 0x20 || nextChar === 0x0A) { can_open = false; }\n    if (lastChar === 0x20 || lastChar === 0x0A) { can_close = false; }\n\n    if (marker === 0x5F /* _ */) {\n      // check if we aren't inside the word\n      if (isAlphaNum(lastChar)) { can_open = false; }\n      if (isAlphaNum(nextChar)) { can_close = false; }\n    }\n  }\n\n  return {\n    can_open: can_open,\n    can_close: can_close,\n    delims: count\n  };\n}\n\nfunction emphasis(state, silent) {\n  var startCount,\n      count,\n      found,\n      oldCount,\n      newCount,\n      stack,\n      res,\n      max = state.posMax,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (marker !== 0x5F/* _ */ && marker !== 0x2A /* * */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n\n  res = scanDelims(state, start);\n  startCount = res.delims;\n  if (!res.can_open) {\n    state.pos += startCount;\n    if (!silent) { state.pending += state.src.slice(start, state.pos); }\n    return true;\n  }\n\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + startCount;\n  stack = [ startCount ];\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === marker) {\n      res = scanDelims(state, state.pos);\n      count = res.delims;\n      if (res.can_close) {\n        oldCount = stack.pop();\n        newCount = count;\n\n        while (oldCount !== newCount) {\n          if (newCount < oldCount) {\n            stack.push(oldCount - newCount);\n            break;\n          }\n\n          // assert(newCount > oldCount)\n          newCount -= oldCount;\n\n          if (stack.length === 0) { break; }\n          state.pos += oldCount;\n          oldCount = stack.pop();\n        }\n\n        if (stack.length === 0) {\n          startCount = oldCount;\n          found = true;\n          break;\n        }\n        state.pos += count;\n        continue;\n      }\n\n      if (res.can_open) { stack.push(count); }\n      state.pos += count;\n      continue;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found) {\n    // parser failed to find ending tag, so it's not valid emphasis\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + startCount;\n\n  if (!silent) {\n    if (startCount === 2 || startCount === 3) {\n      state.push({ type: 'strong_open', level: state.level++ });\n    }\n    if (startCount === 1 || startCount === 3) {\n      state.push({ type: 'em_open', level: state.level++ });\n    }\n\n    state.parser.tokenize(state);\n\n    if (startCount === 1 || startCount === 3) {\n      state.push({ type: 'em_close', level: --state.level });\n    }\n    if (startCount === 2 || startCount === 3) {\n      state.push({ type: 'strong_close', level: --state.level });\n    }\n  }\n\n  state.pos = state.posMax + startCount;\n  state.posMax = max;\n  return true;\n}\n\n// Process ~subscript~\n\n// same as UNESCAPE_MD_RE plus a space\nvar UNESCAPE_RE = /\\\\([ \\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction sub(state, silent) {\n  var found,\n      content,\n      max = state.posMax,\n      start = state.pos;\n\n  if (state.src.charCodeAt(start) !== 0x7E/* ~ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 2 >= max) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + 1;\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === 0x7E/* ~ */) {\n      found = true;\n      break;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found || start + 1 === state.pos) {\n    state.pos = start;\n    return false;\n  }\n\n  content = state.src.slice(start + 1, state.pos);\n\n  // don't allow unescaped spaces/newlines inside\n  if (content.match(/(^|[^\\\\])(\\\\\\\\)*\\s/)) {\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 1;\n\n  if (!silent) {\n    state.push({\n      type: 'sub',\n      level: state.level,\n      content: content.replace(UNESCAPE_RE, '$1')\n    });\n  }\n\n  state.pos = state.posMax + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process ^superscript^\n\n// same as UNESCAPE_MD_RE plus a space\nvar UNESCAPE_RE$1 = /\\\\([ \\\\!\"#$%&'()*+,.\\/:;<=>?@[\\]^_`{|}~-])/g;\n\nfunction sup(state, silent) {\n  var found,\n      content,\n      max = state.posMax,\n      start = state.pos;\n\n  if (state.src.charCodeAt(start) !== 0x5E/* ^ */) { return false; }\n  if (silent) { return false; } // don't run any pairs in validation mode\n  if (start + 2 >= max) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  state.pos = start + 1;\n\n  while (state.pos < max) {\n    if (state.src.charCodeAt(state.pos) === 0x5E/* ^ */) {\n      found = true;\n      break;\n    }\n\n    state.parser.skipToken(state);\n  }\n\n  if (!found || start + 1 === state.pos) {\n    state.pos = start;\n    return false;\n  }\n\n  content = state.src.slice(start + 1, state.pos);\n\n  // don't allow unescaped spaces/newlines inside\n  if (content.match(/(^|[^\\\\])(\\\\\\\\)*\\s/)) {\n    state.pos = start;\n    return false;\n  }\n\n  // found!\n  state.posMax = state.pos;\n  state.pos = start + 1;\n\n  if (!silent) {\n    state.push({\n      type: 'sup',\n      level: state.level,\n      content: content.replace(UNESCAPE_RE$1, '$1')\n    });\n  }\n\n  state.pos = state.posMax + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process [links](<to> \"stuff\")\n\n\nfunction links(state, silent) {\n  var labelStart,\n      labelEnd,\n      label,\n      href,\n      title,\n      pos,\n      ref,\n      code,\n      isImage = false,\n      oldPos = state.pos,\n      max = state.posMax,\n      start = state.pos,\n      marker = state.src.charCodeAt(start);\n\n  if (marker === 0x21/* ! */) {\n    isImage = true;\n    marker = state.src.charCodeAt(++start);\n  }\n\n  if (marker !== 0x5B/* [ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  labelStart = start + 1;\n  labelEnd = parseLinkLabel(state, start);\n\n  // parser failed to find ']', so it's not a valid link\n  if (labelEnd < 0) { return false; }\n\n  pos = labelEnd + 1;\n  if (pos < max && state.src.charCodeAt(pos) === 0x28/* ( */) {\n    //\n    // Inline link\n    //\n\n    // [link](  <href>  \"title\"  )\n    //        ^^ skipping these spaces\n    pos++;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n    if (pos >= max) { return false; }\n\n    // [link](  <href>  \"title\"  )\n    //          ^^^^^^ parsing link destination\n    start = pos;\n    if (parseLinkDestination(state, pos)) {\n      href = state.linkContent;\n      pos = state.pos;\n    } else {\n      href = '';\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                ^^ skipping these spaces\n    start = pos;\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n\n    // [link](  <href>  \"title\"  )\n    //                  ^^^^^^^ parsing link title\n    if (pos < max && start !== pos && parseLinkTitle(state, pos)) {\n      title = state.linkContent;\n      pos = state.pos;\n\n      // [link](  <href>  \"title\"  )\n      //                         ^^ skipping these spaces\n      for (; pos < max; pos++) {\n        code = state.src.charCodeAt(pos);\n        if (code !== 0x20 && code !== 0x0A) { break; }\n      }\n    } else {\n      title = '';\n    }\n\n    if (pos >= max || state.src.charCodeAt(pos) !== 0x29/* ) */) {\n      state.pos = oldPos;\n      return false;\n    }\n    pos++;\n  } else {\n    //\n    // Link reference\n    //\n\n    // do not allow nested reference links\n    if (state.linkLevel > 0) { return false; }\n\n    // [foo]  [bar]\n    //      ^^ optional whitespace (can include newlines)\n    for (; pos < max; pos++) {\n      code = state.src.charCodeAt(pos);\n      if (code !== 0x20 && code !== 0x0A) { break; }\n    }\n\n    if (pos < max && state.src.charCodeAt(pos) === 0x5B/* [ */) {\n      start = pos + 1;\n      pos = parseLinkLabel(state, pos);\n      if (pos >= 0) {\n        label = state.src.slice(start, pos++);\n      } else {\n        pos = start - 1;\n      }\n    }\n\n    // covers label === '' and label === undefined\n    // (collapsed reference link and shortcut reference link respectively)\n    if (!label) {\n      if (typeof label === 'undefined') {\n        pos = labelEnd + 1;\n      }\n      label = state.src.slice(labelStart, labelEnd);\n    }\n\n    ref = state.env.references[normalizeReference(label)];\n    if (!ref) {\n      state.pos = oldPos;\n      return false;\n    }\n    href = ref.href;\n    title = ref.title;\n  }\n\n  //\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    if (isImage) {\n      state.push({\n        type: 'image',\n        src: href,\n        title: title,\n        alt: state.src.substr(labelStart, labelEnd - labelStart),\n        level: state.level\n      });\n    } else {\n      state.push({\n        type: 'link_open',\n        href: href,\n        title: title,\n        level: state.level++\n      });\n      state.linkLevel++;\n      state.parser.tokenize(state);\n      state.linkLevel--;\n      state.push({ type: 'link_close', level: --state.level });\n    }\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// Process inline footnotes (^[...])\n\n\nfunction footnote_inline(state, silent) {\n  var labelStart,\n      labelEnd,\n      footnoteId,\n      oldLength,\n      max = state.posMax,\n      start = state.pos;\n\n  if (start + 2 >= max) { return false; }\n  if (state.src.charCodeAt(start) !== 0x5E/* ^ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5B/* [ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  labelStart = start + 2;\n  labelEnd = parseLinkLabel(state, start + 1);\n\n  // parser failed to find ']', so it's not a valid note\n  if (labelEnd < 0) { return false; }\n\n  // We found the end of the link, and know for a fact it's a valid link;\n  // so all that's left to do is to call tokenizer.\n  //\n  if (!silent) {\n    if (!state.env.footnotes) { state.env.footnotes = {}; }\n    if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n    footnoteId = state.env.footnotes.list.length;\n\n    state.pos = labelStart;\n    state.posMax = labelEnd;\n\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      level: state.level\n    });\n    state.linkLevel++;\n    oldLength = state.tokens.length;\n    state.parser.tokenize(state);\n    state.env.footnotes.list[footnoteId] = { tokens: state.tokens.splice(oldLength) };\n    state.linkLevel--;\n  }\n\n  state.pos = labelEnd + 1;\n  state.posMax = max;\n  return true;\n}\n\n// Process footnote references ([^...])\n\nfunction footnote_ref(state, silent) {\n  var label,\n      pos,\n      footnoteId,\n      footnoteSubId,\n      max = state.posMax,\n      start = state.pos;\n\n  // should be at least 4 chars - \"[^x]\"\n  if (start + 3 > max) { return false; }\n\n  if (!state.env.footnotes || !state.env.footnotes.refs) { return false; }\n  if (state.src.charCodeAt(start) !== 0x5B/* [ */) { return false; }\n  if (state.src.charCodeAt(start + 1) !== 0x5E/* ^ */) { return false; }\n  if (state.level >= state.options.maxNesting) { return false; }\n\n  for (pos = start + 2; pos < max; pos++) {\n    if (state.src.charCodeAt(pos) === 0x20) { return false; }\n    if (state.src.charCodeAt(pos) === 0x0A) { return false; }\n    if (state.src.charCodeAt(pos) === 0x5D /* ] */) {\n      break;\n    }\n  }\n\n  if (pos === start + 2) { return false; } // no empty footnote labels\n  if (pos >= max) { return false; }\n  pos++;\n\n  label = state.src.slice(start + 2, pos - 1);\n  if (typeof state.env.footnotes.refs[':' + label] === 'undefined') { return false; }\n\n  if (!silent) {\n    if (!state.env.footnotes.list) { state.env.footnotes.list = []; }\n\n    if (state.env.footnotes.refs[':' + label] < 0) {\n      footnoteId = state.env.footnotes.list.length;\n      state.env.footnotes.list[footnoteId] = { label: label, count: 0 };\n      state.env.footnotes.refs[':' + label] = footnoteId;\n    } else {\n      footnoteId = state.env.footnotes.refs[':' + label];\n    }\n\n    footnoteSubId = state.env.footnotes.list[footnoteId].count;\n    state.env.footnotes.list[footnoteId].count++;\n\n    state.push({\n      type: 'footnote_ref',\n      id: footnoteId,\n      subId: footnoteSubId,\n      level: state.level\n    });\n  }\n\n  state.pos = pos;\n  state.posMax = max;\n  return true;\n}\n\n// List of valid url schemas, accorting to commonmark spec\n// http://jgm.github.io/CommonMark/spec.html#autolinks\n\nvar url_schemas = [\n  'coap',\n  'doi',\n  'javascript',\n  'aaa',\n  'aaas',\n  'about',\n  'acap',\n  'cap',\n  'cid',\n  'crid',\n  'data',\n  'dav',\n  'dict',\n  'dns',\n  'file',\n  'ftp',\n  'geo',\n  'go',\n  'gopher',\n  'h323',\n  'http',\n  'https',\n  'iax',\n  'icap',\n  'im',\n  'imap',\n  'info',\n  'ipp',\n  'iris',\n  'iris.beep',\n  'iris.xpc',\n  'iris.xpcs',\n  'iris.lwz',\n  'ldap',\n  'mailto',\n  'mid',\n  'msrp',\n  'msrps',\n  'mtqp',\n  'mupdate',\n  'news',\n  'nfs',\n  'ni',\n  'nih',\n  'nntp',\n  'opaquelocktoken',\n  'pop',\n  'pres',\n  'rtsp',\n  'service',\n  'session',\n  'shttp',\n  'sieve',\n  'sip',\n  'sips',\n  'sms',\n  'snmp',\n  'soap.beep',\n  'soap.beeps',\n  'tag',\n  'tel',\n  'telnet',\n  'tftp',\n  'thismessage',\n  'tn3270',\n  'tip',\n  'tv',\n  'urn',\n  'vemmi',\n  'ws',\n  'wss',\n  'xcon',\n  'xcon-userid',\n  'xmlrpc.beep',\n  'xmlrpc.beeps',\n  'xmpp',\n  'z39.50r',\n  'z39.50s',\n  'adiumxtra',\n  'afp',\n  'afs',\n  'aim',\n  'apt',\n  'attachment',\n  'aw',\n  'beshare',\n  'bitcoin',\n  'bolo',\n  'callto',\n  'chrome',\n  'chrome-extension',\n  'com-eventbrite-attendee',\n  'content',\n  'cvs',\n  'dlna-playsingle',\n  'dlna-playcontainer',\n  'dtn',\n  'dvb',\n  'ed2k',\n  'facetime',\n  'feed',\n  'finger',\n  'fish',\n  'gg',\n  'git',\n  'gizmoproject',\n  'gtalk',\n  'hcp',\n  'icon',\n  'ipn',\n  'irc',\n  'irc6',\n  'ircs',\n  'itms',\n  'jar',\n  'jms',\n  'keyparc',\n  'lastfm',\n  'ldaps',\n  'magnet',\n  'maps',\n  'market',\n  'message',\n  'mms',\n  'ms-help',\n  'msnim',\n  'mumble',\n  'mvn',\n  'notes',\n  'oid',\n  'palm',\n  'paparazzi',\n  'platform',\n  'proxy',\n  'psyc',\n  'query',\n  'res',\n  'resource',\n  'rmi',\n  'rsync',\n  'rtmp',\n  'secondlife',\n  'sftp',\n  'sgn',\n  'skype',\n  'smb',\n  'soldat',\n  'spotify',\n  'ssh',\n  'steam',\n  'svn',\n  'teamspeak',\n  'things',\n  'udp',\n  'unreal',\n  'ut2004',\n  'ventrilo',\n  'view-source',\n  'webcal',\n  'wtai',\n  'wyciwyg',\n  'xfire',\n  'xri',\n  'ymsgr'\n];\n\n// Process autolinks '<protocol:...>'\n\n\n/*eslint max-len:0*/\nvar EMAIL_RE    = /^<([a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/;\nvar AUTOLINK_RE = /^<([a-zA-Z.\\-]{1,25}):([^<>\\x00-\\x20]*)>/;\n\n\nfunction autolink(state, silent) {\n  var tail, linkMatch, emailMatch, url, fullUrl, pos = state.pos;\n\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */) { return false; }\n\n  tail = state.src.slice(pos);\n\n  if (tail.indexOf('>') < 0) { return false; }\n\n  linkMatch = tail.match(AUTOLINK_RE);\n\n  if (linkMatch) {\n    if (url_schemas.indexOf(linkMatch[1].toLowerCase()) < 0) { return false; }\n\n    url = linkMatch[0].slice(1, -1);\n    fullUrl = normalizeLink(url);\n    if (!state.parser.validateLink(url)) { return false; }\n\n    if (!silent) {\n      state.push({\n        type: 'link_open',\n        href: fullUrl,\n        level: state.level\n      });\n      state.push({\n        type: 'text',\n        content: url,\n        level: state.level + 1\n      });\n      state.push({ type: 'link_close', level: state.level });\n    }\n\n    state.pos += linkMatch[0].length;\n    return true;\n  }\n\n  emailMatch = tail.match(EMAIL_RE);\n\n  if (emailMatch) {\n\n    url = emailMatch[0].slice(1, -1);\n\n    fullUrl = normalizeLink('mailto:' + url);\n    if (!state.parser.validateLink(fullUrl)) { return false; }\n\n    if (!silent) {\n      state.push({\n        type: 'link_open',\n        href: fullUrl,\n        level: state.level\n      });\n      state.push({\n        type: 'text',\n        content: url,\n        level: state.level + 1\n      });\n      state.push({ type: 'link_close', level: state.level });\n    }\n\n    state.pos += emailMatch[0].length;\n    return true;\n  }\n\n  return false;\n}\n\n// Regexps to match html elements\n\nfunction replace$1(regex, options) {\n  regex = regex.source;\n  options = options || '';\n\n  return function self(name, val) {\n    if (!name) {\n      return new RegExp(regex, options);\n    }\n    val = val.source || val;\n    regex = regex.replace(name, val);\n    return self;\n  };\n}\n\n\nvar attr_name     = /[a-zA-Z_:][a-zA-Z0-9:._-]*/;\n\nvar unquoted      = /[^\"'=<>`\\x00-\\x20]+/;\nvar single_quoted = /'[^']*'/;\nvar double_quoted = /\"[^\"]*\"/;\n\n/*eslint no-spaced-func:0*/\nvar attr_value  = replace$1(/(?:unquoted|single_quoted|double_quoted)/)\n                    ('unquoted', unquoted)\n                    ('single_quoted', single_quoted)\n                    ('double_quoted', double_quoted)\n                    ();\n\nvar attribute   = replace$1(/(?:\\s+attr_name(?:\\s*=\\s*attr_value)?)/)\n                    ('attr_name', attr_name)\n                    ('attr_value', attr_value)\n                    ();\n\nvar open_tag    = replace$1(/<[A-Za-z][A-Za-z0-9]*attribute*\\s*\\/?>/)\n                    ('attribute', attribute)\n                    ();\n\nvar close_tag   = /<\\/[A-Za-z][A-Za-z0-9]*\\s*>/;\nvar comment     = /<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/;\nvar processing  = /<[?].*?[?]>/;\nvar declaration = /<![A-Z]+\\s+[^>]*>/;\nvar cdata       = /<!\\[CDATA\\[[\\s\\S]*?\\]\\]>/;\n\nvar HTML_TAG_RE = replace$1(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)\n  ('open_tag', open_tag)\n  ('close_tag', close_tag)\n  ('comment', comment)\n  ('processing', processing)\n  ('declaration', declaration)\n  ('cdata', cdata)\n  ();\n\n// Process html tags\n\n\nfunction isLetter$2(ch) {\n  /*eslint no-bitwise:0*/\n  var lc = ch | 0x20; // to lower case\n  return (lc >= 0x61/* a */) && (lc <= 0x7a/* z */);\n}\n\n\nfunction htmltag(state, silent) {\n  var ch, match, max, pos = state.pos;\n\n  if (!state.options.html) { return false; }\n\n  // Check start\n  max = state.posMax;\n  if (state.src.charCodeAt(pos) !== 0x3C/* < */ ||\n      pos + 2 >= max) {\n    return false;\n  }\n\n  // Quick fail on second char\n  ch = state.src.charCodeAt(pos + 1);\n  if (ch !== 0x21/* ! */ &&\n      ch !== 0x3F/* ? */ &&\n      ch !== 0x2F/* / */ &&\n      !isLetter$2(ch)) {\n    return false;\n  }\n\n  match = state.src.slice(pos).match(HTML_TAG_RE);\n  if (!match) { return false; }\n\n  if (!silent) {\n    state.push({\n      type: 'htmltag',\n      content: state.src.slice(pos, pos + match[0].length),\n      level: state.level\n    });\n  }\n  state.pos += match[0].length;\n  return true;\n}\n\n// Process html entity - &#123;, &#xAF;, &quot;, ...\n\n\nvar DIGITAL_RE = /^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i;\nvar NAMED_RE   = /^&([a-z][a-z0-9]{1,31});/i;\n\n\nfunction entity(state, silent) {\n  var ch, code, match, pos = state.pos, max = state.posMax;\n\n  if (state.src.charCodeAt(pos) !== 0x26/* & */) { return false; }\n\n  if (pos + 1 < max) {\n    ch = state.src.charCodeAt(pos + 1);\n\n    if (ch === 0x23 /* # */) {\n      match = state.src.slice(pos).match(DIGITAL_RE);\n      if (match) {\n        if (!silent) {\n          code = match[1][0].toLowerCase() === 'x' ? parseInt(match[1].slice(1), 16) : parseInt(match[1], 10);\n          state.pending += isValidEntityCode(code) ? fromCodePoint(code) : fromCodePoint(0xFFFD);\n        }\n        state.pos += match[0].length;\n        return true;\n      }\n    } else {\n      match = state.src.slice(pos).match(NAMED_RE);\n      if (match) {\n        var decoded = decodeEntity(match[1]);\n        if (match[1] !== decoded) {\n          if (!silent) { state.pending += decoded; }\n          state.pos += match[0].length;\n          return true;\n        }\n      }\n    }\n  }\n\n  if (!silent) { state.pending += '&'; }\n  state.pos++;\n  return true;\n}\n\n/**\n * Inline Parser `rules`\n */\n\nvar _rules$2 = [\n  [ 'text',            text ],\n  [ 'newline',         newline ],\n  [ 'escape',          escape ],\n  [ 'backticks',       backticks ],\n  [ 'del',             del ],\n  [ 'ins',             ins ],\n  [ 'mark',            mark ],\n  [ 'emphasis',        emphasis ],\n  [ 'sub',             sub ],\n  [ 'sup',             sup ],\n  [ 'links',           links ],\n  [ 'footnote_inline', footnote_inline ],\n  [ 'footnote_ref',    footnote_ref ],\n  [ 'autolink',        autolink ],\n  [ 'htmltag',         htmltag ],\n  [ 'entity',          entity ]\n];\n\n/**\n * Inline Parser class. Note that link validation is stricter\n * in Remarkable than what is specified by CommonMark. If you\n * want to change this you can use a custom validator.\n *\n * @api private\n */\n\nfunction ParserInline() {\n  this.ruler = new Ruler();\n  for (var i = 0; i < _rules$2.length; i++) {\n    this.ruler.push(_rules$2[i][0], _rules$2[i][1]);\n  }\n\n  // Can be overridden with a custom validator\n  this.validateLink = validateLink;\n}\n\n/**\n * Skip a single token by running all rules in validation mode.\n * Returns `true` if any rule reports success.\n *\n * @param  {Object} `state`\n * @api privage\n */\n\nParserInline.prototype.skipToken = function (state) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var pos = state.pos;\n  var i, cached_pos;\n\n  if ((cached_pos = state.cacheGet(pos)) > 0) {\n    state.pos = cached_pos;\n    return;\n  }\n\n  for (i = 0; i < len; i++) {\n    if (rules[i](state, true)) {\n      state.cacheSet(pos, state.pos);\n      return;\n    }\n  }\n\n  state.pos++;\n  state.cacheSet(pos, state.pos);\n};\n\n/**\n * Generate tokens for the given input range.\n *\n * @param  {Object} `state`\n * @api private\n */\n\nParserInline.prototype.tokenize = function (state) {\n  var rules = this.ruler.getRules('');\n  var len = rules.length;\n  var end = state.posMax;\n  var ok, i;\n\n  while (state.pos < end) {\n\n    // Try all possible rules.\n    // On success, the rule should:\n    //\n    // - update `state.pos`\n    // - update `state.tokens`\n    // - return true\n    for (i = 0; i < len; i++) {\n      ok = rules[i](state, false);\n\n      if (ok) {\n        break;\n      }\n    }\n\n    if (ok) {\n      if (state.pos >= end) { break; }\n      continue;\n    }\n\n    state.pending += state.src[state.pos++];\n  }\n\n  if (state.pending) {\n    state.pushPending();\n  }\n};\n\n/**\n * Parse the given input string.\n *\n * @param  {String} `str`\n * @param  {Object} `options`\n * @param  {Object} `env`\n * @param  {Array} `outTokens`\n * @api private\n */\n\nParserInline.prototype.parse = function (str, options, env, outTokens) {\n  var state = new StateInline(str, this, options, env, outTokens);\n  this.tokenize(state);\n};\n\n/**\n * Validate the given `url` by checking for bad protocols.\n *\n * @param  {String} `url`\n * @return {Boolean}\n */\n\nfunction validateLink(url) {\n  var BAD_PROTOCOLS = [ 'vbscript', 'javascript', 'file', 'data' ];\n  var str = url.trim().toLowerCase();\n  // Care about digital entities \"javascript&#x3A;alert(1)\"\n  str = replaceEntities(str);\n  if (str.indexOf(':') !== -1 && BAD_PROTOCOLS.indexOf(str.split(':')[0]) !== -1) {\n    return false;\n  }\n  return true;\n}\n\n// Remarkable default options\n\nvar defaultConfig = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '«»' for Russian, '„“' for German.\n    quotes: '“”‘’',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'block',\n        'inline',\n        'references',\n        'replacements',\n        'smartquotes',\n        'references',\n        'abbr2',\n        'footnote_tail'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fences',\n        'footnote',\n        'heading',\n        'hr',\n        'htmlblock',\n        'lheading',\n        'list',\n        'paragraph',\n        'table'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'del',\n        'emphasis',\n        'entity',\n        'escape',\n        'footnote_ref',\n        'htmltag',\n        'links',\n        'newline',\n        'text'\n      ]\n    }\n  }\n};\n\n// Remarkable default options\n\nvar fullConfig = {\n  options: {\n    html:         false,        // Enable HTML tags in source\n    xhtmlOut:     false,        // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '«»' for Russian, '„“' for German.\n    quotes:       '“”‘’',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight:     null,\n\n    maxNesting:    20            // Internal protection, recursion limit\n  },\n\n  components: {\n    // Don't restrict core/block/inline rules\n    core: {},\n    block: {},\n    inline: {}\n  }\n};\n\n// Commonmark default options\n\nvar commonmarkConfig = {\n  options: {\n    html:         true,         // Enable HTML tags in source\n    xhtmlOut:     true,         // Use '/' to close single tags (<br />)\n    breaks:       false,        // Convert '\\n' in paragraphs into <br>\n    langPrefix:   'language-',  // CSS language prefix for fenced blocks\n    linkTarget:   '',           // set target to open link in\n\n    // Enable some language-neutral replacements + quotes beautification\n    typographer:  false,\n\n    // Double + single quotes replacement pairs, when typographer enabled,\n    // and smartquotes on. Set doubles to '«»' for Russian, '„“' for German.\n    quotes: '“”‘’',\n\n    // Highlighter function. Should return escaped HTML,\n    // or '' if input not changed\n    //\n    // function (/*str, lang*/) { return ''; }\n    //\n    highlight: null,\n\n    maxNesting:   20            // Internal protection, recursion limit\n  },\n\n  components: {\n\n    core: {\n      rules: [\n        'block',\n        'inline',\n        'references',\n        'abbr2'\n      ]\n    },\n\n    block: {\n      rules: [\n        'blockquote',\n        'code',\n        'fences',\n        'heading',\n        'hr',\n        'htmlblock',\n        'lheading',\n        'list',\n        'paragraph'\n      ]\n    },\n\n    inline: {\n      rules: [\n        'autolink',\n        'backticks',\n        'emphasis',\n        'entity',\n        'escape',\n        'htmltag',\n        'links',\n        'newline',\n        'text'\n      ]\n    }\n  }\n};\n\n/**\n * Preset configs\n */\n\nvar config = {\n  'default': defaultConfig,\n  'full': fullConfig,\n  'commonmark': commonmarkConfig\n};\n\n/**\n * The `StateCore` class manages state.\n *\n * @param {Object} `instance` Remarkable instance\n * @param {String} `str` Markdown string\n * @param {Object} `env`\n */\n\nfunction StateCore(instance, str, env) {\n  this.src = str;\n  this.env = env;\n  this.options = instance.options;\n  this.tokens = [];\n  this.inlineMode = false;\n\n  this.inline = instance.inline;\n  this.block = instance.block;\n  this.renderer = instance.renderer;\n  this.typographer = instance.typographer;\n}\n\n/**\n * The main `Remarkable` class. Create an instance of\n * `Remarkable` with a `preset` and/or `options`.\n *\n * @param {String} `preset` If no preset is given, `default` is used.\n * @param {Object} `options`\n */\n\nfunction Remarkable(preset, options) {\n  if (typeof preset !== 'string') {\n    options = preset;\n    preset = 'default';\n  }\n\n  if (options && options.linkify != null) {\n    console.warn(\n      'linkify option is removed. Use linkify plugin instead:\\n\\n' +\n      'import Remarkable from \\'remarkable\\';\\n' +\n      'import linkify from \\'remarkable/linkify\\';\\n' +\n      'new Remarkable().use(linkify)\\n'\n    );\n  }\n\n  this.inline   = new ParserInline();\n  this.block    = new ParserBlock();\n  this.core     = new Core();\n  this.renderer = new Renderer();\n  this.ruler    = new Ruler();\n\n  this.options  = {};\n  this.configure(config[preset]);\n  this.set(options || {});\n}\n\n/**\n * Set options as an alternative to passing them\n * to the constructor.\n *\n * ```js\n * md.set({typographer: true});\n * ```\n * @param {Object} `options`\n * @api public\n */\n\nRemarkable.prototype.set = function (options) {\n  assign(this.options, options);\n};\n\n/**\n * Batch loader for components rules states, and options\n *\n * @param  {Object} `presets`\n */\n\nRemarkable.prototype.configure = function (presets) {\n  var self = this;\n\n  if (!presets) { throw new Error('Wrong `remarkable` preset, check name/content'); }\n  if (presets.options) { self.set(presets.options); }\n  if (presets.components) {\n    Object.keys(presets.components).forEach(function (name) {\n      if (presets.components[name].rules) {\n        self[name].ruler.enable(presets.components[name].rules, true);\n      }\n    });\n  }\n};\n\n/**\n * Use a plugin.\n *\n * ```js\n * var md = new Remarkable();\n *\n * md.use(plugin1)\n *   .use(plugin2, opts)\n *   .use(plugin3);\n * ```\n *\n * @param  {Function} `plugin`\n * @param  {Object} `options`\n * @return {Object} `Remarkable` for chaining\n */\n\nRemarkable.prototype.use = function (plugin, options) {\n  plugin(this, options);\n  return this;\n};\n\n\n/**\n * Parse the input `string` and return a tokens array.\n * Modifies `env` with definitions data.\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {Array} Array of tokens\n */\n\nRemarkable.prototype.parse = function (str, env) {\n  var state = new StateCore(this, str, env);\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * The main `.render()` method that does all the magic :)\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {String} Rendered HTML.\n */\n\nRemarkable.prototype.render = function (str, env) {\n  env = env || {};\n  return this.renderer.render(this.parse(str, env), this.options, env);\n};\n\n/**\n * Parse the given content `string` as a single string.\n *\n * @param  {String} `string`\n * @param  {Object} `env`\n * @return {Array} Array of tokens\n */\n\nRemarkable.prototype.parseInline = function (str, env) {\n  var state = new StateCore(this, str, env);\n  state.inlineMode = true;\n  this.core.process(state);\n  return state.tokens;\n};\n\n/**\n * Render a single content `string`, without wrapping it\n * to paragraphs\n *\n * @param  {String} `str`\n * @param  {Object} `env`\n * @return {String}\n */\n\nRemarkable.prototype.renderInline = function (str, env) {\n  env = env || {};\n  return this.renderer.render(this.parseInline(str, env), this.options, env);\n};\n\nexport { Remarkable, utils };\n","import { render } from \"./AddItemModal.vue?vue&type=template&id=1fb15594&scoped=true\"\nimport script from \"./AddItemModal.vue?vue&type=script&lang=js\"\nexport * from \"./AddItemModal.vue?vue&type=script&lang=js\"\n\nimport \"./AddItemModal.vue?vue&type=style&index=0&id=1fb15594&lang=scss&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ник\\\\Documents\\\\GitHub\\\\tg-colors-server\\\\admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1fb15594\"]])\n\nexport default __exports__","import { render } from \"./Items.vue?vue&type=template&id=4b1a95a0\"\nimport script from \"./Items.vue?vue&type=script&lang=js\"\nexport * from \"./Items.vue?vue&type=script&lang=js\"\n\nimport \"./Items.vue?vue&type=style&index=0&id=4b1a95a0&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ник\\\\Documents\\\\GitHub\\\\tg-colors-server\\\\admin\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementBlock","_createVNode","_component_AddItemModal","visible","$data","formData","mode","_ctx","_component_Table","fields","postData","$options","actions","rows","editMode","name","class","_createElementVNode","_component_CButton","color","onClick","_component_CModal","size","backdrop","alignment","$props","onClose","_component_CForm","novalidate","validated","ref","onChange","onSubmit","style","_component_CModalHeader","_component_CModalTitle","_component_CModalBody","_component_CFormInput","title","placeholder","id","feedbackValid","feedbackInvalid","required","_hoisted_1","_hoisted_2","_Fragment","project","_createBlock","_component_CFormCheck","key","checked","category_name","type","value","label","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","sizeName","_component_CInputGroup","variant","materialName","_hoisted_7","accept","multiple","_hoisted_8","length","item","index","src","_component_QuillEditor","theme","toolbar","_component_CModalFooter","extend","destination","i","arguments","source","hasOwnProperty","repeat","character","count","Array","join","trimLeadingNewlines","string","replace","trimTrailingNewlines","indexEnd","substring","blockElements","isBlock","node","is","voidElements","isVoid","hasVoid","has","meaningfulWhenBlankElements","isMeaningfulWhenBlank","hasMeaningfulWhenBlank","tagNames","indexOf","nodeName","getElementsByTagName","some","tagName","rules","cleanAttribute","attribute","Rules","options","this","_keep","_remove","blankRule","replacement","blankReplacement","keepReplacement","defaultRule","defaultReplacement","array","push","findRule","rule","filterValue","filter","toLowerCase","isArray","TypeError","call","collapseWhitespace","element","isPre","firstChild","prevText","keepLeadingWs","prev","next","nodeType","text","data","test","substr","remove","nextNode","nextSibling","parentNode","removeChild","current","paragraph","content","lineBreak","br","heading","hLevel","Number","charAt","headingStyle","underline","blockquote","list","parent","lastElementChild","listItem","prefix","bulletListMarker","start","getAttribute","prototype","children","indentedCodeBlock","codeBlockStyle","textContent","fencedCodeBlock","match","className","language","code","fenceChar","fence","fenceSize","fenceInCodeRegex","RegExp","exec","horizontalRule","hr","inlineLink","linkStyle","href","referenceLink","reference","linkReferenceStyle","references","append","emphasis","trim","emDelimiter","strong","strongDelimiter","hasSiblings","previousSibling","isCodeBlock","extraSpace","delimiter","matches","image","alt","titlePart","add","unshift","keep","forNode","isBlank","forEach","fn","root","window","canParseHTMLNatively","Parser","DOMParser","canParse","parseFromString","e","createHTMLParser","shouldUseActiveX","doc","ActiveXObject","designMode","open","write","close","document","implementation","createHTMLDocument","useActiveX","_htmlParser","HTMLParser","RootNode","input","htmlParser","getElementById","cloneNode","preformattedCode","isPreOrCode","Node","isCode","flankingWhitespace","leading","trailing","edges","edgeWhitespace","leadingAscii","isFlankedByWhitespace","leadingNonAscii","trailingAscii","trailingNonAscii","m","side","sibling","regExp","isFlanked","nodeValue","reduce","escapes","TurndownService","defaults","outerHTML","process","self","childNodes","output","escape","replacementForNode","postProcess","whitespace","s1","s2","nls","Math","max","separator","canConvert","turndown","use","plugin","addRule","accumulator","textarea","decodeEntity","createElement","innerHTML","hasOwn","Object","object","assign","obj","sources","slice","keys","UNESCAPE_MD_RE","unescapeMd","str","isValidEntityCode","c","fromCodePoint","surrogate1","surrogate2","String","fromCharCode","NAMED_ENTITY_RE","DIGITAL_ENTITY_TEST_RE","replaceEntityPattern","decoded","charCodeAt","parseInt","replaceEntities","HTML_ESCAPE_TEST_RE","HTML_ESCAPE_REPLACE_RE","HTML_REPLACEMENTS","replaceUnsafeChar","ch","escapeHtml","nextToken","tokens","idx","tight","blockquote_open","blockquote_close","getBreak","block","env","instance","fences","fenceName","highlighted","token","langClass","langPrefix","langName","params","split","fence_custom","highlight","apply","concat","heading_open","heading_close","xhtmlOut","bullet_list_open","bullet_list_close","list_item_open","list_item_close","ordered_list_open","order","ordered_list_close","paragraph_open","paragraph_close","addBreak","link_open","target","linkTarget","link_close","suffix","table_open","table_close","thead_open","thead_close","tbody_open","tbody_close","tr_open","tr_close","th_open","align","th_close","td_open","td_close","strong_open","strong_close","em_open","em_close","del_open","del_close","ins_open","ins_close","mark_open","mark_close","sub","sup","hardbreak","softbreak","breaks","htmlblock","htmltag","abbr_open","abbr_close","footnote_ref","n","toString","subId","footnote_block_open","footnote_block_close","footnote_open","footnote_close","footnote_anchor","dl_open","dt_open","dd_open","dl_close","dt_close","dd_close","Renderer","Ruler","__rules__","__cache__","state","inlineMode","level","lines","parse","StateInline","parserInline","outTokens","parser","pos","posMax","pending","pendingLevel","cache","isInLabel","linkLevel","linkContent","labelUnmatchedScopes","parseLinkLabel","found","marker","labelEnd","oldPos","oldFlag","skipToken","parseAbbr","abbreviations","abbr","l","inline","normalizeLink","url","normalized","decodeURI","err","encodeURI","parseLinkDestination","link","validateLink","parseLinkTitle","normalizeReference","toUpperCase","parseReference","tok","footnote_block","j","t","lastParagraph","currentLabel","insideRef","refTokens","footnotes","pop","renderInline","_rules","len","result","render","__find__","__compile__","chains","enabled","altName","chain","at","opt","Error","before","beforeName","ruleName","splice","after","afterName","enable","strict","disable","getRules","chainName","pushPending","cacheSet","val","cacheGet","PUNCT_CHARS","regEscape","s","abbr2","nodes","reg","regText","blockTokens","abbrRegExp","map","x","sort","a","b","lastIndex","RARE_RE","SCOPED_ABBR_RE","SCOPED_ABBR","replaceScopedAbbr","inlineTokens","blkIdx","typographer","QUOTE_TEST_RE","QUOTE_RE","PUNCT_RE","APOSTROPHE","isLetter","replaceAt","smartquotes","thisLevel","lastSpace","nextSpace","canOpen","canClose","isSingle","stack","OUTER","single","quotes","Core","ruler","StateBlock","indent","indent_found","bMarks","eMarks","tShift","blkIndent","line","lineMax","parentType","ddIndent","startLine","endLine","nextLine","last","isEmpty","getLines","silent","mem","haveEndMarker","skipChars","skipSpaces","lastLineEmpty","oldTShift","oldBMarks","oldIndent","oldParentType","terminatorRules","terminate","maxNesting","tokenize","cnt","skipBulletListMarker","skipOrderedListMarker","markTightParagraphs","oldTight","posAfterMarker","indentAfterMarker","markerValue","markerCharCode","isOrdered","contentStart","listTokIdx","prevEmptyEnd","listLines","itemLines","footnote","oldBMark","refs","tmp","skipCharsBack","lheading","skipEmptyLines","from","min","begin","end","keepLastLF","first","queue","shift","html_blocks","HTML_TAG_OPEN_RE","HTML_TAG_CLOSE_RE","isLetter$1","lc","html","getLine","table","lineText","cell","aligns","tableLines","tbodyLines","skipMarker","markTightParagraphs$1","deflist","ddLine","dtLine","oldDDIndent","_rules$1","ParserBlock","ok","hasEmptyLines","TABS_SCAN_RE","NEWLINES_RE","SPACES_RE","isTerminatorChar","newline","pmax","lineStart","lastTabPos","offset","ESCAPED","backticks","matchStart","matchEnd","del","lastChar","nextChar","ins","mark","isAlphaNum","scanDelims","can_open","can_close","delims","startCount","oldCount","newCount","res","UNESCAPE_RE","UNESCAPE_RE$1","links","labelStart","isImage","footnote_inline","footnoteId","oldLength","footnoteSubId","url_schemas","EMAIL_RE","AUTOLINK_RE","autolink","tail","linkMatch","emailMatch","fullUrl","replace$1","regex","attr_name","unquoted","single_quoted","double_quoted","attr_value","open_tag","close_tag","comment","processing","declaration","cdata","HTML_TAG_RE","isLetter$2","DIGITAL_RE","NAMED_RE","entity","_rules$2","ParserInline","BAD_PROTOCOLS","cached_pos","defaultConfig","components","core","fullConfig","commonmarkConfig","config","StateCore","renderer","Remarkable","preset","linkify","console","warn","configure","set","presets","parseInline","myApi","axios","withCredentials","QuillEditor","props","validator","includes","description","preview","image_list","tags_array","Set","options_object","options_array","textMd2","textEditMode","formValid","preview_list","distinct_materials","distinct_sizes","tempSize","tempMaterial","updated","material","price","md","$refs","postTextEditor","setHTML","replaceAll","log","el","preview_name","$store","publicPath","getElementsByClassName","classList","async","projects","getProjects","tags","methods","addMaterial","size_template","values","fromEntries","entries","addSize","new_oo_entries","dropMaterial","dropSize","get","then","catch","error","eventBus","previewMultiImage","event","files","reader","FileReader","onload","readAsDataURL","reset","dropFile","addNewPost","changeP","closeModal","constractFromData","isEdit","getHTML","FormData","turndownService","v","JSON","stringify","addNewing","post","headers","editNewing","put","__exports__","credentials","AddItemModal","Table","formVisible","dataActions","Дублировать","action","duble","Изменить","change","Удалить","delete","tableFieldNames","created","formMode","category","$route","categoryName","elObj","take","page","tag","tagsArray","undefined","confirm"],"sourceRoot":""}