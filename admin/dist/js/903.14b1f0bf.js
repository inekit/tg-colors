"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[903],{7903:function(t,e,a){a.r(e),a.d(e,{default:function(){return M}});var o=a(3396);function i(t,e,a,i,r,l){const s=(0,o.up)("AddStaticModal"),n=(0,o.up)("Table");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(s,{visible:r.formVisible,formData:r.formData,mode:t.formMode},null,8,["visible","formData","mode"]),(0,o.Wm)(n,{fields:r.tableFieldNames,postData:l.getStatic,actions:r.dataActions,rows:r.rows,editMode:"form",name:"Статика"},null,8,["fields","postData","actions","rows"])])}var r=a(9242);const l=["validated"];function s(t,e,a,i,s,n){const d=(0,o.up)("CModalTitle"),c=(0,o.up)("CModalHeader"),m=(0,o.up)("QuillEditor"),u=(0,o.up)("CModalBody"),f=(0,o.up)("CButton"),p=(0,o.up)("CModalFooter"),h=(0,o.up)("CModal");return(0,o.wg)(),(0,o.j4)(h,{size:"xl",backdrop:"static",alignment:"center",visible:a.visible,onClose:n.closeModal},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Статические данные")])),_:1})])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[(0,o._)("form",{ref:"add-file-form",novalidate:"",validated:s.formValid,onSubmit:e[0]||(e[0]=(0,r.iM)(((...e)=>t.addTag&&t.addTag(...e)),["prevent"])),class:"add-user",style:{display:"'none'"}},[(0,o.Wm)(m,{theme:"snow",toolbar:"essential",ref:"greetingEditor",id:"greetingEditor",placeholder:"Текст приветствия"},null,512),(0,o.Wm)(m,{theme:"snow",toolbar:"essential",ref:"orderEditor",id:"orderEditor",placeholder:"Текст в корзине"},null,512)],40,l)])),_:1}),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{color:"secondary",onClick:n.closeModal},{default:(0,o.w5)((()=>[(0,o.Uk)(" Отменить ")])),_:1},8,["onClick"]),(0,o.Wm)(f,{color:"primary",onClick:n.editStatic},{default:(0,o.w5)((()=>[(0,o.Uk)("Изменить")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["visible","onClose"])}var n=a(6265),d=a.n(n),c=a(6149),m=a(7123);const u=d().create({withCredentials:!0});var f={components:{QuillEditor:c.Bn},props:{visible:!1,formData:{gitHubLink:"",linkedInLink:"",about:""}},data(){return{formValid:!1}},updated(){this.formValid=!1,this.formData.about&&this.$refs.aboutEditor?.setHTML(this.formData.about)},methods:{closeModal(){m.Z.$emit("closeModal")},constractFromData(){var t=new FormData;return t.append("greeting",this.$refs.greetingEditor.getHTML()),t.append("order",this.$refs.orderEditor.getHTML()),t},editStatic(){try{const t=this.constractFromData();u.put(this.$store.state.publicPath+"/api/admin/statics",t,{headers:{"Content-Type":"multipart/form-data"}}).then((()=>{m.Z.$emit("staticEdited")})).catch((t=>{console.log(t),m.Z.$emit("noresponse",t)}))}catch(t){this.formValid=!0}}}},p=a(89);const h=(0,p.Z)(f,[["render",s]]);var b=h,g=a(7942);const w=d().create({withCredentials:!0});var v={name:"Static",components:{AddStaticModal:b,Table:g.Z},data(){return{myApi:w,formVisible:!1,formData:{},rows:[],dataActions:{"Изменить":{action:this.changeUser,color:"warning"}},tableFieldNames:[{name:"greeting",title:"Приветствие"},{name:"order",title:"Корзина"}]}},created(){m.Z.$on("closeModal",(()=>{this.formVisible=!1,this.formData={}})),m.Z.$on("staticEdited",(()=>{this.formVisible=!1,this.get(),this.formData={}}))},methods:{changeUser(t){this.formVisible=!0,this.formData=t},getStatic(t,e){return!(e>1)&&w.get(this.$store.state.publicPath+"/api/admin/statics/",{perPage:t??0,page:e??0}).then((t=>(this.rows=t.data,t.data))).catch((t=>{m.Z.$emit("noresponse",t)}))}}};const _=(0,p.Z)(v,[["render",i]]);var M=_}}]);
//# sourceMappingURL=903.14b1f0bf.js.map