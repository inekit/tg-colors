{"version":3,"file":"js/238.d0a5a88d.js","mappings":"kOACSA,MAAM,gB,sDAAXC,EAAAA,EAAAA,IAEM,MAFNC,EAEM,EADFC,EAAAA,EAAAA,GAAoH,SAA7GC,KAAK,SAAUC,MAAOC,EAAAA,OAAOC,MAAMC,YAAcC,QAAK,oBAAEC,EAAAA,QAAAA,EAAAA,UAAAA,IAASC,SAAM,oBAAED,EAAAA,aAAAA,EAAAA,eAAAA,IAAaE,YAAY,W,yBAMjH,GACIC,OACA,MAAO,CACP,CACA,EACAC,UAEA,EACAC,QAAS,CACLC,OAAOC,GACHC,KAAKC,OAAOZ,MAAMC,YAAcS,EAAEG,OAAOf,KAC7C,EACAgB,YAAYJ,GACiB,YAArBC,KAAKI,OAAOC,MAAoBL,KAAKM,QAAQC,KAAK,WAC1D,I,QCfR,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O,qGCRIxB,EAAAA,EAAAA,GAAgB,UAAZ,WAAO,G,GAENH,MAAM,iB,iIAFXE,GACA0B,EAAAA,EAAAA,IAAeC,IACf1B,EAAAA,EAAAA,GAOM,MAPN2B,EAOM,gBANF7B,EAAAA,EAAAA,IAKM8B,EAAAA,GAAAA,MAAAA,EAAAA,EAAAA,IAAAA,KALuCZ,OAAOZ,MAAMyB,SAA1BC,K,WAAhChC,EAAAA,EAAAA,IAKM,OALDD,MAAM,cAAyDkC,IAAKD,EAAKE,I,EAC1EP,EAAAA,EAAAA,IAGcQ,EAAAA,CAHAC,GAAE,UAAYJ,EAAKE,M,mBAC7B,IAAuB,EAAvBhC,EAAAA,EAAAA,GAAuB,OAAjBmC,IAAKL,EAAKM,K,WAChBpC,EAAAA,EAAAA,GAAwB,mBAAjB8B,EAAKV,MAAI,M,4DAUhC,GACIiB,WAAY,CAAEC,YAAWA,EAAAA,GACzB5B,OACI,MAAO,CACH6B,KAAM,EACNC,QAAS,GACTX,QAAS,CAAC,CACNG,GAAI,EAAGS,MAAO,WAAYC,KAAM,qBAAsBN,IAAK,KAIvE,EACAO,MAAO,CACH,2BAA4B,WACxB5B,KAAK6B,mBACT,GAEJC,gBACI9B,KAAK+B,SACLC,OAAOC,SAASC,OAAOC,WAAWC,UAElCC,QAAQC,IAAItC,KAAKI,OAAOmC,QAExB,MAAMC,EAAWxC,KAAKI,OAAOmC,QAAQf,KAC/BiB,EAAczC,KAAKI,OAAOmC,QAAQG,OAExC1C,KAAK2C,KAAO3C,KAAKI,OAAOmC,QAAQI,KAEf,MAAbH,EAAkBxC,KAAK4C,eAAiBH,EACtB,MAAbD,EAAkBxC,KAAK6C,mBAAqBJ,EAC/B,MAAbD,GACLxC,KAAK8C,iBAAmB9C,KAAKC,OAAOZ,MAAM0D,QAAQC,MAAKC,GAAMT,GAAYS,EAAGhC,MAAKiC,OAAOF,MAAKC,GAAMA,EAAGE,KAAOV,KAAcW,IAC3HpD,KAAKqD,iBAAmBZ,GAEN,MAAbD,IACLxC,KAAKsD,gBAAkBtD,KAAKC,OAAOZ,MAAM0D,QAAQC,MAAKC,GAAMT,GAAYS,EAAGhC,MAAKiC,OAAOF,MAAKC,GAAMA,EAAGE,KAAOV,KAAcW,IAC1HpD,KAAKuD,gBAAkBd,GAI3BzC,KAAKc,cAAgBd,KAAK6B,mBAE9B,EAEAhC,QAAS,CACLkC,SACIC,OAAOwB,SAAW1B,UACd,IAAI2B,EAAezB,OAAO0B,QAAU1B,OAAO2B,YAAc,IAAOC,SAASC,gBAAgBC,aAEzF,GAAIL,IAAiBzD,KAAK+D,gBAAkB/D,KAAKgE,QAAS,CACtDhE,KAAK+D,eAAgB,EACrB,MAAME,QAAejE,KAAK6B,oBAC1B7B,KAAKkE,KAAO,IAAIlE,KAAKkE,QAASD,EAClC,EAER,EACAnC,0BACI,MAAMhB,QAAgBd,KAAKC,OAAOZ,MAAM8E,MAAMC,IAAIpE,KAAKC,OAAOZ,MAAMgF,SAAW,SAAU,CACrF9B,OAAQ,CACJK,eAAgB5C,KAAK4C,eACrBE,iBAAkB9C,KAAK8C,iBACvBO,iBAAkBrD,KAAKqD,iBACvBR,mBAAoB7C,KAAK6C,mBACzBS,gBAAiBtD,KAAKsD,gBACtBC,gBAAiBvD,KAAKuD,gBACtBjE,YAAaU,KAAKC,OAAOZ,MAAMC,YAC/BqD,KAAM3C,KAAK2C,KACX2B,KAAM,GACN9C,KAAMxB,KAAKwB,MAAQ,KAGtB+C,MAAKC,IACF,MAAMC,EAAUD,EAAS7E,KAQzB,OANI8E,EAAQC,OAAU1E,KAAKyB,QAAUzB,KAAKgE,SAAU,EAC/ChE,KAAKwB,OAEVxB,KAAK+D,eAAgB,EAGdU,CAAO,IAEjBE,OAAM5E,IAAO6E,EAAAA,EAAAA,MAAe,aAAc7E,EAAE,IAIjD,OAFAsC,QAAQC,IAAIxB,GAELA,CAEX,I,QClGR,MAAMN,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://@coreui/coreui-free-vue-admin-template/./src/components/Search.vue","webpack://@coreui/coreui-free-vue-admin-template/./src/components/Search.vue?0923","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Results.vue","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Results.vue?c515"],"sourcesContent":["<template>\r\n    <div class=\"search-block\">\r\n        <input type=\"search\" :value=\"$store.state.searchQuery\" @input=\"search\" @change=\"openResults\" placeholder=\"Поиск..\"/>\r\n    </div>\r\n  </template>\r\n  \r\n<script>\r\n\r\nexport default {\r\n    data(){\r\n    return {\r\n    }\r\n    },\r\n    mounted(){\r\n        \r\n    },\r\n    methods: {\r\n        search(e){\r\n            this.$store.state.searchQuery = e.target.value\r\n        },\r\n        openResults(e){\r\n            if (this.$route.name === \"Filters\") this.$router.push('/results')\r\n        }\r\n    }\r\n    \r\n    \r\n    \r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.search-block{\r\n    margin: 1rem; \r\n\r\n    input{\r\n        width: 100%;\r\n        height: 40px;\r\n        border-radius: 0.5rem;\r\n        border: 1px solid;\r\n        border-color: #e2e2e2;\r\n        font-size: 1rem;\r\n        padding: 1rem;\r\n        &:hover{\r\n            border-color: #7090fa;\r\n\r\n        }\r\n    }\r\n}\r\n</style>\r\n  ","import { render } from \"./Search.vue?vue&type=template&id=5ff0d8a1\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=5ff0d8a1&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ник\\\\Documents\\\\GitHub\\\\tg-vitrina\\\\webapp\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <h1>Каталог</h1>\r\n    <searchBlock />\r\n    <div class=\"results-block\">\r\n        <div class=\"result-item\" v-for=\"item in this.$store.state.results\" :key=\"item.id\">\r\n            <router-link :to=\"`/items/${item.id}`\">\r\n                <img :src=\"item.img\" />\r\n                <h2>{{ item.name }}</h2>\r\n            </router-link>\r\n        </div>\r\n    </div>\r\n</template>\r\n  \r\n<script>\r\nimport searchBlock from '@/components/Search.vue';\r\nimport eventBus from '../eventBus'\r\n\r\nexport default {\r\n    components: { searchBlock },\r\n    data() {\r\n        return {\r\n            page: 1,\r\n            perPage: 10,\r\n            results: [{\r\n                id: 1, title: \"Объект 1\", link: \"https://google.com\", img: \"\"\r\n            }],\r\n        }\r\n\r\n    },\r\n    watch: {\r\n        \"$store.state.searchQuery\": function () {\r\n            this.sendSearchRequest()\r\n        }\r\n    },\r\n    async mounted() {\r\n        this.scroll()\r\n        window.Telegram.WebApp.MainButton.disable();\r\n\r\n        console.log(this.$route.params)\r\n\r\n        const filterId = this.$route.params?.page;\r\n        const filterValue = this.$route.params?.filter;\r\n\r\n        this.city = this.$route.params?.city;\r\n\r\n        if (filterId === \"2\") this.property_class = filterValue;\r\n        else if (filterId === \"3\") this.commissioning_year = filterValue;\r\n        else if (filterId === \"1\") {\r\n            this.sale_percent_min = this.$store.state.filters.find(el => filterId == el.id)?.values.find(el => el.max == filterValue)?.min\r\n            this.sale_percent_max = filterValue;\r\n        }\r\n        else if (filterId === \"4\") {\r\n            this.meter_price_min = this.$store.state.filters.find(el => filterId == el.id)?.values.find(el => el.max == filterValue)?.min\r\n            this.meter_price_max = filterValue;\r\n        }\r\n\r\n\r\n        this.results = await this.sendSearchRequest();\r\n\r\n    },\r\n\r\n    methods: {\r\n        scroll() {\r\n            window.onscroll = async () => {\r\n                let bottomwindow = window.scrollY + window.innerHeight + 1000 > document.documentElement.scrollHeight;\r\n\r\n                if (bottomwindow && !this.loadingUpdate && !this.isEnded) {\r\n                    this.loadingUpdate = true;\r\n                    const update = await this.sendSearchRequest();\r\n                    this.news = [...this.news, ...update];\r\n                }\r\n            };\r\n        },\r\n        async sendSearchRequest() {\r\n            const results = await this.$store.state.myApi.get(this.$store.state.restAddr + '/items', {\r\n                params: {\r\n                    property_class: this.property_class,\r\n                    sale_percent_min: this.sale_percent_min,\r\n                    sale_percent_max: this.sale_percent_max,\r\n                    commissioning_year: this.commissioning_year,\r\n                    meter_price_min: this.meter_price_min,\r\n                    meter_price_max: this.meter_price_max,\r\n                    searchQuery: this.$store.state.searchQuery,\r\n                    city: this.city,\r\n                    take: 10,\r\n                    page: this.page ?? 1,\r\n                }\r\n            })\r\n                .then(response => {\r\n                    const newsUpd = response.data;\r\n\r\n                    if (newsUpd.length < (this.perPage)) this.isEnded = true;\r\n                    else this.page++;\r\n\r\n                    this.loadingUpdate = false;\r\n\r\n\r\n                    return newsUpd;\r\n                })\r\n                .catch(e => { eventBus.$emit('noresponse', e) })\r\n\r\n            console.log(results)\r\n\r\n            return results\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.results-block {\r\n    display: flex;\r\n    margin: 0;\r\n    padding: 0;\r\n    list-style: none;\r\n    flex-wrap: wrap;\r\n\r\n    .result-item {\r\n        width: calc(50vw - 3.5rem);\r\n        height: calc(70vw - 3.5rem);\r\n        margin: 1rem;\r\n        margin-bottom: 0;\r\n        padding: 1rem;\r\n        border-radius: 1rem;\r\n        display: block;\r\n        background: rgb(255, 255, 255);\r\n        // border: 1px solid rgb(169, 169, 169);\r\n        box-shadow: 0px 5px 5px rgb(169, 169, 169);\r\n        overflow: hidden;\r\n        position: relative;\r\n\r\n        img {\r\n            position: absolute;\r\n            max-width: 150%;\r\n            max-height: 30%;\r\n        }\r\n\r\n        a {\r\n            display: block;\r\n            text-decoration: none;\r\n            position: absolute;\r\n            height: calc(100% - 2rem);\r\n            width: calc(100% - 2rem);\r\n            left: 0;\r\n            top: 0;\r\n            margin: 1rem;\r\n\r\n            h2 {\r\n                position: absolute;\r\n                top: 30vw;\r\n                width: 40vw;\r\n                color: #414141;\r\n                font-weight: 200;\r\n                font-size: 1.3rem;\r\n            }\r\n        }\r\n\r\n        &:nth-child(2n-1) {\r\n            margin-right: 0.5rem;\r\n        }\r\n\r\n        &:nth-child(2n) {\r\n            margin-left: 0.5rem;\r\n        }\r\n    }\r\n\r\n}\r\n</style>\r\n  ","import { render } from \"./Results.vue?vue&type=template&id=70bc1e3c\"\nimport script from \"./Results.vue?vue&type=script&lang=js\"\nexport * from \"./Results.vue?vue&type=script&lang=js\"\n\nimport \"./Results.vue?vue&type=style&index=0&id=70bc1e3c&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ник\\\\Documents\\\\GitHub\\\\tg-vitrina\\\\webapp\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","type","value","_ctx","state","searchQuery","onInput","$options","onChange","placeholder","data","mounted","methods","search","e","this","$store","target","openResults","$route","name","$router","push","__exports__","render","_createVNode","_component_searchBlock","_hoisted_2","_Fragment","results","item","key","id","_component_router_link","to","src","img","components","searchBlock","page","perPage","title","link","watch","sendSearchRequest","async","scroll","window","Telegram","WebApp","MainButton","disable","console","log","params","filterId","filterValue","filter","city","property_class","commissioning_year","sale_percent_min","filters","find","el","values","max","min","sale_percent_max","meter_price_min","meter_price_max","onscroll","bottomwindow","scrollY","innerHeight","document","documentElement","scrollHeight","loadingUpdate","isEnded","update","news","myApi","get","restAddr","take","then","response","newsUpd","length","catch","eventBus"],"sourceRoot":""}