{"version":3,"file":"js/441.37a027fa.js","mappings":"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","sources":["webpack://@coreui/coreui-free-vue-admin-template/./src/components/Search.vue","webpack://@coreui/coreui-free-vue-admin-template/./src/components/Search.vue?0923","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Results.vue","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Results.vue?c515"],"sourcesContent":["<template>\n    <div class=\"search-block\">\n        <input type=\"search\" :value=\"$store.state.searchQuery\" @input=\"search\" @change=\"openResults\" placeholder=\"Поиск..\"/>\n    </div>\n  </template>\n  \n<script>\n\nexport default {\n    data(){\n    return {\n    }\n    },\n    mounted(){\n        \n    },\n    methods: {\n        search(e){\n            this.$store.state.searchQuery = e.target.value\n        },\n        openResults(e){\n            if (this.$route.name === \"Filters\") this.$router.push('/results')\n        }\n    }\n    \n    \n    \n}\n</script>\n\n<style lang=\"scss\">\n.search-block{\n    margin: 1rem; \n\n    input{\n        width: 100%;\n        height: 40px;\n        border-radius: 0.5rem;\n        border: 1px solid;\n        border-color: #e2e2e2;\n        font-size: 1rem;\n        padding: 1rem;\n        &:hover{\n            border-color: #7090fa;\n\n        }\n    }\n}\n</style>\n  ","import { render } from \"./Search.vue?vue&type=template&id=5ff0d8a1\"\nimport script from \"./Search.vue?vue&type=script&lang=js\"\nexport * from \"./Search.vue?vue&type=script&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=5ff0d8a1&lang=scss\"\n\nimport exportComponent from \"/Users/a123/Documents/js/front/tg-vitrina-web/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <h1>Каталог</h1>\n    <searchBlock/>\n    <div class=\"results-block\">\n        <div class=\"result-item\" v-for=\"item in this.$store.state.results\" :key=\"item.id\">\n            <router-link :to=\"`/items/${item.id}`\">\n                <div class=\"img-container\">\n                    <img v-for=\"img_id in [...Array(item.images_count).keys()]\" :key=\"img_id\" \n                     :src=\"`/api/img/${item.city_name === 'Москва' ? 'mos' : 'spb'}/${item.id}/${img_id}`\"/>\n                </div>\n                <h2>{{ item.name }}</h2>\n            </router-link>\n        </div>\n    </div>\n  </template>\n  \n<script>\nimport searchBlock from '@/components/Search.vue';\nimport eventBus from '../eventBus'\n\nexport default {\n    components: {searchBlock},\n    data(){\n    return {\n        results: [{\n            id: 1, title: \"Объект 1\", link: \"https://google.com\", img: \"\"\n        }],\n    }\n        \n    },\n    watch: {\n        \"$store.state.searchQuery\": function() {\n            this.sendSearchRequest()\n    }\n    },\n    mounted(){\n\n        window.Telegram.WebApp.MainButton.hide();\n        window.Telegram.WebApp.MainButton.disable();\n        window.Telegram.WebApp.BackButton.show()\n\n        console.log(this.$route.params)\n\n        const filterId = this.$route.params?.page;\n        const filterValue = this.$route.params?.filter;\n\n        this.city = this.$route.params?.city;\n\n        if (filterId === \"2\") this.property_class = filterValue;\n        else if (filterId === \"3\") this.commissioning_year = filterValue;\n        else if (filterId === \"1\") {\n            this.sale_percent_min = this.$store.state.filters.find(el=>filterId==el.id)?.values.find(el=>el.max==filterValue)?.min\n            this.sale_percent_max = filterValue;\n        }\n        else if (filterId === \"4\") {\n            this.meter_price_min = this.$store.state.filters.find(el=>filterId==el.id)?.values.find(el=>el.max==filterValue)?.min\n            this.meter_price_max = filterValue;\n        }\n\n        this.sendSearchRequest()\n    },\n    methods: {\n        sendSearchRequest(){\n            this.$store.state.myApi.get(this.$store.state.restAddr+'/items',{\n                params: {\n                    property_class: this.property_class,\n                    sale_percent_min: this.sale_percent_min,\n                    sale_percent_max: this.sale_percent_max,\n                    commissioning_year: this.commissioning_year,\n                    meter_price_min: this.meter_price_min,\n                    meter_price_max: this.meter_price_max,\n                    searchQuery: this.$store.state.searchQuery,\n                    city: this.city,\n\n            }})\n            .then(response => this.$store.state.results = response.data)\n            .catch(e=>{eventBus.$emit('noresponse', e)})\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.results-block{\n    display: flex;\n    margin: 0;\n    padding: 0;\n    list-style: none;\n    flex-wrap: wrap;\n    .result-item{\n        width: calc(50vw - 3.5rem);\n        height: calc(70vw - 3.5rem);\n        margin: 1rem;\n        margin-bottom: 0;\n        padding: 1rem ;\n        border-radius: 1rem;\n        display: block;\n        background: rgb(255, 255, 255);\n       // border: 1px solid rgb(169, 169, 169);\n        box-shadow: 0px 5px 5px rgb(169, 169, 169);\n        overflow: hidden;\n        position: relative;\n        img{\n            position: absolute;\n            max-width: 150%;\n            max-height: 30%;\n        }\n        a{\n            display: block;\n            text-decoration: none;\n            position: absolute;\n            height: calc(100% - 2rem);\n            width: calc(100% - 2rem);\n            left: 0;\n            top: 0;\n            margin: 1rem;\n            h2{\n                position: absolute;\n                top: 30vw;\n                width: 40vw;\n                color: #414141;\n                font-weight: 200;\n                font-size: 1.3rem;\n            }\n        }\n        &:nth-child(2n-1){\n        margin-right: 0.5rem;\n        }\n        &:nth-child(2n){\n            margin-left: 0.5rem;\n        }\n    }\n    \n}\n</style>\n  ","import { render } from \"./Results.vue?vue&type=template&id=4a6d6284\"\nimport script from \"./Results.vue?vue&type=script&lang=js\"\nexport * from \"./Results.vue?vue&type=script&lang=js\"\n\nimport \"./Results.vue?vue&type=style&index=0&id=4a6d6284&lang=scss\"\n\nimport exportComponent from \"/Users/a123/Documents/js/front/tg-vitrina-web/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","type","value","_ctx","state","searchQuery","onInput","$options","onChange","placeholder","data","mounted","methods","search","e","this","$store","target","openResults","$route","name","$router","push","__exports__","render","_createVNode","_component_searchBlock","_hoisted_2","_Fragment","results","item","key","id","_component_router_link","to","_hoisted_3","Array","images_count","keys","img_id","src","city_name","components","searchBlock","title","link","img","watch","sendSearchRequest","window","Telegram","WebApp","MainButton","hide","disable","BackButton","show","console","log","params","filterId","page","filterValue","filter","city","property_class","commissioning_year","sale_percent_min","filters","find","el","values","max","min","sale_percent_max","meter_price_min","meter_price_max","myApi","get","restAddr","then","response","catch","eventBus"],"sourceRoot":""}