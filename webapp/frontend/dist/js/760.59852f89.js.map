{"version":3,"file":"js/760.59852f89.js","mappings":"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","sources":["webpack://@coreui/coreui-free-vue-admin-template/./src/views/Categories.vue","webpack://@coreui/coreui-free-vue-admin-template/./src/views/Categories.vue?3bbe"],"sourcesContent":["<template>\r\n    <h1>Категории</h1>\r\n    <InstagramLoader class=\"preloader\" ref=\"preloader\" viewBox=\"0 0 300 250\">\r\n    </InstagramLoader>\r\n    <InstagramLoader class=\"preloader\" ref=\"preloader\" viewBox=\"0 0 300 200\">\r\n    </InstagramLoader>\r\n    <InstagramLoader class=\"preloader\" ref=\"preloader\" viewBox=\"0 0 300 200\"></InstagramLoader>\r\n    <div class=\"categories-block\">\r\n        <div class=\"result-item\" v-for=\"item, index in ($store.state.categories ?? [])\">\r\n            <router-link :to=\"`/results/${$store.state.userId}?category=${item.name}`\">\r\n                <div class=\"img-container\">\r\n                    <img :src=\"`/pics/${getPreviewLink(item.preview)}`\"\r\n                        :onerror=\"`javascript:this.onerror=null;this.src='/pics/${item.preview}';`\" />\r\n                </div>\r\n                <div class=\"text-container\">\r\n                    <h2>{{ item.name }}</h2>\r\n                </div>\r\n            </router-link>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport searchBlock from '@/components/Search.vue';\r\nimport eventBus from '../eventBus'\r\nimport { ListLoader, InstagramLoader } from 'vue-content-loader'\r\n\r\n//primaryColor=\"var(--tg-theme-hint-color)\"\r\nexport default {\r\n    components: { searchBlock, InstagramLoader },\r\n    data() {\r\n        return {\r\n        }\r\n    },\r\n    watch: {\r\n    },\r\n    beforeMount() {\r\n        this.bodyWidth = document.body.clientWidth\r\n\r\n    },\r\n    async mounted() {\r\n        window.Telegram?.WebApp.BackButton.hide()\r\n        window.Telegram?.WebApp.expand()\r\n\r\n        let uri = window.location.search.substring(1);\r\n        this.params = new URLSearchParams(uri)\r\n        this.backFilters = { size: this.params.get('size'), material: this.params.get('material') }\r\n        this.mainside_id = this.params.get('mainside_id') === \"null\" ? null : this.params.get('mainside_id')\r\n\r\n        this.$store.state.userId = this.$route.params?.userId;\r\n\r\n        this.updatePage(300);\r\n\r\n        //window.Telegram?.WebApp.onEvent('viewportChanged', () => window.Telegram?.WebApp.expand())\r\n        window.Telegram?.WebApp.enableClosingConfirmation()\r\n\r\n        if (await this.haveBasketItems()) {\r\n            window.Telegram?.WebApp.MainButton.onClick(this.routeToBasket);\r\n            window.Telegram?.WebApp.MainButton.show();\r\n            window.Telegram?.WebApp.MainButton.setText(\"Корзина\");\r\n        } else {\r\n            window.Telegram?.WebApp.MainButton.offClick(this.routeToBasket);\r\n            window.Telegram?.WebApp.MainButton.hide();\r\n        }\r\n    },\r\n    async beforeUnmount() {\r\n        window.Telegram?.WebApp.MainButton.offClick(this.routeToBasket);\r\n        window.Telegram?.WebApp.MainButton.hide();\r\n    },\r\n    computed: {\r\n        preloaderColor() {\r\n            return window.Telegram?.WebApp?.ThemeParams?.hint_color\r\n        }\r\n    },\r\n    methods: {\r\n        routeToBasket() {\r\n            this.$router.push(\"/basket\")\r\n        },\r\n        async haveBasketItems() {\r\n            const results = await this.$store.state.myApi.get(this.$store.state.restAddr + '/basket_data', {\r\n                params: {\r\n                    user_id: this.$store.state.userId,\r\n                }\r\n            })\r\n                .then(response => {\r\n                    return response.data.individual_text || response.data.favorites.length\r\n                })\r\n                .catch(e => { eventBus.$emit('noresponse', e) })\r\n\r\n            return results\r\n\r\n        },\r\n        async updatePage(delay) {\r\n            this.$store.state.categories = await this.getCategories(true);\r\n\r\n            this.$refs['results-block']?.classList.add(\"hidden\")\r\n            document.body.classList.add('stop-scrolling')\r\n\r\n\r\n            setTimeout(() => {\r\n                const elements = document.getElementsByClassName('preloader')\r\n\r\n                console.log(elements)\r\n\r\n                for (let el of elements) {\r\n                    el.classList.add(\"hidden\")\r\n                }\r\n                this.$refs['results-block']?.classList.remove(\"hidden\")\r\n                document.body.classList.remove('stop-scrolling')\r\n\r\n            }, delay)\r\n        },\r\n        async getCategories() {\r\n            const subPath = '/categories'\r\n\r\n            const results = await this.$store.state.myApi.get(this.$store.state.restAddr + subPath, {\r\n                params: {\r\n                }\r\n            })\r\n                .then(response => {\r\n                    return response.data;\r\n                })\r\n                .catch(e => { eventBus.$emit('noresponse', e) })\r\n\r\n            return results\r\n\r\n        },\r\n        getPreviewLink(link) {\r\n            const parts = link?.match(/\\.([^.]+)$|$/)\r\n            if (!parts?.[1]) return;\r\n            return link?.split('.').slice(0, -1).join('.') + '_preview.' + parts[1]\r\n\r\n        }\r\n    }\r\n}\r\n</script>\r\n  \r\n\r\n<style lang=\"scss\">\r\n.categories-block {\r\n    display: flex;\r\n    gap: 16px;\r\n    width: calc(100% - 2rem);\r\n    margin: 1rem;\r\n    padding: 0;\r\n    list-style: none;\r\n    flex-wrap: wrap;\r\n\r\n    .masonry-column {\r\n        flex: 1 1 calc((100% / 2) - 2rem) !important;\r\n    }\r\n\r\n\r\n    .result-item {\r\n        width: 100%;\r\n        height: fit-content;\r\n        margin: 0;\r\n        flex: 0 0 calc(50% - 8px) !important;\r\n\r\n\r\n        border-radius: 1rem;\r\n        display: block;\r\n        background-color: white;\r\n        background-color: var(--tg-theme-bg-color);\r\n        color: #414141;\r\n        color: var(--tg-theme-text-color);\r\n        box-shadow: 0px 1px 5px rgb(216, 216, 216);\r\n        //box-shadow: 0px 1px 5px var(--tg-theme-hint-color);\r\n\r\n        overflow: hidden;\r\n        position: relative;\r\n\r\n\r\n        .img-container {\r\n            background-color: #414141;\r\n            background-color: var(--tg-theme-text-color);\r\n            width: 100%;\r\n            height: 40vw;\r\n            position: relative;\r\n            overflow: hidden;\r\n        }\r\n\r\n        a {\r\n            display: block;\r\n            text-decoration: none;\r\n            height: calc(100% + 2rem);\r\n            width: calc(100%);\r\n\r\n            .text-container {\r\n                padding: 1rem;\r\n                top: 70%;\r\n                width: calc(100% - 2rem);\r\n            }\r\n\r\n            h2 {\r\n                margin: 0;\r\n                width: 100%;\r\n                color: #414141;\r\n                color: var(--tg-theme-text-color);\r\n                font-weight: 400;\r\n                font-size: 4vw;\r\n                text-align: center;\r\n                word-wrap: break-word;\r\n            }\r\n\r\n            img {\r\n                object-fit: cover;\r\n                width: 100%;\r\n                height: 100%;\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n</style>\r\n  ","import { render } from \"./Categories.vue?vue&type=template&id=0cdc7132\"\nimport script from \"./Categories.vue?vue&type=script&lang=js\"\nexport * from \"./Categories.vue?vue&type=script&lang=js\"\n\nimport \"./Categories.vue?vue&type=style&index=0&id=0cdc7132&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ник\\\\Documents\\\\GitHub\\\\tg-colors-server\\\\webapp\\\\frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","_hoisted_1","_createVNode","_component_InstagramLoader","ref","viewBox","_hoisted_2","_createElementBlock","_Fragment","_ctx","state","categories","item","index","_hoisted_3","_component_router_link","to","userId","name","_hoisted_4","src","$options","preview","onerror","_hoisted_6","components","searchBlock","InstagramLoader","data","watch","beforeMount","this","bodyWidth","document","body","clientWidth","async","window","Telegram","WebApp","BackButton","hide","expand","uri","location","search","substring","params","URLSearchParams","backFilters","size","get","material","mainside_id","$store","$route","updatePage","enableClosingConfirmation","haveBasketItems","MainButton","onClick","routeToBasket","show","setText","offClick","computed","preloaderColor","ThemeParams","hint_color","methods","$router","push","results","myApi","restAddr","user_id","then","response","individual_text","favorites","length","catch","e","eventBus","delay","getCategories","$refs","classList","add","setTimeout","elements","getElementsByClassName","console","log","el","remove","subPath","getPreviewLink","link","parts","match","split","slice","join","__exports__","render"],"sourceRoot":""}